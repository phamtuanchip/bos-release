!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.ELEMENT_TREE_COLUMN=t()}(this,function(){"use strict";function e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var t,r=function(e,t){for(var r=-1,o=0;o<t.length;o++)if(t[o]==e){r=o;break}return r},o=function(e,t,o,n){for(var a=[],i=[e],l=-1;l!=i.length;)l=i.length,t.forEach(function(e){r(e[o],i)>-1&&r(e[n],i)==-1&&(a.push(e[n]),i.push(e[n]))});return a},n=function(){return Math.floor(Math.random()*Math.random()*Math.random()*Math.random()*1e3)},a=function(e,t){for(var r=0;t[r]&&(!t[r].$extra||t[r].$extra.hash!=e);)r++;return r},i={indexOf:r,descendantsIds:o,hash:n,index:a},l={floderIcon:function(e,t){var r=!1;t.$extra&&(r=t.$extra.expanded);var o=e.props.folderIcon,n=e.props.folderIcon+"-open";return r?n:o},hasChild:function(e,t){return void 0!=t[e.props.childNumKey]?t[e.props.childNumKey]>0:void 0!=t[e.props.childKey]&&t[e.props.childKey].length>0},paddingLeft:function(e,t){return 14*parseInt(t[e.props.levelKey])+"px"},icon:function(e){return e.$extra&&1==e.$extra.loading?"el-icon-loading":e.$extra&&e.$extra.expanded?"el-icon-caret-bottom":"el-icon-caret-right"},has:function e(t,r,o){var n=t.props.treeKey,a=t.props.parentKey,i=r[n],e=!1;return o.forEach(function(t){t[n]!=i&&t[n]!=r[a]||(e=!0)}),e},commit:function(e,t,r){var o=t.store.table,n=t.store.states,a=n.selection;o.store.commit("setData",r),o.clearSelection(),o.store.states._data.forEach(function(t){l.has(e,t,a)&&o.toggleRowSelection(t)})},setSystemExpanded:function(e,t){e.forEach(function(e){e.$extra={isRender:t}})},doexpanded:function(e,t,r,o){var n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=e.store.table,p=(e.store.states,t.props),d=JSON.parse(JSON.stringify(a.store.states._data));if(void 0==d[r].$extra||!d[r].$extra.loading)if(void 0==d[r].$extra?d[r].$extra={expanded:!0}:d[r].$extra.expanded=!d[r].$extra.expanded,d[r].$extra.expanded)if(null!=p.remote){var s=i.hash();d[r].$extra.expanded=!1,d[r].$extra.hash=s,d[r].$extra.loading=!0,l.commit(t,e,d),p.remote(o,function(r){var o=a.store.states._data,d=i.index(s,o);if(o[d].$extra={loading:!1,expanded:!!(r&&r.length>0)},r&&r.length>0){for(var c=o.slice(0,d+1),f=0;f<d+1;)o.shift(),f++;l.setSystemExpanded(r,n),o=c.concat(r).concat(o)}else o[d][p.childNumKey]=0;l.commit(t,e,o)})}else{for(var c=d.slice(0,r+1),f=0;f<r+1;)d.shift(),f++;var u=o[p.childKey];l.setSystemExpanded(o[p.childKey],n),d=c.concat(u).concat(d),l.commit(t,e,d)}else{var h=o[p.treeKey],u=[],x=i.descendantsIds(h,d,p.parentKey,p.treeKey);d.forEach(function(e){i.indexOf(e[p.treeKey],x)==-1&&u.push(e)}),d=u,l.commit(t,e,d)}},evalDetails:function(e,t,r){var o=void 0;if(e.data.scopedSlots)o=e.data.scopedSlots.default(t);else{o=r("span",{},e.props.formatter?e.props.formatter(t.row,t.column):t.row[e.props.prop])}return o}},p={functional:!0,name:"el-table-tree-column",props:(t={prop:{type:String},label:String,className:String,labelClassName:String,property:String},e(t,"prop",String),e(t,"width",{}),e(t,"minWidth",{}),e(t,"renderHeader",Function),e(t,"sortable",{type:[String,Boolean],default:!1}),e(t,"sortMethod",Function),e(t,"resizable",{type:Boolean,default:!0}),e(t,"context",{}),e(t,"columnKey",String),e(t,"align",String),e(t,"headerAlign",String),e(t,"showTooltipWhenOverflow",Boolean),e(t,"showOverflowTooltip",Boolean),e(t,"fixed",[Boolean,String]),e(t,"formatter",Function),e(t,"selectable",Function),e(t,"reserveSelection",Boolean),e(t,"filterMethod",Function),e(t,"filteredValue",Array),e(t,"filters",Array),e(t,"filterMultiple",{type:Boolean,default:!0}),e(t,"treeKey",{type:String,default:"id"}),e(t,"childNumKey",{type:String,default:"child_num"}),e(t,"parentKey",{type:String,default:"parent_id"}),e(t,"levelKey",{type:String,default:"depth"}),e(t,"childKey",{type:String,default:"children"}),e(t,"fileIcon",{type:String,default:"el-icon-file"}),e(t,"folderIcon",{type:String,default:"el-icon-folder"}),e(t,"remote",{type:Function,default:null}),e(t,"expandAll",{type:Boolean,default:!1}),e(t,"expandKey",{type:String,default:"expanded"}),t),render:function(e,t){var r=e,o=function(e){var o=e.store.table.store.states._data[e.$index];return o&&o[t.props.expandKey]&&(void 0==o.$extra||void 0==o.$extra.expanded)?l.doexpanded(e,t,e.$index,e.row,!1):o&&(void 0==o.$extra||o.$extra.isRender)&&t.props.expandAll&&l.doexpanded(e,t,e.$index,e.row,!0),r("span",{on:{click:function(r){r.preventDefault(),l.doexpanded(e,t,e.$index,e.row)}}},[r("span",{style:{paddingLeft:l.paddingLeft(t,e.row)}},[r("i",{class:l.icon(e.row)}),e._self._v(" "),r("i",{class:l.floderIcon(t,e.row),staticStyle:{"padding-right":"7px"}})]),l.evalDetails(t,e,r)])},n=function(e){return r("span",[r("span",{style:{paddingLeft:l.paddingLeft(t,e.row)}},[r("i",{class:t.props.fileIcon,staticStyle:{"padding-right":"7px","padding-left":"18px"}})]),l.evalDetails(t,e,r)])};return r("el-table-column",{attrs:{prop:t.props.prop,label:t.props.label,width:t.props.width,"class-name":t.props.className,"label-class-name":t.props.labelClassName,property:t.props.property,"min-width":t.props.minWidth,"render-header":t.props.renderHeader,sortable:t.props.sortable,"sort-method":t.props.sortMethod,resizable:t.props.resizable,context:t.props.context,"column-key":t.props.columnKey,align:t.props.align,"header-align":t.props.headerAlign,"show-tooltip-when-overflow":t.props.showTooltipWhenOverflow,"show-overflow-tooltip":t.props.showOverflowTooltip,fixed:t.props.fixed,formatter:t.props.formatter,selectable:t.props.selectable,"reserve-selection":t.props.reserveSelection,"filter-method":t.props.filterMethod,"filtered-value":t.props.filteredValue,filters:t.props.filters,"filter-multiple":t.props.filterMultiple},scopedSlots:{default:function(e){return l.hasChild(t,e.row)?[o(e)]:[n(e)]}}})}};return"undefined"!=typeof window&&window.Vue&&Vue.component(p.name,p),p});
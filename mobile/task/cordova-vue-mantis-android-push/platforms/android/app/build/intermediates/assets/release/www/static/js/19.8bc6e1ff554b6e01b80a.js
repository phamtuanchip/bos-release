webpackJsonp([19],{938:function(e,t,a){"use strict";function s(e){a(992)}Object.defineProperty(t,"__esModule",{value:!0});var r=a(994),l=a(995),n=a(0),o=s,i=n(r.a,l.a,!1,o,"data-v-7aed3da6",null);t.default=i.exports},972:function(e,t,a){!function(t,a){e.exports=a()}(0,function(){return function(e){function t(s){if(a[s])return a[s].exports;var r=a[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var a={};return t.m=e,t.c=a,t.d=function(e,a,s){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:s})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=0)}([function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=t.dragscroll={init:function(e,t){var a=void 0,s=void 0,r=function(){var r=void 0,l=void 0,n=void 0;e.addEventListener("mousedown",e.md=function(a){var s="nochilddrag"===t.arg,o="firstchilddrag"===t.arg,i=document.elementFromPoint(a.pageX-window.pageXOffset,a.pageY-window.pageYOffset)===e,c=document.elementFromPoint(a.pageX-window.pageXOffset,a.pageY-window.pageYOffset)===e.firstChild,d=function(e){n=1,r=e.clientX,l=e.clientY,e.preventDefault()};s?i&&d(a):o?(i||c)&&d(a):d(a)},0),window.addEventListener("mouseup",e.mu=function(){n=0},0),window.addEventListener("mousemove",e.mm=function(o){n&&(t.modifiers.x?(e.scrollLeft-=a=-r+(r=o.clientX),e===document.body&&(e.scrollLeft-=a)):t.modifiers.y?(e.scrollTop-=s=-l+(l=o.clientY),e===document.body&&(e.scrollTop-=s)):(e.scrollLeft-=a=-r+(r=o.clientX),e.scrollTop-=s=-l+(l=o.clientY),e===document.body&&(e.scrollLeft-=a,e.scrollTop-=s)))},0)};void 0===t.value||!0===t.value?"complete"===document.readyState?r():window.addEventListener("load",r,0):(t.value&&console.error("The passed value should be either 'undefined', 'true' or 'false'."),e.removeEventListener("mousedown",e.md,0),window.removeEventListener("mouseup",e.mu,0),window.removeEventListener("mousemove",e.mm,0))},bind:function(e,t,a){t.def.init(e,t)},update:function(e,t,a,s){t.value!==t.oldValue&&t.def.init(e,t)},unbind:function(e,t,a){e.removeEventListener("mousedown",e.md,0),window.removeEventListener("mouseup",e.mu,0),window.removeEventListener("mousemove",e.mm,0)}},r={install:function(e,t){e.directive("dragscroll",s)}};"undefined"!=typeof window&&window.Vue&&(window.VueDragscroll=r,window.Vue.use(r)),t.default=r}])})},992:function(e,t,a){var s=a(993);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a(937)("d9476f0c",s,!0)},993:function(e,t,a){t=e.exports=a(936)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"WeekTarget.vue",sourceRoot:""}])},994:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_vue__=__webpack_require__(3),__WEBPACK_IMPORTED_MODULE_1_vue_dragscroll__=__webpack_require__(972),__WEBPACK_IMPORTED_MODULE_1_vue_dragscroll___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_vue_dragscroll__);__WEBPACK_IMPORTED_MODULE_0_vue__.default.use(__WEBPACK_IMPORTED_MODULE_1_vue_dragscroll___default.a),__WEBPACK_IMPORTED_MODULE_0_vue__.default.use(__webpack_require__(40)),__webpack_exports__.a={name:"WeekTarget",component:{},props:["datasrc"],inject:["taskDone","statusColors"],data:function(){return{}},methods:{onShowMenu:function(e,t){var a=this;a.datasrc.cells[e].ShowMenu=!t;for(var s=e+1;s<a.datasrc.cells.length;s++)if(a.datasrc.cells[e+1]&&(!a.datasrc.cells[e+1].Level||a.datasrc.cells[e+1].Level>a.datasrc.cells[e].Level)&&!t){if(a.datasrc.cells[e+1]&&a.datasrc.cells[e+1].Level){if(a.datasrc.cells[s].Level==a.datasrc.cells[e+1].Level)a.datasrc.cells[s].Display=!t;else if(a.datasrc.cells[s].Level!=a.datasrc.cells[e+1].Level)return!1}else if(a.datasrc.cells[e+1]&&!a.datasrc.cells[e+1].Level&&(a.datasrc.cells[s].Display=!t,a.datasrc.cells[s+1]&&a.datasrc.cells[s+1].Level))return!1}else if(a.datasrc.cells[e+1]&&a.datasrc.cells[e+1].Level){if(a.datasrc.cells[s].Display=!t,a.datasrc.cells[s].ShowMenu=!t,a.datasrc.cells[s+1]&&a.datasrc.cells[s+1].Level==a.datasrc.cells[e].Level)return!1}else if(a.datasrc.cells[e+1]&&!a.datasrc.cells[e+1].Level&&(a.datasrc.cells[s].Display=!t,a.datasrc.cells[s+1]&&a.datasrc.cells[s+1].Level))return!1},convertSpendTime:function convertSpendTime(data){var exp="";return exp=Math.abs(data)>=24?parseFloat(eval(data)/24).toFixed(0)+" ngày":0!=data?data+" giờ":data},getWeekthisYear:function(){this.arrWeek=[];var e=moment().week();__WEBPACK_IMPORTED_MODULE_0_vue__.default.moment().isoWeekday()>=5&&(e+=1);for(var t=e;t>0;t--){var a=__WEBPACK_IMPORTED_MODULE_0_vue__.default.moment(this.thisYear.toString(),"YYYY").add(t,"weeks").startOf("isoweek").format("DD/MM/YYYY"),s=__WEBPACK_IMPORTED_MODULE_0_vue__.default.moment(this.thisYear.toString(),"YYYY").add(t,"weeks").endOf("isoweek").format("DD/MM/YYYY"),r={name:"Tuần "+t+" ("+a+" - "+s+")",value:t};this.arrWeek.push(r)}this.model.WeekNumber=__WEBPACK_IMPORTED_MODULE_0_vue__.default.moment().isoWeek(),this.bindObjWeek()},bindObjWeek:function(){this.isWeek="true",this.firstDayOfWeek(this.thisYear,this.model.WeekNumber,!0)},firstDayOfWeek:function(e,t,a){this.model.PlanStartDateStartValue=new Date(e,0,1);var s=this.model.PlanStartDateStartValue.getTimezoneOffset();this.model.PlanStartDateStartValue.setDate(this.model.PlanStartDateStartValue.getDate()+4-(this.model.PlanStartDateStartValue.getDay()||7)),this.model.PlanStartDateStartValue.setTime(this.model.PlanStartDateStartValue.getTime()+6048e5*(t+(e==this.model.PlanStartDateStartValue.getFullYear()?-1:0))),this.model.PlanStartDateStartValue.setTime(this.model.PlanStartDateStartValue.getTime()+60*(this.model.PlanStartDateStartValue.getTimezoneOffset()-s)*1e3),this.model.PlanStartDateStartValue.setDate(this.model.PlanStartDateStartValue.getDate()-3);var r=angular.copy(this.model.PlanStartDateStartValue);r.setDate(this.model.PlanStartDateStartValue.getDate()-this.model.PlanStartDateStartValue.getDay()+(0==this.model.PlanStartDateStartValue.getDay()?-6:1)+6),r.setHours(23,59,59),this.model.PlanStartDateEndValue=r,a||this.getObject()}}}},995:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"dragscroll",rawName:"v-dragscroll"}],staticClass:"el-table__body-wrapper grab-bing"},[a("table",[a("thead",[a("tr",[a("th",{staticClass:"default-column",attrs:{rowspan:"2"}},[e._v("Stt")]),e._v(" "),a("th",{staticClass:"mt",attrs:{rowspan:"2"}},[e._v("Mục tiêu / Công việc")]),e._v(" "),a("th",{staticClass:"default-column",attrs:{rowspan:"2"}},[e._v("KPIs kế hoạch")]),e._v(" "),a("th",{staticClass:"default-column",attrs:{rowspan:"2"}},[e._v("KPIs đạt được")]),e._v(" "),a("th",{staticClass:"default-column",attrs:{rowspan:"2"}},[e._v("Hoàn thành")]),e._v(" "),a("th",{staticClass:"c",attrs:{rowspan:"2"}}),e._v(" "),e.datasrc.ListCols["Kế hoạch"]?a("th",{attrs:{colspan:e.datasrc.ListCols["Kế hoạch"].length}},[e._v("Kế hoạch")]):e._e(),e._v(" "),a("th",{staticClass:"c",attrs:{rowspan:"2"}}),e._v(" "),e.datasrc.ListCols["Thực hiện"]?a("th",{attrs:{colspan:e.datasrc.ListCols["Thực hiện"].length}},[e._v("Thực hiện")]):e._e()]),e._v(" "),a("tr",[e._l(e.datasrc.ListCols["Kế hoạch"],function(t){return e.datasrc.ListCols["Kế hoạch"]?a("th",{staticClass:"default-column",class:"cl-"+t.Name},[e._v(e._s(t.Caption))]):e._e()}),e._v(" "),e._l(e.datasrc.ListCols["Thực hiện"],function(t){return e.datasrc.ListCols["Thực hiện"]?a("th",{staticClass:"default-column",class:"cl-"+t.Name},[e._v(e._s(t.Caption))]):e._e()})],2)]),e._v(" "),a("tbody",e._l(e.datasrc.cells,function(t,s){return e.datasrc.cells&&t.Display?a("tr",{class:void 0!=t.CellType?t.CellType:" Level"+t.Index},[a("td",{staticClass:"default-column text-left pl-4"},[a("span",{class:t.Index.length>1?"":"caption"},[t.Level&&e.datasrc.cells[s+1]&&!e.datasrc.cells[s+1].Level?a("span",{staticStyle:{cursor:"pointer"},on:{click:function(a){e.onShowMenu(s,t.ShowMenu)}}},[t.ShowMenu?a("i",{staticClass:"el-icon-caret-bottom  mt-4 pr-1"}):e._e(),e._v(" "),t.ShowMenu?e._e():a("i",{staticClass:"el-icon-caret-right  mt-4 pr-1"})]):e._e(),e._v(" "),a("span",{style:"text-decoration:"+(e.taskDone.indexOf(t.Status)>-1?"line-through":"")},[e._v(e._s(t.Index))])])]),e._v(" "),a("td",[a("span",{staticClass:"icon Level"}),e._v(" "),"h"==t.CellType?a("span",[e._v(e._s(t.Name))]):e._e(),e._v(" "),"h"!=t.CellType?a("router-link",{attrs:{to:"/dynamic/view/Index="+t.Index}},[a("span",{style:"text-decoration:"+(e.taskDone.indexOf(t.Status)>-1?"line-through":"")},[e._v(e._s(t.Name))])]):e._e()],1),e._v(" "),a("td",{staticClass:"default-column"},[e._v(e._s(t.TargetPlan)+e._s(t.Unit))]),e._v(" "),a("td",{staticClass:"default-column"},[e._v(e._s(t.TargetDone)+e._s(t.Unit))]),e._v(" "),a("td",{staticClass:"default-column"},["h"==t.CellType?a("el-progress",{attrs:{"text-inside":!0,"stroke-width":18,percentage:t.TargetProgress?parseInt(t.TargetProgress):0,status:t.TargetProgress?parseInt(t.TargetProgress)>=100?"success":0==parseInt(t.TargetProgress)?"exception":"":"exception"}}):e._e()],1),e._v(" "),a("td",{staticClass:"c default-column",staticStyle:{"border-right":"1px solid #ddd !important"}}),e._v(" "),e._l(e.datasrc.ListCols["Kế hoạch"],function(s){return e.datasrc.ListCols["Kế hoạch"]?a("td",{class:"default-column tg-"+s.Name},[s.Redirect?a("router-link",{attrs:{to:"/dynamic/view/Index="+t.Index}},[e._v(e._s(t[s.DynamicText?s.DynamicText:s.Expression?s.Expression:s.Name]))]):e._e(),e._v(" "),s.Format&&"DateTime"==s.FieldColumnType?a("span",[e._v(e._s(t[s.DynamicText?s.DynamicText:s.Expression?s.Expression:s.Name]?e.$Utils.formatDateTime(t[s.DynamicText?s.DynamicText:s.Expression?s.Expression:s.Name],"h"==t.CellType?"DD/MM/YYYY":"DD/MM/YYYY HH:mm"):""))]):e._e(),e._v(" "),"DateTime"==s.FieldColumnType||s.Redirect?e._e():a("span",[e._v(e._s(t[s.DynamicText?s.DynamicText:s.Expression?s.Expression:s.Name]))])],1):e._e()}),e._v(" "),a("td",{staticClass:"c default-column",staticStyle:{"border-right":"1px solid #ddd !important"}}),e._v(" "),e._l(e.datasrc.ListCols["Thực hiện"],function(s){return e.datasrc.ListCols["Thực hiện"]?a("td",{class:"default-column tg-"+s.Name},[s.Redirect?a("router-link",{attrs:{to:"/dynamic/view/Index="+t.Index}},[e._v(e._s(t[s.DynamicText?s.DynamicText:s.Expression?s.Expression:s.Name]))]):e._e(),e._v(" "),"SpentTime"==s.Expression?a("a",[e._v(e._s(e.convertSpendTime(t.SpentTime))+"\n                             "),"h"!=t.CellType?a("i",{staticClass:"fa  fa-clock-o fa-lg mt-4",style:{color:t.SpentTime<0?"red":"blue"}}):e._e()]):e._e(),e._v(" "),"Progress"==s.Name&&"h"!=t.CellType?a("el-progress",{attrs:{"text-inside":!0,"stroke-width":18,percentage:t.Progress?parseInt(t.Progress):0,status:void 0!=t.Progress?parseInt(t.Progress)>=100?"success":0==parseInt(t.Progress)?"exception":"":"exception"}}):e._e(),e._v(" "),"Progress"==s.Name&&"h"==t.CellType?a("span",[e._v(e._s(t.Progress)+"%")]):e._e(),e._v(" "),s.Format&&"DateTime"==s.FieldColumnType?a("span",[e._v(e._s(e.$Utils.formatDateTime(t[s.DynamicText?s.DynamicText:s.Expression?s.Expression:s.Name],"DD/MM/YYYY HH:mm")))]):e._e(),e._v(" "),"DateTime"==s.FieldColumnType||s.Redirect||"SpentTime"==s.Expression||"Progress"==s.Name?e._e():a("div",{style:"h"!=t.CellType&&void 0!=t.Status&&"StatusName"===s.Name?"background-color: "+e.statusColors[t.Status.toUpperCase()]:""},[e._v(e._s(t[s.DynamicText?s.DynamicText:s.Expression?s.Expression:s.Name]))])],1):e._e()})],2):e._e()}))])])},r=[],l={render:s,staticRenderFns:r};t.a=l}});
//# sourceMappingURL=19.8bc6e1ff554b6e01b80a.js.map
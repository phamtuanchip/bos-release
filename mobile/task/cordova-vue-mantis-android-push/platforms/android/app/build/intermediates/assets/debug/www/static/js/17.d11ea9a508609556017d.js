webpackJsonp([17],{1226:function(t,e,a){"use strict";var r=a(104),n=a.n(r),i=a(68),s=a.n(i),o=a(54),l=a(1227);e.a={name:"Targets",components:{CreateEditTargetDialog:l.a},props:{},data:function(){return{targets:[],showTargetDialog:!1,targetDialogType:null,targetEditing:null,keywordSearchTarget:null,isSearch:!1,searchResult:[]}},methods:{requestGetTargets:function(){var t=this;o.a.getTarget().then(function(e){t.targets=e})},handleCreateTarget:function(){this.targetDialogType="create",this.showTargetDialog=!0},handleEditTarget:function(t){this.targetEditing=this.targets.filter(function(e){return e.Id===t})[0],this.targetEditing&&(this.targetDialogType="edit",this.showTargetDialog=!0)},updateTarget:function(t){this.$set(this.targets,this.targets.findIndex(function(e){return e.id===t.id}),t),this.showTargetDialog=!1,this.targetEditing=null,this.$message({type:"success",message:"Đã cập nhật"})},createTarget:function(t){this.targets=[t].concat(s()(this.targets)),this.showTargetDialog=!1,this.$message({type:"success",message:"Đã thêm"})},deleteTarget:function(t){var e=this;t&&this.$confirm("Xóa Mục tiêu này?",{confirmButtonText:"OK",cancelButtonText:"Hủy xóa",type:"warning"}).then(function(){o.a.deleteTarget(t).then(function(a){e.targets=e.targets.filter(function(e){return e.Id!==t}),e.$message({type:"success",message:"Đã xóa"})}).catch(function(t){e.$message({type:"error",message:"Lỗi khi xóa"})})})}},created:function(){this.targets=this.requestGetTargets()},watch:{keywordSearchTarget:function(t){var e=this;this.isSearch=t||t.trim(),t=this.$Utils.removeVNCharacters(t),this.isSearch?this.searchResult=this.targets.filter(function(a){return e.$Utils.removeVNCharacters(n()(a).join("|")).indexOf(t)>-1}):this.searchResult=this.targets},showTargetDialog:function(t){!1===t&&(this.targetDialogType=null,this.targetEditing=null)}}}},1227:function(t,e,a){"use strict";function r(t){a(1228)}var n=a(1230),i=a(1231),s=a(0),o=r,l=s(n.a,i.a,!1,o,"data-v-bd1a1396",null);e.a=l.exports},1228:function(t,e,a){var r=a(1229);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(932)("7ad73739",r,!0)},1229:function(t,e,a){e=t.exports=a(931)(!0),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"CreateEditTargetDialog.vue",sourceRoot:""}])},1230:function(t,e,a){"use strict";var r=a(4),n=a.n(r),i=a(105),s=a.n(i),o=a(54);e.a={name:"CreateEditTargetDialog",components:{},props:{onCreate:Function,onCancelCreate:Function,onEdit:Function,onCancelEdit:Function,type:{type:String,default:function(){return"create"},validator:function(t){return-1!==["edit","create"].indexOf(t)}},target:{type:Object}},data:function(){return{params:[],targetForm:"edit"===this.type&&this.target?s()({},this.target):{},targetFormTemp:{},rules:{Type:[{required:!0,message:"Phòng ban bắt buộc có",trigger:"blur"}],Description:[{required:!0,message:"Chỉ số bắt buộc có",trigger:"blur"}]},loadingUpdateTarget:!1}},methods:{requestParamsSetting:function(){var t=this;o.a.requestSetting("xSetting.Project.Parameter.Department").then(function(e){t.params=s()({},t.params,{Department:e})})},validateTargetForm:function(t){this.$refs.targetForm.validate(function(e){if(!e)return!1;t&&t()})},handleCreateTarget:function(){var t=this;this.validateTargetForm(function(){t.loadingUpdateTarget=!0,o.a.createTarget(t.targetForm).then(function(e){t.targetForm.Id=e,t.onCreate(JSON.parse(n()(t.targetForm))),t.targetForm={}}).finally(function(){t.loadingUpdateTarget=!1})})},handleCancelCreate:function(){this.onCancelCreate()},handleEditTarget:function(){var t=this;this.validateTargetForm(function(){t.loadingUpdateTarget=!0,o.a.updateTarget(t.targetForm).then(function(e){t.onEdit(JSON.parse(n()(t.targetForm))),t.targetForm={}}).finally(function(){t.loadingUpdateTarget=!0})})},handleCancelEdit:function(){this.onCancelEdit()}},created:function(){this.requestParamsSetting()},computed:{},watch:{"targetForm.Type":function(t){var e=this.params.Department.filter(function(e){return e.Id===t})[0];this.targetForm.TypeName=e&&e.Name}}}},1231:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"CreateEditTargetDialog__ROOT"},[a("el-form",{ref:"targetForm",attrs:{model:t.targetForm,"label-width":"120px",rules:t.rules,"label-position":t.$isMobileDevice?"top":"right"}},[a("el-form-item",{attrs:{label:"Bộ phận",prop:"Type"}},[a("el-select",{attrs:{placeholder:"Bộ phận"},model:{value:t.targetForm.Type,callback:function(e){t.$set(t.targetForm,"Type",e)},expression:"targetForm.Type"}},t._l(t.params.Department,function(t){return a("el-option",{key:t.Id,attrs:{label:t.Name,value:t.Id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"Tên chỉ số",prop:"Description"}},[a("el-input",{attrs:{placeholder:"Tên chỉ số"},model:{value:t.targetForm.Description,callback:function(e){t.$set(t.targetForm,"Description",e)},expression:"targetForm.Description"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Đơn vị tính",prop:"ManagerName"}},[a("el-input",{attrs:{placeholder:"Đơn vị tính"},model:{value:t.targetForm.ManagerName,callback:function(e){t.$set(t.targetForm,"ManagerName",e)},expression:"targetForm.ManagerName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Công thức tính toán",prop:"Categories"}},[a("el-input",{attrs:{placeholder:"Công thức tính toán"},model:{value:t.targetForm.Categories,callback:function(e){t.$set(t.targetForm,"Categories",e)},expression:"targetForm.Categories"}})],1),t._v(" "),a("el-form-item",["create"===t.type?a("div",{staticClass:"group-button"},[a("el-button",{attrs:{type:"primary",loading:t.loadingUpdateTarget},on:{click:t.handleCreateTarget}},[t._v("\n          Tạo mới\n        ")]),t._v(" "),a("el-button",{on:{click:t.handleCancelCreate}},[t._v("Hủy")])],1):t._e(),t._v(" "),"edit"===t.type?a("div",{staticClass:"group-button tac"},["edit"===t.type?a("el-button",{attrs:{type:"primary",loading:t.loadingUpdateTarget},on:{click:t.handleEditTarget}},[t._v("\n          Cập nhật\n        ")]):t._e(),t._v(" "),a("el-button",{on:{click:t.handleCancelEdit}},[t._v("Hủy")])],1):t._e()])],1)],1)},n=[],i={render:r,staticRenderFns:n};e.a=i},1232:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Targets__ROOT"},[a("div",{staticClass:"panel__wrapper flex",staticStyle:{"justify-content":"space-between"}},[a("div",{staticClass:"group-button"},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleCreateTarget}},[a("i",{staticClass:"el-icon-plus"})])],1),t._v(" "),a("div",{staticClass:"search mgt5 mgb5"},[a("el-input",{attrs:{"prefix-icon":"el-icon-search",placeholder:"Tìm kiếm"},model:{value:t.keywordSearchTarget,callback:function(e){t.keywordSearchTarget=e},expression:"keywordSearchTarget"}})],1)]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.isSearch?t.searchResult:t.targets,stripe:""}},[a("el-table-column",{attrs:{type:"index",width:"40",align:"center","header-align":"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"TypeName",label:"Bộ phận"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Description",label:"Chỉ số"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ManagerName",label:"Đơn vị"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Categories",label:"Công thức"}}),t._v(" "),a("el-table-column",{attrs:{label:"Hành động"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{on:{click:function(a){t.handleEditTarget(e.row.Id)}}},[t._v("Sửa")]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(a){t.deleteTarget(e.row.Id)}}},[t._v("Xóa")])]}}])})],1),t._v(" "),a("div",{staticClass:"dialog__wrapper"},[a("el-dialog",{attrs:{title:"edit"===t.targetDialogType?"Chỉnh sửa mục tiêu":"Tạo mới mục tiêu",visible:t.showTargetDialog,width:t.$isMobileDevice?"100%":"70%"},on:{"update:visible":function(e){t.showTargetDialog=e}}},[a("CreateEditTargetDialog",{key:t.targetEditing&&t.targetEditing.id,attrs:{type:t.targetDialogType,target:t.targetEditing,onCreate:t.createTarget,onEdit:t.updateTarget,onCancelCreate:function(){t.showTargetDialog=!1},onCancelEdit:function(){t.showTargetDialog=!1}}})],1)],1)],1)},n=[],i={render:r,staticRenderFns:n};e.a=i},964:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(1226),n=a(1232),i=a(0),s=i(r.a,n.a,!1,null,null,null);e.default=s.exports}});
//# sourceMappingURL=17.d11ea9a508609556017d.js.map
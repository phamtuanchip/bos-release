webpackJsonp([1,11,18,19],{1e3:function(module,__webpack_exports__,__webpack_require__){"use strict";(function($){var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__=__webpack_require__(4),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__),__WEBPACK_IMPORTED_MODULE_1__components_dynamic_HistoryGrid__=__webpack_require__(1001),__WEBPACK_IMPORTED_MODULE_2_vue__=__webpack_require__(3);__WEBPACK_IMPORTED_MODULE_2_vue__.default.use(__webpack_require__(40)),__webpack_exports__.a={components:{HistoryGrid:__WEBPACK_IMPORTED_MODULE_1__components_dynamic_HistoryGrid__.a},props:["data"],data:function(){var e=this,t=JSON.parse(this.$getItemLocalStorage(this.$localStorageConstant.LoggedOnUser)),a=!this.$isMantisAdmin()&&!this.$isMantisAdmin()&&t.GroupRoles&&t.GroupRoles.Leader&&t.GroupRoles.Leader.indexOf(t.Project.GroupId)>-1,r={};return void 0!=this.data.item.Name?(r=this.$Lodash.cloneDeep(this.data.item),void 0==this.data.item.Assigned||this.$Utils.equals(this.data.item.Assigned,"")?r.Assigned=[]:r.Assigned=this.data.item.Assigned.split(";").filter(function(t){return!e.$Utils.equals(t,"")}),r.autoCal=!1,r.oldName=this.data.item.Name+"",r.IsPublic="0"!==r.IsPublic):(r.Name="",r.Value="",r.TargetType="",r.IsPublic=!0,r.ActualStartDate="",r.ActualFinishDate="",r.Assigned=[],r.ParentId="",r.Owner="",r.Plan="",r.Done="",r.Unit="",r.Progress=0,r.autoCal=!0,r.oldName="",r.Milestone="",r.MilestoneVal={}),{isShowAllTarget:!1,oldObject:this.$Lodash.cloneDeep(r),typeLst:[{Id:"1",Name:"Mục tiêu công ty"},{Id:"2",Name:"Mục tiêu phòng ban"},{Id:"3",Name:"Mục tiêu cá nhân"}],ruleForm:r,isLeader:a,dataCopied:this.$Lodash.cloneDeep(this.data),viewHistoryModel:[],rules:{Name:[{required:!0,message:"Tên bắt buộc phải điền",trigger:"blur"}],Value:[{required:!0,message:"Phòng ban bắt buộc phải chọn",trigger:"change"}],ParentId:[{required:!0,message:"Mục tiêu cha bắt buộc phải chọn",trigger:"change"}]}}},watch:{},methods:{changeMilestoneVal:function(e,t){this.ruleForm.ActualStartDate=e,"week"===t?this.ruleForm.ActualFinishDate=__WEBPACK_IMPORTED_MODULE_2_vue__.default.moment(e).isoWeekday(this.dataCopied.firstDayOfWeekCfg).endOf("isoweek")._d:"month"===t?this.ruleForm.ActualFinishDate=__WEBPACK_IMPORTED_MODULE_2_vue__.default.moment(e).endOf("month")._d:"year"===t&&(this.ruleForm.ActualFinishDate=__WEBPACK_IMPORTED_MODULE_2_vue__.default.moment(e).endOf("year")._d),this.$forceUpdate()},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.checkExits()})},autoCal:function(){if(1==this.ruleForm.autoCal){var e=Math.round(Number(this.ruleForm.Done)/Number(this.ruleForm.Plan)*100);this.ruleForm.Progress=isNaN(e)?this.ruleForm.Progress:e}},resetForm:function(e){this.$refs[e].resetFields()},close:function(){this.$hub.$emit("close-modal")},deleteTarget:function deleteTarget(){var _this2=this,ctrl=this;this.$confirm("Mục tiêu sẽ bị xóa hoàn toàn. Tiếp tục?","Cảnh báo",{confirmButtonText:"Xóa",cancelButtonText:"Bỏ qua",type:"warning"}).then(function(){ctrl.recursiveDeleteTarget({Id:ctrl.data.item.Id,Level:ctrl.data.item.Level}),ctrl.close();var tRequest=_this2.$Utils.clone(_this2.$singleRequest);tRequest.R1_RequestTemplate="AG_Task_Task.Search",tRequest.R1_RequestDataGroup="DataGroup.danh-sach-cong-viec.04b66",tRequest.R1_RequestFields="Id;Targets;TargetsName;";for(var i=1;i<=eval(ctrl.data.item.Level-5);i++)tRequest.R1_RequestFields+="TargetsLevel"+i+";";tRequest["R1_TargetsLevel"+[ctrl.model.Level-5]]=ctrl.model.Id,ctrl.$Utils.post(tRequest).then(function(response){response=ctrl.$Utils.getDataWithRoot(response.R1,"Data.TasksDS.Task");var updateRequest=ctrl.$Lodash.cloneDeep(ctrl.$singleRequest);$.each(response,function(index,value){var fVal={};fVal.Id=ctrl.$Lodash.cloneDeep(value.Id),fVal.Targets="",fVal.TargetsName="",fVal.RequestTemplate="AG_Task_Task.Update",fVal.RequestDataGroup="DataGroup.danh-sach-cong-viec.04b66",fVal.RequestFields="Id;Targets;TargetsName;",$.each(value.Targets.split(";"),function(key,val){key<eval(ctrl.data.item.Level-6)&&(fVal.Targets+=val+";",fVal["TargetsLevel"+[key+1]]=val,fVal.RequestFields+="TargetsLevel"+[key+1]+";")}),$.each(value.TargetsName.split(";"),function(key,val){key<eval(ctrl.data.item.Level-6)&&(fVal.TargetsName+=val+";")}),updateRequest.TotalRequests=index+1,updateRequest=ctrl.$Utils.updateParamsSingleRequest(updateRequest,fVal,index+1)}),ctrl.$Utils.post(updateRequest)})}).catch(function(){})},recursiveDeleteTarget:function(e){var t=this;if(t.$Utils.isEmpty(e)){var a=t.$Lodash.cloneDeep(t.$singleRequest);a.R1_RequestTemplate="Setting.Delete",a.R1_Id=e.Id,t.$Utils.post(a).then(function(a){$.each(t.data.targetLst,function(a,r){e.Id==r.ParentId&&t.recursiveDeleteTarget(r)}),t.data.getTargets(),t.data.getObject()})}},loadHistory:function(e){var t=this,a={RequestAction:"Request",RequestClass:"xBase",TotalRequests:"1",R1_RequestTemplate:"ChangedLogs",R1_Code:"ChangedHistory",R1_SourceId:e},r=[];r=t.data.targetFields.filter(function(e){return"true"==e.History}),t.$Utils.post(a).then(function(e){if(e.success&&e.R1.success){var a=t.$Utils.getDataWithRoot(e,"R1.Data.DataDS.Logs");$.each(a,function(e,a){try{t.viewHistoryModel.push({type:"head",value:a});var s=JSON.parse(a.Changes);$.each(s,function(e,s){if(r.length>0&&"Assigned"!==s.ColumnName&&"Id"!==s.ColumnName){if("ActualStartDate"===s.ColumnName||"ActualFinishDate"===s.ColumnName||"Created"===s.ColumnName){var i=t.$Utils.stringToDate(s.OldDisplayValue);s.OldDisplayValue="1"===a.Version?"":t.$Utils.formatDateTime(i,"DD/MM/YYYY"),i=t.$Utils.stringToDate(s.NewDisplayValue),s.NewDisplayValue=t.$Utils.formatDateTime(i,"DD/MM/YYYY")}0==("AssignedName"===s.ColumnName&&!s.OldDisplayValue&&""===s.NewDisplayValue)&&r.forEach(function(e){var r={type:"body",value:s},i=void 0!=e.DynamicText&&""!=e.DynamicText?e.DynamicText:e.Name;s.ColumnName==i&&("TargetType"===s.ColumnName?t.typeLst.filter(function(e){e.Id===s.OldDisplayValue&&(s.OldDisplayValue="1"===a.Version?"":e.Name),e.Id===s.NewDisplayValue&&(s.NewDisplayValue=e.Name)}):"IsPublic"===s.ColumnName&&(s.OldDisplayValue="1"===a.Version?"":"0"===s.OldDisplayValue||0==s.OldDisplayValue?"Riêng tư":"Công khai",s.NewDisplayValue="0"===s.NewDisplayValue||0==s.OldDisplayValue?"Riêng tư":"Công khai"),t.viewHistoryModel.push(r))})}})}catch(e){console.log(e)}})}})},checkExits:function(){var e=this,t=e.$Lodash.cloneDeep(this.$singleRequest);t.R1_RequestTemplate="xDynamicData_Setting.Search",t.R1_RequestFields="Name;ParentId;",t.R1_Name=e.ruleForm.Name,t.R1_RequestDataGroup="DataGroup.muc-tieu.091fb",t.R1_ParentId=e.ruleForm.Parent?e.ruleForm.Parent.Id:e.ruleForm.ParentId,e.$Utils.post(t).then(function(t){var a=e.$Utils.getDataWithRoot(t.R1,"Data.DynamicDS.Setting");a=a.filter(function(t){return t.Name!=e.ruleForm.oldName}),0!=a.length?e.$message.error("Tên mục tiêu đã có"):e.saveOrUpdate()})},saveOrUpdate:function(){var e=this,t=e.$Lodash.cloneDeep(this.$singleRequest);e.ruleForm.Id?(t.R1_RequestTemplate="xDynamicData_Setting.Update",t.R1_Id=e.ruleForm.Id):(t.R1_RequestTemplate="xDynamicData_Setting.Insert",t.R1_ReferenceId=e.ruleForm.ParentId?e.ruleForm.ParentId:e.data.rootId,t.R1_NestedSetType="InsertLastChildNode"),t.R1_RequestFields="Plan;Done;Progress;Unit;Assigned;AssignedName;Owner;OwnerName;TargetType;Id;Index;Code;Name;Value;Description;LeftIndex;ParentId;Level;Value;RightIndex;Created;CreatedBy;Modified;IsPublic;ActualStartDate;ActualFinishDate;ValueName;Milestone",t.R1_RequestDataGroup="DataGroup.muc-tieu.091fb",t.R1_Name=e.ruleForm.Name,t.R1_Plan=e.ruleForm.Plan,t.R1_Done=e.ruleForm.Done,t.R1_Owner=e.ruleForm.Owner,t.R1_TargetType=e.ruleForm.TargetType,t.R1_Milestone=e.ruleForm.Milestone,isNaN(parseFloat(e.ruleForm.Progress+""))?delete e.ruleForm.Progress:t.R1_Progress=e.ruleForm.Progress,t.R1_Unit=e.ruleForm.Unit,t.R1_IsPublic=1==e.ruleForm.IsPublic?1:0,t.R1_Value=e.ruleForm.Value,$.each(e.departmentLst,function(a,r){var s=r.GroupId!==e.ruleForm.Value;return s||(t.R1_ValueName=r.GroupName),s}),t.R1_Assigned="",t.R1_AssignedName="",$.each(e.ruleForm.Assigned,function(a,r){t.R1_Assigned+=r+";",e.data.workers.filter(function(e){e.UserId&&e.UserId===r&&(t.R1_AssignedName+=e.Username+",")})}),e.data.workers.filter(function(a){a.UserId&&a.UserId===e.ruleForm.Owner&&(t.R1_OwnerName=a.Username)}),e.$Utils.isEmpty(e.ruleForm.ActualStartDate)&&(t.R1_ActualStartDate=e.$Utils.formatDateTime(e.ruleForm.ActualStartDate)),e.$Utils.isEmpty(e.ruleForm.ActualFinishDate)&&(t.R1_ActualFinishDate=e.$Utils.formatDateTime(e.ruleForm.ActualFinishDate)),e.$Utils.post(t).then(function(a){e.objectReturn=e.$Lodash.cloneDeep(e.ruleForm),e.objectReturn.Id=a.R1.Data,e.$Utils.isEmpty(e.objectReturn,"autoCals")&&delete e.objectReturn.autoCals,e.$Utils.isEmpty(e.objectReturn,"oldName")&&delete e.objectReturn.oldName,e.data.item=e.$Lodash.cloneDeep(e.objectReturn),e.objectReturn.AssignedName=t.R1_AssignedName,e.objectReturn.OwnerName=t.R1_OwnerName,e.objectReturn.Assigned=t.R1_Assigned,e.objectReturn.Value=t.R1_Value;var r=e.compareChange(e.objectReturn,e.oldObject);e.$Utils.isEmpty(r)&&r.length>0&&(t.R1_RequestTemplate,e.createHistoryLogs(r));var s=e.$Lodash.cloneDeep(e.ruleForm);s.Id=a.R1.Data,e.saveOrUpdatePermissions(""!==e.ruleForm.oldName,s),e.close()})},compareChange:function(e,t){var a=this,r=[];return a.objTemp=a.$Lodash.cloneDeep(a.oldObject),$.each(e,function(s,i){if(a.$Utils.isEmpty(i)){var n=i,l="",o={};$.each(a.data.targetFields,function(e,t){t.Name===s&&"true"==t.History&&(l=t.Caption,o=t)});var d={};$.each(t,function(e,t){s==e&&0==a.$Utils.equals(t,n)&&(d[e]=t)});var c={ColumnCaption:l,ColumnName:s,OldDisplayValue:d[s],OldValue:d[s],NewDisplayValue:e[s]?e[s]:n,NewValue:n};if(a.$Utils.isEmpty(o))switch(o.FieldColumnType){case"DateTime":a.$Utils.stringToDate(i).getTime()==a.$Utils.stringToDate(c.OldValue).getTime()&&(c=void 0);break;case"Double":case"Integer":!a.$Utils.isEmpty(a.objTemp[s])&&a.$Utils.isEmpty(e[s])&&(c.OldDisplayValue=0,c.OldValue=0)}c&&a.$Utils.isEmpty(l)&&""!=l&&r.push(c)}}),r},createHistoryLogs:function(e){var t=this,a=t.$Utils.updateParamsSingleRequest(t.$Lodash.cloneDeep(t.$singleRequest),{RequestTemplate:"ChangedLogs.Count",SourceId:t.objectReturn.Id,Code:"ChangedHistory"});t.$Utils.post(a).then(function(r){if(t.$Utils.isEmpty(r,"R1.Data")){var s=t.$Utils.updateParamsSingleRequest(a,{RequestTemplate:"ChangedLogs.Insert",Version:parseInt(r.R1.Data)+1,Changes:__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(e),CreatedByName:t.$Utils.getUserInfo("Username")});t.$Utils.post(s).then(function(e){})}})},saveOrUpdatePermissions:function(e,t){var a=this;a.$Lodash.cloneDeep(a.$singleRequest);if(1==e){var r={RequestAction:"SearchLinked",RequestClass:"Addition",ConditionFields:"Parent;",StaticFields:"Code;Child;Parent;Name;Created;Description",OrderFields:"Created DESC",Parent:t.Id};a.$Utils.post(r).then(function(e){if(e.TotalCount>0){var r=1==e.TotalCount?[e.Data.DataDS.Linked]:e.Data.DataDS.Linked,s={RequestClass:"xBase",RequestAction:"Request",TotalRequests:r.length,RequestTemplate:"Permission.Remove"};$.each(r,function(e,t){s["R"+(t+1)+"_Id"]=e.Id}),a.savePermission(t,s)}})}else a.savePermission(t)},savePermission:function(e,t){var a=this;if(1==e.IsPublic)a.$Utils.linkToRoleEveryone([{Id:e.Id,Caption:e.Name}]),a.data.getTargets(),a.data.getObject();else{var r=[],s=[],i=[];if(i.push(e.Value),i&&i.length>0){var n={};i.filter(function(e,t){n["R"+a.ix+"_RequestTemplate"]="OrgnizationList",n["R"+a.ix+"_GroupName"]="Leader",n["R"+a.ix+"_GroupParent"]=e.GroupId,n["R"+a.ix+"_RequestDataType"]="json",n["R"+a.ix+"_GroupType"]="2",a.ix++}),n.TotalRequests=a.ix-1,n.RequestClass="xBase",n.RequestAction="Request",a.$Utils.post(n).then(function(n){for(var l=1;l<a.ix;l++){var o=a.$Utils.getDataWithRoot(n,"R"+l+".Data.UserDS.Group");void 0!=o[0]&&"Leader"===o[0].GroupName&&(s=s.concat(o))}var d="";if(s.filter(function(t,a){if(t.GroupParent==i[0].GroupId)if(d+=t.GroupId+";","2"==e.TargetType||"1"==e.TargetType){var s={Parrent:e.Id,Code:"Edit",Name:e.Name+" - Edit",Child:t.GroupId,ChildTable:"tblGroup"};r.push(s)}else if("3"==e.TargetType){var n={Parrent:e.Id,Code:"Manage",Name:e.Name+" - Manage",Child:t.GroupId,ChildTable:"tblGroup"};r.push(n)}}),e.Owner&&-1==d.indexOf(e.Owner)){var c={Parrent:e.Id,Code:"Edit",Name:e.Name+" - Edit",Child:e.Owner,ChildTable:"tblUser"};r.push(c)}e.Assigned&&e.Assigned.filter(function(t,a){if(""!==t&&-1==d.indexOf(t)){var s={Parrent:e.Id,Code:"Edit",Name:e.Name+" - Edit",Child:t,ChildTable:"tblUser"};r.push(s)}});var u={Parrent:e.Id,Code:"Manage",Name:e.Name+" - Manage",Child:a.$administrator,ChildTable:"tblGroup"};r.push(u);var m={Parrent:e.Id,Code:"Manage",Name:e.Name+" - Manage",Child:a.$supervisor,ChildTable:"tblGroup"};r.push(m);var p={},g=1;r.filter(function(e,t){p["R"+g+"_RequestClass"]="xBase",p["R"+g+"_RequestAction"]="LinkUserToObject",p["R"+g+"_ParentTable"]="xObject",p["R"+g+"_RequestTemplate"]="Permission.Insert",p["R"+g+"_Parent"]=e.Parrent,p["R"+g+"_Child"]=e.Child,p["R"+g+"_Code"]=e.Code,p["R"+g+"_Name"]=e.Name,p["R"+g+"_ChildTable"]=e.ChildTable,g++}),p.TotalRequests=r.length,p.RequestClass="xBase",p.RequestAction="Request",void 0==t?a.$Utils.post(p).then(function(e){a.data.getObject(),a.data.getTargets()}):a.$Utils.post(t).then(function(e){a.$Utils.post(p).then(function(e){a.data.getTargets(),a.data.getObject()})})})}}},changeEditState:function(){this.data.disabled=!this.data.disabled},changeType:function changeType(type){this.dataCopied.targetLst=this.data.targetLst.filter(function(ele){return void 0!=ele&&eval(type)-1+""===ele.TargetType}),this.$set(this.dataCopied,"targetFullLst",this.data.targetSavedLst.filter(function(ele){return void 0!=ele&&eval(type)-1+""===ele.TargetType}))},setParent:function(e){var t=this;3==t.ruleForm.TargetType&&$.each(t.departmentLst,function(a,r){t.$Utils.isEmpty(e)&&r.GroupId==e&&(t.ruleForm.Value=r)})}},created:function(){var e=this;e.ruleForm.Id?(e.loadHistory(e.ruleForm.Id),e.changeType(e.ruleForm.TargetType),void 0==e.ruleForm.IsPublic&&(e.ruleForm.IsPublic=!0),$.each(e.data.targetLst,function(t,a){if(e.ruleForm.Id===a.Id)return e.ruleForm.Permission=a.Permission,!1}),e.ruleForm.MilestoneVal=new Date(e.ruleForm.ActualStartDate)):(e.ruleForm.Permission="Edit",e.isLeader?(e.ruleForm.TargetType=e.typeLst[2].Id,e.changeType(e.typeLst[2].Id)):(e.ruleForm.TargetType=e.typeLst[0].Id,e.changeType(e.typeLst[0].Id)),e.ruleForm.IsPublic=!0),"superadmin"!==JSON.parse(e.$getItemLocalStorage(e.$localStorageConstant.LoggedOnUser)).LoginName&&(e.data.workers=e.data.workers.filter(function(e){return e.LoginName&&-1===e.LoginName.indexOf("superadmin")}))}}}).call(__webpack_exports__,__webpack_require__(2))},1001:function(e,t,a){"use strict";function r(e){a(1002)}var s=a(1004),i=a(1005),n=a(0),l=r,o=n(s.a,i.a,!1,l,null,null);t.a=o.exports},1002:function(e,t,a){var r=a(1003);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(932)("71e2cbac",r,!0)},1003:function(e,t,a){t=e.exports=a(931)(!0),t.push([e.i,"#history-grid th{text-align:center!important}#history-grid td,#history-grid th,#history-grid tr{border:thin solid #d3d3d3}","",{version:3,sources:["/Users/yuukininomae/Sites/vue-crm2/src/components/dynamic/HistoryGrid.vue"],names:[],mappings:"AACA,iBACE,2BAA8B,CAE/B,AACD,mDAFE,yBAA6B,CAI9B",file:"HistoryGrid.vue",sourcesContent:["\n#history-grid th {\n  text-align: center !important;\n  border: solid thin lightgray;\n}\n#history-grid tr, #history-grid td {\n  border: solid thin lightgray;\n}\n"],sourceRoot:""}])},1004:function(e,t,a){"use strict";t.a={props:["dtSource","dtHeader"],methods:{},data:function(){return{}}}},1005:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"box-card",attrs:{id:"history-grid"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("Lịch sử")])]),e._v(" "),a("div",{staticClass:"el-table__body-wrapper is-scroll-left"},[a("table",{staticStyle:{width:"100%"}},[a("thead",{staticClass:"positive-bg light text-bold"},[a("tr",e._l(e.dtHeader,function(t){return a("th",[e._v(e._s(t))])}))]),e._v(" "),a("tbody",e._l(e.dtSource,function(t){return a("tr",{style:{"background-color":"body"==t.type?"#e4e5e6":"#fff"}},["head"==t.type?a("td",{staticClass:"success",attrs:{colspan:"3"}},[e._v("\n          v."+e._s(t.value.Version+".0 ")),a("strong",[e._v(e._s(t.value.CreatedByName))]),e._v(", "+e._s(e.$Utils.formatDateTime(t.value.Created,"DD-MM-YYYY HH:mm"))+"\n        ")]):e._e(),e._v(" "),"body"==t.type?a("td",[e._v(e._s(t.value.ColumnCaption))]):e._e(),e._v(" "),"body"==t.type?a("td",[e._v(e._s(t.value.OldDisplayValue))]):e._e(),e._v(" "),"body"==t.type?a("td",[e._v(e._s(t.value.NewDisplayValue))]):e._e()])}))])])])},s=[],i={render:r,staticRenderFns:s};t.a=i},1006:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{float:"left"}},[e._v("Thông tin mục tiêu")]),e._v(" "),a("div",{staticStyle:{float:"right",padding:"3px 0"}},[0==e.data.disabled&&e.ruleForm.Permission&&"View"!==e.ruleForm.Permission?a("el-button",{attrs:{icon:"fa fa-save"},on:{click:function(t){e.submitForm("ruleForm")}}}):e._e(),e._v(" "),1==e.data.disabled&&e.ruleForm.Permission&&"View"!==e.ruleForm.Permission?a("el-button",{attrs:{icon:"el-icon-edit"},on:{click:e.changeEditState}}):e._e(),e._v(" "),1==e.data.isEditable&&void 0==e.data.item.Permission?a("el-button",{attrs:{icon:"fa fa-eraser"},on:{click:function(t){e.resetForm("ruleForm")}}}):e._e(),e._v(" "),e.ruleForm.Permission&&"Manage"===e.ruleForm.Permission?a("el-button",{attrs:{icon:"el-icon-delete"},on:{click:function(t){e.deleteTarget()}}}):e._e()],1)]),e._v(" "),a("div",[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-position":e.$isMobileDevice?"top":"right","label-width":"150px"}},[a("el-form-item",{attrs:{label:"Tên:",prop:"Name"}},[a("el-input",{attrs:{disabled:e.data.disabled},model:{value:e.ruleForm.Name,callback:function(t){e.$set(e.ruleForm,"Name",t)},expression:"ruleForm.Name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Hiển thị:",prop:"IsPublic"}},[a("el-switch",{staticStyle:{display:"block"},attrs:{disabled:e.data.disabled,"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"Công khai","inactive-text":"Riêng tư"},model:{value:e.ruleForm.IsPublic,callback:function(t){e.$set(e.ruleForm,"IsPublic",t)},expression:"ruleForm.IsPublic"}})],1),e._v(" "),a("el-form-item",{staticClass:"demo-form-inline",attrs:{label:"Loại thời gian:",prop:"Milestone"}},[a("el-select",{attrs:{filterable:"",placeholder:"--Chọn--",disabled:e.data.disabled},on:{change:function(t){e.ruleForm.MilestoneVal=""}},model:{value:e.ruleForm.Milestone,callback:function(t){e.$set(e.ruleForm,"Milestone",t)},expression:"ruleForm.Milestone"}},[a("el-option",{attrs:{label:"Tuần",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"Tháng",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"Năm",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"Tuỳ chọn",value:"4"}})],1),e._v(" "),1==e.ruleForm.Milestone?a("el-date-picker",{attrs:{type:"week",format:"Tuần WW",placeholder:"--Chọn tuần--",disabled:e.data.disabled},on:{change:function(t){e.changeMilestoneVal(t,"week")}},model:{value:e.ruleForm.MilestoneVal,callback:function(t){e.$set(e.ruleForm,"MilestoneVal",t)},expression:"ruleForm.MilestoneVal"}}):e._e(),e._v(" "),2==e.ruleForm.Milestone?a("el-date-picker",{attrs:{type:"month",format:"MM",placeholder:"--Chọn tháng--",disabled:e.data.disabled},on:{change:function(t){e.changeMilestoneVal(t,"month")}},model:{value:e.ruleForm.MilestoneVal,callback:function(t){e.$set(e.ruleForm,"MilestoneVal",t)},expression:"ruleForm.MilestoneVal"}}):e._e(),e._v(" "),3==e.ruleForm.Milestone?a("el-date-picker",{attrs:{type:"year",placeholder:"--Chọn năm--",disabled:e.data.disabled},on:{change:function(t){e.changeMilestoneVal(t,"year")}},model:{value:e.ruleForm.MilestoneVal,callback:function(t){e.$set(e.ruleForm,"MilestoneVal",t)},expression:"ruleForm.MilestoneVal"}}):e._e()],1),e._v(" "),a("el-form-item",{staticClass:"demo-form-inline",attrs:{label:"Thời gian:",prop:"startEndDate"}},[a("el-date-picker",{attrs:{format:"dd-MM-yyyy",disabled:e.data.disabled,type:"date",placeholder:"Bắt đầu"},model:{value:e.ruleForm.ActualStartDate,callback:function(t){e.$set(e.ruleForm,"ActualStartDate",t)},expression:"ruleForm.ActualStartDate"}}),e._v(" "),a("el-date-picker",{attrs:{format:"dd-MM-yyyy",disabled:e.data.disabled,type:"date",placeholder:"Kết thúc"},model:{value:e.ruleForm.ActualFinishDate,callback:function(t){e.$set(e.ruleForm,"ActualFinishDate",t)},expression:"ruleForm.ActualFinishDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Loại mục tiêu:",prop:"TargetType"}},[a("el-radio-group",{attrs:{disabled:!e.data.isEditable},on:{change:function(t){e.changeType(e.ruleForm.TargetType)}},model:{value:e.ruleForm.TargetType,callback:function(t){e.$set(e.ruleForm,"TargetType",t)},expression:"ruleForm.TargetType"}},e._l(e.typeLst,function(t){return a("el-radio",{key:t.Id,attrs:{size:"mini",label:t.Id,border:"","ng-show":"data.disabled?true:(t.Id ===ruleForm.TargetType) "}},[e._v(e._s(t.Name))])}))],1),e._v(" "),void 0!=e.dataCopied.targetLst.length&&"1"!==e.ruleForm.TargetType?a("el-form-item",{attrs:{label:"Mục tiêu cha:",prop:"ParentId"}},[e.isShowAllTarget||!e.data.isEditable?a("el-select",{attrs:{placeholder:"--Chọn--",disabled:void 0!==e.ruleForm.Id},on:{change:function(t){e.setParent(e.ruleForm.ParentId)}},model:{value:e.ruleForm.ParentId,callback:function(t){e.$set(e.ruleForm,"ParentId",t)},expression:"ruleForm.ParentId"}},e._l(e.dataCopied.targetFullLst,function(e){return a("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Id}})})):a("el-select",{attrs:{placeholder:"--Chọn--",disabled:!e.data.isEditable},on:{change:function(t){e.setParent(e.ruleForm.ParentId)}},model:{value:e.ruleForm.ParentId,callback:function(t){e.$set(e.ruleForm,"ParentId",t)},expression:"ruleForm.ParentId"}},e._l(e.dataCopied.targetLst,function(e){return a("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Id}})})),e._v("\n             \n          "),void 0===e.ruleForm.Id?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Bộ lọc thời gian sẽ ảnh hưởng tới số lượng mục tiêu cha hiển thị. Để hiển thị tất cả mục tiêu, hãy chọn 'Hiển thị tất cả'",placement:"top"}},[a("i",{staticClass:"fa fa-lg fa-info-circle"})]):e._e(),e._v("\n             \n          "),void 0===e.ruleForm.Id?a("el-checkbox",{attrs:{label:"Hiển thị tất cả"},model:{value:e.isShowAllTarget,callback:function(t){e.isShowAllTarget=t},expression:"isShowAllTarget"}}):e._e()],1):e._e(),e._v(" "),e.data.departmentLst.length>0?a("el-form-item",{attrs:{label:"Thuộc phòng ban:",prop:"Value"}},[a("el-select",{attrs:{filterable:"",placeholder:"--Chọn--",disabled:e.data.disabled},model:{value:e.ruleForm.Value,callback:function(t){e.$set(e.ruleForm,"Value",t)},expression:"ruleForm.Value"}},e._l(e.data.departmentLst,function(e){return a("el-option",{key:e.GroupId,attrs:{label:e.GroupName,value:e.GroupId}})}))],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"Quản lý:",prop:"Owner"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"--Chọn--",disabled:e.data.disabled},model:{value:e.ruleForm.Owner,callback:function(t){e.$set(e.ruleForm,"Owner",t)},expression:"ruleForm.Owner"}},e._l(e.data.workers,function(t){return-1!=t.UserId.indexOf(";")||!e.ruleForm.Id&&1!=t.Status?e._e():a("el-option",{key:t.UserId,attrs:{label:t.Username,value:t.UserId}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"Nhân sự thực hiện:",prop:"Assigned"}},[a("el-select",{attrs:{filterable:"",multiple:"",placeholder:"--Chọn--",disabled:e.data.disabled},model:{value:e.ruleForm.Assigned,callback:function(t){e.$set(e.ruleForm,"Assigned",t)},expression:"ruleForm.Assigned"}},e._l(e.data.workers,function(t){return e.ruleForm.Id||1==t.Status?a("el-option",{key:t.UserId,attrs:{label:t.Username,value:t.UserId}}):e._e()}))],1),e._v(" "),a("el-form-item",{attrs:{label:"KPIs kế hoạch:",prop:"Plan"}},[a("el-input",{attrs:{disabled:e.data.disabled},on:{change:function(t){e.autoCal()}},model:{value:e.ruleForm.Plan,callback:function(t){e.$set(e.ruleForm,"Plan",t)},expression:"ruleForm.Plan"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"KPIs đạt:",prop:"Done"}},[a("el-input",{attrs:{disabled:e.data.disabled},on:{change:function(t){e.autoCal()}},model:{value:e.ruleForm.Done,callback:function(t){e.$set(e.ruleForm,"Done",t)},expression:"ruleForm.Done"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Đơn vị tính:",prop:"Unit"}},[a("el-input",{attrs:{disabled:e.data.disabled},model:{value:e.ruleForm.Unit,callback:function(t){e.$set(e.ruleForm,"Unit",t)},expression:"ruleForm.Unit"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Tính % Hoàn thành:",prop:"autoCal"}},[a("el-switch",{attrs:{disabled:e.data.disabled},on:{change:function(t){e.autoCal()}},model:{value:e.ruleForm.autoCal,callback:function(t){e.$set(e.ruleForm,"autoCal",t)},expression:"ruleForm.autoCal"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Tỉ lệ hoành thành:",prop:"Progress"}},[a("el-input",{attrs:{disabled:e.data.disabled},model:{value:e.ruleForm.Progress,callback:function(t){e.$set(e.ruleForm,"Progress",t)},expression:"ruleForm.Progress"}})],1)],1)],1)]),e._v(" "),e.data.isEditable?e._e():a("HistoryGrid",{attrs:{dtSource:e.viewHistoryModel,dtHeader:["Mục","Giá trị cũ","Giá trị mới"]}})],1)},s=[],i={render:r,staticRenderFns:s};t.a=i},1007:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"tTbl"}},[a("div",{staticStyle:{flex:"1",display:"flex","align-items":"center","justify-content":"space-between","font-size":"14px","padding-right":"8px"}},[a("el-row"),e._v(" "),e.editableUser&&!e.$isMobileDevice?a("el-tooltip",{attrs:{content:"Thêm mới mục tiêu",placement:"top"}},[a("el-button",{attrs:{size:"mini",icon:"fa fa-plus"},on:{click:function(t){e.addNewTarget()}}})],1):e._e(),e._v(" "),e.editableUser&&e.$isMobileDevice?a("el-button",{attrs:{size:"mini",icon:"fa fa-plus"},on:{click:function(t){e.addNewTarget()}}}):e._e()],1),e._v(" "),a("el-table",{attrs:{data:e.dtSrc,border:"","empty-text":"Không có dữ liệu"}},[a("el-table-column",{attrs:{label:"",width:"50px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{"text-align":"center",cursor:"pointer"},on:{click:function(a){e.openTargetDetail(t.row)}}},[a("i",{staticClass:"fa-lg icon-magnifier-add"})])]}}])}),e._v(" "),a("el-table-tree-column",{attrs:{prop:"Name",label:"Tên",levelKey:"level",treeKey:"Id",parentKey:"ParentId","min-width":"200px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Progress",label:"Hoàn thành","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-progress",{attrs:{"text-inside":!0,"stroke-width":18,percentage:Math.round(isNaN(e.row.Progress)?0:e.row.Progress)}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"TargetType",label:"Loại","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.targetsObj[t.row.TargetType]?e.targetsObj[t.row.TargetType].Name:"---")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"Plan",label:"Kế hoạch","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"Done",label:"Đạt được","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"Unit",label:"Đơn vị","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"Owner",label:"Người quản lý","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[void 0!=e.userWithAvatarLst[t.row.Owner]?a("img",{staticClass:"avatar",staticStyle:{margin:"8px 10px 0 0"},attrs:{height:"35",width:"35",title:e.userWithAvatarLst[t.row.Owner].Username,src:e.loadAvatar(e.userWithAvatarLst[t.row.Owner].Avatar)}}):a("span",[e._v(e._s(t.row.OwnerName))])])]}}])})],1)],1)},s=[],i={render:r,staticRenderFns:s};t.a=i},1070:function(e,t,a){"use strict";function r(e){a(1104)}var s=a(1106),i=a(1107),n=a(0),l=r,o=n(s.a,i.a,!1,l,null,null);t.a=o.exports},1101:function(e,t,a){var r=a(1102);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(932)("ee24def4",r,!0)},1102:function(e,t,a){t=e.exports=a(931)(!0),t.push([e.i,"#target-part .grab-bing{cursor:-webkit-grab;cursor:-o-grab;cursor:grab}#target-part .grab-bing:active{cursor:-webkit-grabbing;cursor:-o-grabbing;cursor:grabbing}#target-part table td{border-right:1px solid #ddd!important}#target-part .default-column{min-width:100px;text-align:center;vertical-align:middle}#target-part .btnMenu{position:absolute;left:5px;top:6px}#target-part .el-date-editor--daterange.el-input,#target-part .el-date-editor--daterange.el-input__inner,#target-part .el-date-editor--timerange.el-input,#target-part .el-date-editor--timerange.el-input__inner{width:200px!important}#target-part .el-collapse-item__header{height:25px;line-height:25px;padding-left:10px}#target-part .el-collapse-item__arrow{line-height:25px}#target-part .el-collapse-item__content{padding-bottom:0}#target-part .headerMenu{height:30px;padding-left:10px;font-weight:700;background-color:#f0f3f5;border:1px solid #c2cfd6}#target-part .headerMenu .layout-column .flex{min-height:48px}#target-part .owner{padding-top:5px}#target-part .my-row .col{padding:0}@media screen and (max-width:599px){#target-part .headerMenu{height:30px}}#target-part thead{background-color:#fff}#target-part .c{min-width:5px!important;padding:0!important;width:.5px!important;text-align:center!important}#target-part .c td{border:none!important}#target-part td.c{background-color:#a9a9a9!important}#target-part .tgSt{font-size:12px;text-align:left}#target-part .tgWeek{min-width:70px!important}#target-part .cl-Targets{min-width:140px!important}#target-part .cl-Name{min-width:160px!important}#target-part .tg-StatusName{text-align:center}#target-part .h{background-color:#fff;color:#000;outline:auto;outline-color:#bdbdbd}#target-part .h td::first-child{padding:10px 5px!important}#target-part .h td{border:none!important}#target-part .mt{max-width:300px!important;min-width:200px!important}#target-part .r{max-width:45px!important;min-width:30px!important}#target-part .icon{font-size:24px;min-width:25px;margin:0;padding:0 6px}#target-part th{text-align:center!important}#target-part th,#target-part tr{border:thin solid #d3d3d3}#target-part .el-main{padding:0}#target-part .container-fluid{padding:5px!important}#target-part #filter{position:fixed;top:80px;right:30px;z-index:99;cursor:pointer}","",{version:3,sources:["/Users/yuukininomae/Sites/vue-crm2/src/components/Target.vue"],names:[],mappings:"AACA,wBACE,oBAAqB,AACrB,eAAgB,AAChB,WAAa,CACd,AACD,+BACE,wBAAyB,AACzB,mBAAoB,AACpB,eAAiB,CAClB,AACD,sBACE,qCAAwC,CACzC,AACD,6BACE,gBAAiB,AACjB,kBAAmB,AACnB,qBAAuB,CACxB,AACD,sBACE,kBAAmB,AACnB,SAAU,AACV,OAAS,CACV,AACD,kNAIE,qBAAwB,CACzB,AACD,uCACE,YAAa,AACb,iBAAkB,AAClB,iBAAmB,CACpB,AACD,sCACE,gBAAkB,CACnB,AACD,wCACE,gBAAoB,CACrB,AACD,yBACE,YAAa,AACb,kBAAmB,AACnB,gBAAkB,AAClB,yBAA0B,AAC1B,wBAA0B,CAC3B,AACD,8CACI,eAAiB,CACpB,AACD,oBACE,eAAiB,CAClB,AACD,0BACE,SAAa,CACd,AACD,oCACA,yBACI,WAAa,CAChB,CACA,AACD,mBACE,qBAAwB,CACzB,AACD,gBACE,wBAA0B,AAC1B,oBAAwB,AACxB,qBAAwB,AACxB,2BAA8B,CAC/B,AACD,mBACI,qBAAwB,CAC3B,AACD,kBACE,kCAAsC,CACvC,AACD,mBACE,eAAgB,AAChB,eAAiB,CAClB,AACD,qBACE,wBAA2B,CAC5B,AACD,yBACE,yBAA4B,CAC7B,AACD,sBACE,yBAA4B,CAC7B,AACD,4BACE,iBAAmB,CACpB,AAID,gBACE,sBAAwB,AACxB,WAAa,AACb,aAAc,AACd,qBAAuB,CACxB,AACD,gCACI,0BAA6B,CAChC,AACD,mBACI,qBAAwB,CAC3B,AACD,iBACE,0BAA4B,AAC5B,yBAA4B,CAC7B,AACD,gBACE,yBAA2B,AAC3B,wBAA2B,CAC5B,AACD,mBACE,eAAgB,AAChB,eAAgB,AAChB,SAAU,AACV,aAAe,CAChB,AACD,gBACE,2BAA8B,CAE/B,AACD,gCAFE,yBAA6B,CAI9B,AACD,sBACE,SAAW,CACZ,AACD,8BACE,qBAAwB,CACzB,AACD,qBAEE,eAAgB,AAChB,SAAU,AACV,WAAY,AACZ,WAAY,AACZ,cAAgB,CACjB",file:"Target.vue",sourcesContent:["\n#target-part .grab-bing {\n  cursor: -webkit-grab;\n  cursor: -o-grab;\n  cursor: grab;\n}\n#target-part .grab-bing:active {\n  cursor: -webkit-grabbing;\n  cursor: -o-grabbing;\n  cursor: grabbing;\n}\n#target-part table td {\n  border-right: 1px solid #ddd !important;\n}\n#target-part .default-column {\n  min-width: 100px;\n  text-align: center;\n  vertical-align: middle;\n}\n#target-part .btnMenu {\n  position: absolute;\n  left: 5px;\n  top: 6px;\n}\n#target-part .el-date-editor--daterange.el-input,\n#target-part .el-date-editor--daterange.el-input__inner,\n#target-part .el-date-editor--timerange.el-input,\n#target-part .el-date-editor--timerange.el-input__inner {\n  width: 200px !important;\n}\n#target-part .el-collapse-item__header {\n  height: 25px;\n  line-height: 25px;\n  padding-left: 10px;\n}\n#target-part .el-collapse-item__arrow {\n  line-height: 25px;\n}\n#target-part .el-collapse-item__content {\n  padding-bottom: 0px;\n}\n#target-part .headerMenu {\n  height: 30px;\n  padding-left: 10px;\n  font-weight: bold;\n  background-color: #f0f3f5;\n  border: 1px solid #c2cfd6;\n}\n#target-part .headerMenu .layout-column .flex {\n    min-height: 48px;\n}\n#target-part .owner {\n  padding-top: 5px;\n}\n#target-part .my-row .col {\n  padding: 0px;\n}\n@media screen and (max-width: 599px) {\n#target-part .headerMenu {\n    height: 30px;\n}\n}\n#target-part thead {\n  background-color: white;\n}\n#target-part .c {\n  min-width: 5px !important;\n  padding: 0px !important;\n  width: 0.5px !important;\n  text-align: center !important;\n}\n#target-part .c td {\n    border: none !important;\n}\n#target-part td.c {\n  background-color: darkgray !important;\n}\n#target-part .tgSt {\n  font-size: 12px;\n  text-align: left;\n}\n#target-part .tgWeek {\n  min-width: 70px !important;\n}\n#target-part .cl-Targets {\n  min-width: 140px !important;\n}\n#target-part .cl-Name {\n  min-width: 160px !important;\n}\n#target-part .tg-StatusName {\n  text-align: center;\n}\n#target-part .tg-qua-han {\n  /*text-align: end;*/\n}\n#target-part .h {\n  background-color: white;\n  color: black;\n  outline: auto;\n  outline-color: #bdbdbd;\n}\n#target-part .h td::first-child {\n    padding: 10px 5px !important;\n}\n#target-part .h td {\n    border: none !important;\n}\n#target-part .mt {\n  max-width: 300px !important;\n  min-width: 200px !important;\n}\n#target-part .r {\n  max-width: 45px !important;\n  min-width: 30px !important;\n}\n#target-part .icon {\n  font-size: 24px;\n  min-width: 25px;\n  margin: 0;\n  padding: 0 6px;\n}\n#target-part th {\n  text-align: center !important;\n  border: solid thin lightgray;\n}\n#target-part tr {\n  border: solid thin lightgray;\n}\n#target-part .el-main {\n  padding: 0;\n}\n#target-part .container-fluid {\n  padding: 5px !important;\n}\n#target-part #filter {\n  /*display: none;*/\n  position: fixed;\n  top: 80px;\n  right: 30px;\n  z-index: 99;\n  cursor: pointer;\n}\n"],sourceRoot:""}])},1103:function(module,__webpack_exports__,__webpack_require__){"use strict";(function($){var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__=__webpack_require__(4),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof__=__webpack_require__(25),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof__),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_defineProperty__=__webpack_require__(44),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_defineProperty___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_defineProperty__),__WEBPACK_IMPORTED_MODULE_3_vue__=__webpack_require__(3),__WEBPACK_IMPORTED_MODULE_4__components_static_WeekTarget__=__webpack_require__(933),__WEBPACK_IMPORTED_MODULE_5__components_static_WeekTask__=__webpack_require__(934),__WEBPACK_IMPORTED_MODULE_6__components_static_TargetSetting__=__webpack_require__(935),__WEBPACK_IMPORTED_MODULE_7__components_static_TargetDialog__=__webpack_require__(985),__WEBPACK_IMPORTED_MODULE_8__components_static_BlockLeftPanelTarget__=__webpack_require__(1070),__WEBPACK_IMPORTED_MODULE_9__components_static_TargetTimeLine__=__webpack_require__(1108),__WEBPACK_IMPORTED_MODULE_10_element_ui_lib_theme_chalk_display_css__=__webpack_require__(295),__WEBPACK_IMPORTED_MODULE_10_element_ui_lib_theme_chalk_display_css___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_10_element_ui_lib_theme_chalk_display_css__);__WEBPACK_IMPORTED_MODULE_3_vue__.default.use(__webpack_require__(40)),__webpack_exports__.a={components:{WeekTarget:__WEBPACK_IMPORTED_MODULE_4__components_static_WeekTarget__.default,WeekTask:__WEBPACK_IMPORTED_MODULE_5__components_static_WeekTask__.default,TargetSetting:__WEBPACK_IMPORTED_MODULE_6__components_static_TargetSetting__.default,BlockLeftPanelTarget:__WEBPACK_IMPORTED_MODULE_8__components_static_BlockLeftPanelTarget__.a,TargetTimeLine:__WEBPACK_IMPORTED_MODULE_9__components_static_TargetTimeLine__.a},provide:function(){return{workerList:this.ListWorker}},computed:{},watch:{filter:{handler:function(e,t){this.filterChanged(e)},deep:!0}},mounted:function(){var e=this;this.$hub.$on("datePicked",function(t){e.model.PlanStartDateStartValue=t[0],e.model.PlanStartDateEndValue=t[1],e.changeType(e.Type,e.Target)}),this.$hub.$on("workerPicked",function(t){e.model.Worker=t,e.changeType(e.Type,e.Target)})},data:function(){var e=__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_defineProperty___default()({isShowTimeLine:!1,targetList:[],startDateVal:"",endDateVal:"",dateFilterType:"week",currentTab:"weekTasks",TargetTab:"weekTasks",base:"",isMobileVer:null,height:720,showMenu:!0,headers:[],listDates:[],listGroupsDate:[],tasks:[],ProgressColor:[15,30,45,60,75,90,105],ListPlan:[],DateTime:[[{key:"DayAgo",value:"Hôm trước"},{key:"Day",value:"Hôm nay"},{key:"DayNext",value:"Hôm sau"}],[{key:"WeekAgo",value:"Tuần trước"},{key:"Week",value:"Tuần này"},{key:"WeekNext",value:"Tuần sau"}],[{key:"MonthAgo",value:"Tháng trước"},{key:"Month",value:"Tháng này"},{key:"MonthNext",value:"Tháng sau"}]],datasource:[],notifications:[],taskIndex:[],listSubscribe:[],isSystemAdmin:!0,isMantisAdmin:!0,prefix:"",indexx:1,ListType:[{Id:"1",Name:"Mục tiêu công ty"},{Id:"2",Name:"Mục tiêu phòng ban"},{Id:"3",Name:"Mục tiêu cá nhân"}],isMobileApp:null,SettingList:{},showFilter:!1,model:{WeekNumber:48,PlanStartDateStartValue:"2017-11-26T17:00:00.000Z",PlanStartDateEndValue:"2017-12-03T16:59:59.000Z"},listData:[],thisYear:2017,viewModel:{},baseUri:"",Show:[],Showa:!0,isMobileDevice:!1,Type:"Target",TypeName:"Mục tiêu",Target:0,arrWeek:[],isWeek:"true",ListWorker:[],ListGroup:[],filteredListGroup:[],ListVersionProject:[],targetFields:[],ListProject:[],SettingIndex:0,setFilterSetting:!1,lists:{},ListSettings:[],ListField:[],ListCols:{},listDisplay:[],FieldList:"",objSearch:{},ListTarget:"",listTargetDetail:[],dataSource:[],Display:!0,cells:[]},"endDateVal",null);return e.firstDayOfWeekCfg=this.$getItemLocalStorage("firstDayOfWeekCfg")?parseInt(JSON.parse(this.$getItemLocalStorage("firstDayOfWeekCfg")).Value):1,e.targetLst=[],e.targetSavedLst=[],e.myTargetLst=[],e.myManagedTargetLst=[],e.publicTargetLst=[],e.years=this.getRecentWeeks(e.firstDayOfWeekCfg),e.months=[],e.quarters=[],e.filter={startDateValue:"",departmentId:"",targetTypeId:"",selectedWorkers:"",departmentIds:[]},e.ParentId="",e.tabCache="",e.dataToPass=e,e},methods:{changeFilterDateType:function(e){var t="";"week"===e?t=__WEBPACK_IMPORTED_MODULE_3_vue__.default.moment().isoWeekday(this.firstDayOfWeekCfg).startOf("isoweek")._d:"month"===e?t=__WEBPACK_IMPORTED_MODULE_3_vue__.default.moment().startOf("month")._d:"quarter"===e&&(t=__WEBPACK_IMPORTED_MODULE_3_vue__.default.moment().startOf("quarter")._d),this.filter.startDateValue=t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()+" 00:00:00"},filterChanged:function(e){var t=__WEBPACK_IMPORTED_MODULE_3_vue__.default.moment().isoWeekday(this.firstDayOfWeekCfg).startOf("isoweek")._d;if(this.currentStartDateValue=t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()+" 00:00:00","settingTargets"==this.TargetTab)if(""==e.startDateValue){var a=this.$Lodash.cloneDeep(this.targetSavedLst);this.targetLst=a.filter(function(e){return!(e.Code&&"xSetting.Project.Parameter.Organization.Target"===e.Code)})}else{var r=new Date(e.startDateValue),s=null;"week"===this.dateFilterType?s=__WEBPACK_IMPORTED_MODULE_3_vue__.default.moment(r).isoWeekday(this.firstDayOfWeekCfg).endOf("isoweek")._d:"month"===this.dateFilterType?s=__WEBPACK_IMPORTED_MODULE_3_vue__.default.moment(r).endOf("month")._d:"quarter"===this.dateFilterType&&(s=__WEBPACK_IMPORTED_MODULE_3_vue__.default.moment(r).endOf("quarter")._d),this.targetLst=this.targetSavedLst.filter(function(e){return new Date(e.ActualStartDate)<=r&&new Date(e.ActualFinishDate)>=r||new Date(e.ActualStartDate)<=s&&new Date(e.ActualFinishDate)>=s||new Date(e.ActualStartDate)<=r&&new Date(e.ActualFinishDate)>=s||new Date(e.ActualStartDate)>=r&&new Date(e.ActualFinishDate)<=s})}else{this.model.PlanStartDateStartValue=new Date(e.startDateValue),this.model.PlanStartDateEndValue=__WEBPACK_IMPORTED_MODULE_3_vue__.default.moment(e.startDateValue).isoWeekday(this.firstDayOfWeekCfg).endOf("isoweek"),this.model.Project=e.departmentIds,this.model.Worker=e.selectedWorkers;var i="1"==e.targetTypeId?0:e.targetTypeId;"weekTasks"==this.currentTab?this.changeType("PlanStartDate"):"weekTargets"==this.currentTab&&this.changeType("Target",i)}},changeTab:function(e){"settingTargets"===this.tabCache&&(this.dateFilterType="week",this.changeFilterDateType("week")),this.changeTabTarget(e.paneName),this.tabCache=e.paneName},onShowMenu:function(e){this.showMenu=!e,$("#display").toggle("slow")},openTargetDetail:function(e,t){var a=JSON.parse(this.targetFields),r={item:e,workers:this.ListWorker,departmentLst:this.ListGroup,isEditable:t,targetLst:this.targetLst,disabled:!t,targetFields:a,getTargets:this.getTargets,getObject:this.getObject,targetSavedLst:this.targetSavedLst};this.$hub.$emit("set-modal-data","","50%",!0,"center",__WEBPACK_IMPORTED_MODULE_7__components_static_TargetDialog__.a,!1,"",r,!0),this.$hub.$emit("open-modal")},changeTabTarget:function(e){if(e!==this.currentTab){if("weekTasks"==e)this.changeType("PlanStartDate"),this.thisYear!=__WEBPACK_IMPORTED_MODULE_3_vue__.default.moment().year()&&(this.thisYear=__WEBPACK_IMPORTED_MODULE_3_vue__.default.moment().year(),this.getWeekthisYear());else if("weekTargets"==e)this.changeType("Target","1"==this.filter.targetTypeId?0:this.filter.targetTypeId);else if(""==this.filter.startDateValue){var t=this.$Lodash.cloneDeep(this.targetSavedLst);this.targetLst=t.filter(function(e){return!(e.Code&&"xSetting.Project.Parameter.Organization.Target"===e.Code)})}else{var a=__WEBPACK_IMPORTED_MODULE_3_vue__.default.moment(new Date(this.filter.startDateValue))._d,r=__WEBPACK_IMPORTED_MODULE_3_vue__.default.moment(a).isoWeekday(this.firstDayOfWeekCfg).endOf("isoweek")._d;this.targetLst=this.targetSavedLst.filter(function(e,t){return new Date(e.ActualStartDate)<=a&&new Date(e.ActualFinishDate)>=a||new Date(e.ActualStartDate)<=r&&new Date(e.ActualFinishDate)>=r||new Date(e.ActualStartDate)<=a&&new Date(e.ActualFinishDate)>=r||new Date(e.ActualStartDate)>=a&&new Date(e.ActualFinishDate)<=r})}this.currentTab=e}},changeType:function(e,t){this.Type=e,this.TypeName="PlanStartDate"==e?"Tuần":"Mục tiêu",this.Target=t;var a="PlanStartDate"==e?1:0;if(this.SettingList[this.Type]){var r=[];this.SettingList[this.ListSettings[a].Name].Fields.forEach(function(e){e.Caption&&"true"!=e.ListIsHidden&&r.push(e)});var s=!1;this.ListCols={};for(var i=0;i<r.length;i++)if("Group"==r[i].FieldType){var n=r[i].Caption;this.ListCols[n]=[],s=!0}else s&&this.ListCols[n].push(r[i]);this.getObject()}else this.loadSetting("PlanStartDate"==e?1:0)},getObject:function getObject(){var vm=this;if(vm.objSearch={},"Target"===vm.Type){vm.ListTarget="";var requestSearch=vm.$Utils.updateParamsSingleRequest(vm.$Lodash.cloneDeep(vm.$singleRequest),{ParentCode:"xSetting.Project.Parameter.Organization.Target",RequestOrderFields:"LeftIndex ASC",RequestClass:"xBase",RequestAction:"Request",TargetType:vm.Target,RequestDataGroup:"DataGroup.muc-tieu.091fb",RequestFields:"Plan;Done;Progress;Unit;Assigned;AssignedName;Owner;OwnerName;TargetType;Id;Index;Code;Name;Value;Description;LeftIndex;ParentId;Level;ValueName;RightIndex;Created;CreatedBy;Modified;ActualStartDate;ActualFinishDate;IsPublic",RequestTemplate:"xDynamicData_Setting.Search",AssignedUser:vm.$getItemLocalStorage(vm.$localStorageConstant.SessionId)});vm.$isMantisAdmin()&&0===vm.Target?requestSearch.R1_TargetType="1;2":0===vm.Target&&delete requestSearch.R1_TargetType,requestSearch.R1_Value="",vm.model.Project.length>0&&(requestSearch.R1_Value=vm.model.Project.join(";")),vm.$Utils.postCheckResult(requestSearch).then(function(data){data=vm.$Utils.getDataWithRoot(data,"R1.Data.DynamicDS.Setting"),vm.listTargetDetail=[];var currentId=vm.$getItemLocalStorage(vm.$localStorageConstant.UserId).toLowerCase(),noteChild={},noteRoot=0,index=0;$.each(data,function(key,value){var checked={};if(vm.model.Worker&&0!==vm.model.Worker.length?$.each(vm.model.Worker,function(e,t){-1!==t.indexOf(";")?checked.Worker=!0:value.Assigned&&-1!==value.Assigned.indexOf(t)&&(checked.Worker=!0)}):checked.Worker=!0,0===vm.Target){var minLevel=6,dashed="";minLevel===parseInt(value.Level)&&noteRoot++,dashed=noteRoot,vm.$Utils.isEmpty(noteChild[noteRoot])||(noteChild[noteRoot]={});for(var i=minLevel;i<value.Level;i++)vm.$Utils.isEmpty(noteChild[noteRoot],value.Level)||(noteChild[noteRoot][value.Level]=0),i===value.Level-1&&(noteChild[noteRoot][value.Level]++,noteChild[noteRoot][eval(value.Level)+1]=0),0!==noteChild[noteRoot][i+1]&&noteChild[noteRoot][i+1]?dashed+="."+noteChild[noteRoot][i+1]:dashed+=".0";value.Index=dashed}if((!vm.$Utils.isEmpty(value.ActualStartDate)&&!vm.$Utils.isEmpty(value.ActualFinishDate)||vm.$Utils.isEmpty(value.ActualStartDate)&&eval(new Date(value.ActualStartDate)>=new Date(vm.model.PlanStartDateStartValue))&&eval(new Date(value.ActualStartDate)<=new Date(vm.model.PlanStartDateEndValue))||vm.$Utils.isEmpty(value.ActualFinishDate)&&eval(new Date(value.ActualFinishDate)>=new Date(vm.model.PlanStartDateStartValue))&&eval(new Date(value.ActualFinishDate)<=new Date(vm.model.PlanStartDateEndValue))||vm.$Utils.isEmpty(value.ActualStartDate)&&vm.$Utils.isEmpty(value.ActualFinishDate)&&eval(new Date(value.ActualStartDate)<=new Date(vm.model.PlanStartDateEndValue))&&eval(new Date(value.ActualFinishDate)>=new Date(vm.model.PlanStartDateEndValue)))&&checked.Worker){0!=vm.Target&&(index++,value.Index=index),vm.objSearch[value.Id]=value,vm.ListTarget+=value.Id+";";var ele=value;if(ele.isOwner=!1,ele.isAssigned=!1,ele.Plan&&parseInt(ele.Plan)&&(ele.Plan=vm.$Utils.numberWithCommas(ele.Plan)),ele.Done&&parseInt(ele.Done)&&(ele.Done=vm.$Utils.numberWithCommas(ele.Done)),ele.Owner&&ele.Owner.toLowerCase().indexOf(currentId)>-1&&(ele.isOwner=!0),ele.Assigned&&ele.Assigned.toLowerCase().indexOf(currentId)>-1&&(ele.isAssigned=!0),ele.GroupName="",vm.$Utils.isEmpty(ele.Progress)?ele.Progress=ele.Progress.split(".")[0]:ele.Progress=0,vm.$Utils.isEmpty(ele.Value)){var ids=ele.Value.split(";"),Name="";$.each(ids,function(e,t){$.each(vm.ListGroup,function(e,a){e>0&&t===a.GroupId&&(ele.GroupName+=a.GroupName+";")})})}vm.$isSystemAdmin()||vm.$isMantisAdmin()?(0===vm.Target&&ele.TargetType,vm.listTargetDetail.push(ele)):vm.listTargetDetail.push(ele)}}),vm.getTask();var user=JSON.parse(vm.$getItemLocalStorage(vm.$localStorageConstant.LoggedOnUser));vm.myManagedTargetLst=[],vm.myTargetLst=[],vm.publicTargetLst=[],$.each(vm.listTargetDetail,function(e,t){"1"!==t.TargetType&&$.each(vm.ListWorker,function(e,a){a.UserId===t.Owner&&a.Avatar&&(t.Avatar=a.Avatar)}),t.TargetTypeName=vm.ListType[t.TargetType-1].Name,!0===t.isOwner?vm.myManagedTargetLst.push(t):!0===t.isAssigned?vm.myTargetLst.push(t):vm.publicTargetLst.push(t);var a=!1;void 0!=user.GroupRoles&&void 0!=user.GroupRoles.Leader&&t.Value&&t.Value.split(";").length>0&&user.GroupRoles.Leader.split(";").filter(function(e,r){t.Value.indexOf(e)>-1&&(a=!0)}),vm.$isSystemAdmin()||vm.$isMantisAdmin()||a&&"3"===t.TargetType?t.Permission="Manage":a&&"2"===t.TargetType||a&&"1"===t.TargetType||t.Owner&&t.Owner.indexOf(user.UserId)>-1||t.Assigned&&t.Assigned.indexOf(user.UserId)>-1?t.Permission="Edit":t.Permission="View"})})}else{var dateTime=vm.model.PlanStartDateStartValue;for(vm.objSearch[vm.$Utils.formatDateTime(__WEBPACK_IMPORTED_MODULE_3_vue__.default.moment(dateTime).toDate(),"YYYY/MM/DD")]=vm.$Utils.dateToString(vm.$Utils.stringToDate(dateTime).getDay());eval(new Date(__WEBPACK_IMPORTED_MODULE_3_vue__.default.moment(dateTime).add(1,"days"))<new Date(vm.model.PlanStartDateEndValue));)dateTime=vm.$Utils.formatDateTime(__WEBPACK_IMPORTED_MODULE_3_vue__.default.moment(dateTime).add(1,"days").toDate()),vm.objSearch[vm.$Utils.formatDateTime(dateTime,"YYYY/MM/DD")]=vm.$Utils.dateToString(vm.$Utils.stringToDate(dateTime).getDay());if(vm.listTargetDetail&&0!==vm.listTargetDetail.length)vm.getTask();else{vm.ListTarget="";var requestSearch=vm.$Utils.updateParamsSingleRequest(vm.$Lodash.cloneDeep(vm.$singleRequest),{ParentCode:"xSetting.Project.Parameter.Organization.Target",RequestOrderFields:"LeftIndex ASC",RequestClass:"xBase",RequestAction:"Request",TargetType:vm.Target,RequestDataGroup:"DataGroup.muc-tieu.091fb",RequestFields:"Plan;Done;Progress;Unit;Assigned;AssignedName;Owner;OwnerName;TargetType;Id;Index;Code;Name;Value;Description;LeftIndex;ParentId;Level;ValueName;RightIndex;Created;CreatedBy;Modified;ActualStartDate;ActualFinishDate;IsPublic",RequestTemplate:"xDynamicData_Setting.Search",AssignedUser:vm.$getItemLocalStorage(vm.$localStorageConstant.SessionId)});vm.$Utils.post(requestSearch).then(function(data){data=vm.$Utils.getDataWithRoot(data,"R1.Data.DynamicDS.Setting"),vm.listTargetDetail=[];var currentId=vm.$getItemLocalStorage(vm.$localStorageConstant.UserId).toLowerCase();$.each(data,function(key,value){var checked={};if(vm.model.Worker&&0!==vm.model.Worker.length?$.each(vm.model.Worker,function(e,t){-1!==t.indexOf(";")?checked.Worker=!0:value.Assigned&&-1!==value.Assigned.indexOf(t)&&(checked.Worker=!0)}):checked.Worker=!0,(!vm.$Utils.isEmpty(value.ActualStartDate)&&!vm.$Utils.isEmpty(value.ActualFinishDate)||vm.$Utils.isEmpty(value.ActualStartDate)&&eval(new Date(value.ActualStartDate)>=new Date(vm.model.PlanStartDateStartValue))&&eval(new Date(value.ActualStartDate)<=new Date(vm.model.PlanStartDateEndValue))||vm.$Utils.isEmpty(value.ActualFinishDate)&&eval(new Date(value.ActualFinishDate)>=new Date(vm.model.PlanStartDateStartValue))&&eval(new Date(value.ActualFinishDate)<=new Date(vm.model.PlanStartDateEndValue))||vm.$Utils.isEmpty(value.ActualStartDate)&&vm.$Utils.isEmpty(value.ActualFinishDate)&&eval(new Date(value.ActualStartDate)<=new Date(vm.model.PlanStartDateEndValue))&&eval(new Date(value.ActualFinishDate)>=new Date(vm.model.PlanStartDateEndValue)))&&checked.Worker){var ele=value;if(ele.isOwner=!1,ele.isAssigned=!1,ele.Plan&&parseInt(ele.Plan)&&(ele.Plan=vm.$Utils.numberWithCommas(ele.Plan)),ele.Done&&parseInt(ele.Done)&&(ele.Done=vm.$Utils.numberWithCommas(ele.Done)),ele.Owner&&ele.Owner.toLowerCase().indexOf(currentId)>-1&&(ele.isOwner=!0),ele.Assigned&&ele.Assigned.toLowerCase().indexOf(currentId)>-1&&(ele.isAssigned=!0),ele.GroupName="",vm.$Utils.isEmpty(ele.Progress)?ele.Progress=ele.Progress.split(".")[0]:ele.Progress=0,vm.$Utils.isEmpty(ele.Value)){var ids=ele.Value.split(";"),Name="";$.each(ids,function(e,t){$.each(vm.ListGroup,function(e,a){e>0&&t===a.GroupId&&(ele.GroupName+=a.GroupName+";")})})}vm.$isSystemAdmin()||vm.$isMantisAdmin()?(0===vm.Target&&ele.TargetType,vm.listTargetDetail.push(ele)):vm.listTargetDetail.push(ele)}}),vm.getTask();var user=JSON.parse(vm.$getItemLocalStorage(vm.$localStorageConstant.LoggedOnUser));vm.myManagedTargetLst=[],vm.myTargetLst=[],vm.publicTargetLst=[],$.each(vm.listTargetDetail,function(e,t){"1"!==t.TargetType&&$.each(vm.ListWorker,function(e,a){a.UserId===t.Owner&&(a.Avatar?t.Avatar=a.Avatar:t.Avatar="assets/images/avatars/profile.png")}),t.TargetTypeName=vm.ListType[t.TargetType-1].Name,!0===t.isOwner?vm.myManagedTargetLst.push(t):!0===t.isAssigned?vm.myTargetLst.push(t):vm.publicTargetLst.push(t);var a=!1;void 0!=user.GroupRoles&&void 0!=user.GroupRoles.Leader&&t.Value&&t.Value.split(";").length>0&&user.GroupRoles.Leader.split(";").filter(function(e,r){t.Value.indexOf(e)>-1&&(a=!0)}),vm.$isSystemAdmin()||vm.$isMantisAdmin()||a&&"3"===t.TargetType?t.Permission="Manage":a&&"2"===t.TargetType||a&&"1"===t.TargetType||t.Owner&&t.Owner.indexOf(user.UserId)>-1||t.Assigned&&t.Assigned.indexOf(user.UserId)>-1?t.Permission="Edit":t.Permission="View"})})}}},getTask:function(e){var t=this,a=this.$Lodash.cloneDeep(this.$singleRequest);a.TotalRequests=0,a.TotalRequests++;var r={AssignedUser:this.$getItemLocalStorage(this.$localStorageConstant.SessionId),RequestTemplate:"AG_Task_Task.Search",RequestDataGroup:"DataGroup.danh-sach-cong-viec.04b66",RequestFields:"Id;Project;ProjectName;Index;Modified;Name;StatusName;WorkerName;PlanStartDate;Deadline;PlanManHour;RemainingManHour;RestTime;ChosenOne;Progress;CategoriesName;Targets;PriorityIdName;StatusDisplayName;StatusDisplay;TotalDownload;TotalComment;Action;Categories;CategoryProjectLevel1;CategoryProjectLevel2;CategoryProjectLevel3;ChosenOne;Code;CreatedBy;GroupRoot;Id;Index;Manager;Milestone;ModifiedBy;PriorityId;Project;ProjectType;Quality;Status;TaskQualityResult;TaskRequest;TaskResult;TaskState;TotalComment;TotalDownload;Type;Version;Worker;TagName;StatusDisplayName;SeverityName;VersionProjectName;CategoriesLevel1;CategoriesLevel2;CategoriesLevel3;CategoriesLevel4;TargetsName;TargetsLevel1;TargetsLevel2;TargetsLevel3;TargetsLevel4;CategoriesLevel5;ProjectCategoriesLevel1;ProjectCategoriesLevel2;ChosenOneName;Targets;",RequestOrderFields:"PlanStartDate ASC"};"Target"==this.Type&&0!=this.Target&&(r["TargetsLevel"+this.Target]=this.ListTarget,r.RequestFields+="TargetsLevel"+this.Target+";"),r.PlanStartDateStartValue=this.$Utils.formatDateTime(this.model.PlanStartDateStartValue),r.PlanStartDateEndValue=this.$Utils.formatDateTime(this.model.PlanStartDateEndValue);var s={};this.$Utils.isEmpty(this.model.PlanStartDateEndValue,"setHours")&&this.model.PlanStartDateEndValue.setHours(23,59,59),"Target"!=this.Type?$.each(this.model,function(e,a){"object"==(void 0===a?"undefined":__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof___default()(a))&&null!=a?a.length>0?s[e]=a.join(";"):0!=a.length&&(s[e]=t.$Utils.formatDateTime(a)):"string"==typeof a&&(s[e]=a)}):(s.PlanStartDateStartValue=this.$Utils.formatDateTime(this.model.PlanStartDateStartValue),s.PlanStartDateEndValue=this.$Utils.formatDateTime(this.model.PlanStartDateEndValue)),a=this.$Utils.updateParamsSingleRequest(a,r,a.TotalRequests),a=this.$Utils.updateParamsSingleRequest(a,s,a.TotalRequests),this.$Utils.postCheckResult(a).then(function(e){t.dataSource=t.$Utils.getDataWithRoot(e.R1,"Data.TasksDS.Task"),t.bindData()})},getWorker:function(){var e=this,t={RequestAction:"SearchUsers",RequestClass:"BPM",RequestDataType:"json",ConditionFields:"Status;LoginName;UserId",StaticFields:"UserId;Username;LoginName;Status;",OrderFields:"LoginName ASC",DynamicFields:"Avatar"};this.$Utils.post(t).then(function(t){e.ListWorker=e.$Utils.getDataWithRoot(t,"Data.UserDS.User"),"superadmin"!==JSON.parse(e.$getItemLocalStorage(e.$localStorageConstant.LoggedOnUser)).LoginName&&(e.ListWorker=e.ListWorker.filter(function(e){return-1===e.LoginName.indexOf("superadmin")}));var a={UserId:e.ListWorker.map(function(e){return e.UserId}).join(";"),Username:"Tất cả"};e.ListWorker.unshift(a),e.$forceUpdate()})},getVersionProject:function(){var e=this,t=this.$Lodash.cloneDeep(this.$singleRequest),a={RequestTemplate:"tblGroup.Search",RequestFields:"GroupId;GroupName;ProjectCode;GroupType;CreatedBy;State;Status;Type;",GroupType:4,RequestDataGroup:"DataGroup.quan-ly-du-an.053gf"};t=this.$Utils.updateParamsSingleRequest(t,a),this.$Utils.post(t).then(function(t){if(e.ListVersionProject=e.$Utils.getDataWithRoot(t.R1,"Data.UserDS.Group"),e.ListVersionProject.length>0){var a={Id:e.ListVersionProject.map(function(e){return e.Id}).join(";"),Name:"Tất cả"};e.ListVersionProject.unshift(a)}})},bindData:function bindData(){var vm=this;vm.Display=!0,vm.cells=[],vm.tasks=vm.dataSource;var week=vm.objSearch,days={},taskByday={},Now=new Date;$.each(week,function(wKey,wValue){var taskByday={},cellh={CellType:"h"};cellh.Id=wValue.Id;var TotalPlanManHour=0,TotalRemainingManHour=0,TotalActualManHour=0,TotalRestTime=0,TotalSpentTime=0,TotalProgress=0;if(taskByday[wKey]=[],$.each(vm.tasks,function(k,task){if("Target"==vm.Type){var head="";if(vm.Target>0)head=task["TargetsLevel"+vm.Target];else if(task.Targets){var i=1;vm.$isMantisAdmin()&&task.Targets.split(";").length>3?(i=2,head=task["TargetsLevel"+(task.Targets.split(";").length-i)]):head=task["TargetsLevel"+(task.Targets.split(";").length-i)]}}else var head=vm.$Utils.formatDateTime(task.PlanStartDate,"YYYY/MM/DD");if(vm.$Utils.isEmpty(head)&&""!=head&&wKey==head){for(var k in task)cellh[k]="";task.Progress=task.Progress?parseFloat(task.Progress).toFixed(0):parseFloat(0).toFixed(0),TotalPlanManHour=parseFloat(eval(TotalPlanManHour)+eval(task.PlanManHour)).toFixed(2),TotalActualManHour=parseFloat(eval(TotalActualManHour)+eval(task.ActualManHour)).toFixed(2),TotalRemainingManHour=parseFloat(eval(TotalRemainingManHour)+eval(task.RemainingManHour)).toFixed(2),TotalRestTime=parseFloat(eval(TotalRestTime)+eval(task.RestTime)).toFixed(2),TotalProgress=parseFloat(eval(TotalProgress)+eval(task.Progress)/100*eval(task.RemainingManHour)).toFixed(2),"532e9f1e-f5dc-4e75-b7c9-2bd785bbda67"!=task.Status&&"53cc3819-c019-4749-b0e4-52213438049b"!=task.Status&&eval(Now>new Date(task.PlanStartDate))?task.SpentTime=parseFloat(vm.$Utils.expressionToString(task,"{{Deadline|DateTime:toNows}}")).toFixed(2):task.SpentTime=0,TotalSpentTime=parseFloat(eval(TotalSpentTime)+eval(task.SpentTime)).toFixed(2),taskByday[wKey]||(taskByday[wKey]=[]),"Target"!=vm.Type&&vm.$Utils.formatDateTime(new Date(task.PlanStartDate),"DD/MM/YYYY")==vm.$Utils.formatDateTime(Now,"DD/MM/YYYY")&&(task.Display=!0),taskByday[wKey].push(task)}}),"Target"!=vm.Type){var wtime=vm.$Utils.stringToDate(new Date(wKey)),wdate=vm.$Utils.dateToString(wtime.getDay()),dcurrent=vm.$Utils.dateToString(vm.$Utils.stringToDate(new Date).getDay());vm.model.WeekNumber==vm.SourceWeek?cellh.Index=wdate:cellh.Index=wdate+" - "+vm.$Utils.formatDateTime(new Date(wKey),"DD/MM"),cellh.Level=1,cellh.Index!=dcurrent||vm.currentStartDateValue!=vm.filter.startDateValue?cellh.ShowMenu=!1:cellh.ShowMenu=!0,cellh.Display=!0}else 1==week[wKey].Index&&(vm.RootLevel=parseInt(week[wKey].Level)),cellh.Level=parseInt(week[wKey].Level)-vm.RootLevel+1,cellh.Display=!0,cellh.ShowMenu=!1,cellh.Index=week[wKey].Index,cellh.Name=week[wKey].Name,vm.$Utils.isEmpty(week[wKey].Unit)&&(cellh.Unit=" "+week[wKey].Unit),1==week[wKey].TargetType?week[wKey].ValueName&&(cellh.WorkerName=week[wKey].ValueName.split(",").join(", ")):week[wKey].AssignedName&&(cellh.WorkerName=week[wKey].AssignedName.split(",").join(", "));cellh.PlanManHour=TotalPlanManHour,cellh.ActualManHour=TotalActualManHour,cellh.RestTime=TotalRestTime,cellh.RemainingManHour=TotalRemainingManHour,cellh.SpentTime=TotalSpentTime,cellh.PlanStartDate=wValue.ActualStartDate,cellh.Deadline=wValue.ActualFinishDate,0!=eval(TotalRemainingManHour)?cellh.Progress=parseFloat(eval(TotalProgress)/eval(TotalRemainingManHour)*100).toFixed(0):cellh.Progress=parseFloat(0).toFixed(0),"Target"==vm.Type?(parseInt(week[wKey].Plan)?cellh.TargetPlan=vm.$Utils.isEmpty(week[wKey].Plan)?vm.$Utils.numberWithCommas(week[wKey].Plan):0:cellh.TargetPlan=vm.$Utils.isEmpty(week[wKey].Plan)?week[wKey].Plan:0,parseInt(week[wKey].Done)?cellh.TargetDone=vm.$Utils.isEmpty(week[wKey].Done)?vm.$Utils.numberWithCommas(week[wKey].Done):0:cellh.TargetDone=vm.$Utils.isEmpty(week[wKey].Done)?week[wKey].Done:0,cellh.TargetProgress=vm.$Utils.isEmpty(week[wKey].Progress)?week[wKey].Progress:0,cellh.Name&&(vm.cells.push(cellh),vm.cells=vm.cells.concat(taskByday[wKey]))):cellh.Index&&(cellh.PlanStartDate=wKey,cellh.Deadline=wKey,vm.cells.push(cellh),vm.cells=vm.cells.concat(taskByday[wKey]))})},loadSetting:function(e){var t=this;t.$Utils.isEmpty(e)?t.SettingIndex=e:t.SettingIndex=0,t.setFilterSetting=!1,t.lists={};var a=t.$Lodash.cloneDeep(t.$singleRequest);a.R1_RequestTemplate="Setting.SearchBase",a.R1_ParentCode="xSetting.Project.Tools.Target",t.$Utils.post(a).then(function(e){t.ListSettings=t.$Utils.getDataWithRoot(e.R1,"Data.DynamicDS.Setting");var a=t.$Lodash.cloneDeep(t.$singleRequest);a.R1_RequestTemplate="Setting.SearchBase",a.R1_ParentCode="xSetting.Project.List",a.R1_Code=t.ListSettings[t.SettingIndex].Value,t.$Utils.post(a).then(function(e){t.SettingList[t.ListSettings[t.SettingIndex].Name]=t.$Utils.getDataWithRoot(e.R1,"Data.DynamicDS.Setting")[0],t.$Utils.isEmpty(t.SettingList[t.ListSettings[t.SettingIndex].Name],"Description")&&"string"==typeof t.SettingList[t.ListSettings[t.SettingIndex].Name].Description&&(t.SettingList[t.ListSettings[t.SettingIndex].Name].Description=JSON.parse(t.SettingList[t.ListSettings[t.SettingIndex].Name].Description));for(var a=1;a<=t.SettingList[t.ListSettings[t.SettingIndex].Name].Description.FCount;a++)1===a&&(t.ListField=""),t.ListField+=t.SettingList[t.ListSettings[t.SettingIndex].Name]["F"+a],delete t.SettingList[t.ListSettings[t.SettingIndex].Name]["F"+a];t.ListField=JSON.parse(t.ListField);var r=[];$.each(t.ListField,function(e,t){t.Caption&&"true"!=t.ListIsHidden&&r.push(t)});var s=!1;t.ListCols={};for(var a=0;a<r.length;a++)if("Group"==r[a].FieldType){var i=r[a].Caption;t.ListCols[i]=[],s=!0}else s&&t.ListCols[i].push(r[a]);t.SettingList[t.ListSettings[t.SettingIndex].Name].Fields=t.ListField,t.listDisplay=JSON.parse(t.SettingList[t.ListSettings[t.SettingIndex].Name].OF1),t.FieldList="",$.each(t.ListField,function(e,a){t.FieldList+=t.ListSettings[t.SettingIndex].Name+";"}),t.getObject()})})},getTargets:function getTargets(){var ctrl=this,user=JSON.parse(ctrl.$getItemLocalStorage(ctrl.$localStorageConstant.LoggedOnUser)),request=ctrl.$Lodash.cloneDeep(ctrl.$singleRequest);request.TotalRequests=2,request.R1_RequestTemplate="xDynamicData_Setting.Search",request.R1_ParentCode="xSetting.Project.Parameter.Organization.Target",request.R1_RequestFields="Plan;Done;Progress;Unit;Assigned;AssignedName;Owner;OwnerName;TargetType;Id;Index;Code;Name;Value;Description;LeftIndex;ParentId;Level;ValueName;RightIndex;Created;CreatedBy;Modified;IsPublic;ActualStartDate;ActualFinishDate;Milestone",request.R1_RequestDataGroup="DataGroup.muc-tieu.091fb",request.R1_IncludedNestedSetParent=!0,request.R1_AssignedUser=ctrl.$getItemLocalStorage(ctrl.$localStorageConstant.SessionId),request.R1_OrderFields="Created desc",request.R2_RequestTemplate="xDynamicData_Setting.Search",request.R2_ParentCode="xSetting.Project.Parameter.Organization.Target",request.R2_RequestFields="Plan;Done;Progress;Unit;Assigned;AssignedName;Owner;OwnerName;TargetType;Id;Index;Code;Name;Value;Description;LeftIndex;ParentId;Level;Value;RightIndex;Created;CreatedBy;Modified;IsPublic;ActualStartDate;ActualFinishDate;Milestone",request.R2_RequestDataGroup="DataGroup.muc-tieu.091fb",request.R2_IncludedNestedSetParent=!0,request.R2_OrderFields="Created desc",ctrl.$Utils.postCheckResult(request).then(function(result){var data=ctrl.$Utils.getDataWithRoot(result.R1,"Data.DynamicDS.Setting");ctrl.targetLst=data.filter(function(e){return!(e.Code&&"xSetting.Project.Parameter.Organization.Target"===e.Code)});var listObj={};if(ctrl.$Utils.isEmpty(ctrl.targetLst,"0")){$.each(ctrl.targetLst,function(e,t){listObj[t.Id]=t}),ctrl.RootLevel=ctrl.targetLst[0].Level,ctrl.targets={};var indexOfRoot=void 0;ctrl.targetLst.filter(function(value,key){ctrl.targets[value.Id]?(data[key].numChildren=ctrl.targets[value.Id].numChildren,ctrl.targets[data[key].Id]=data[key]):ctrl.targets[data[key].Id]=data[key],ctrl.targets[data[key].ParentId]?ctrl.targets[data[key].ParentId].numChildren=(ctrl.targets[data[key].ParentId].numChildren?ctrl.targets[data[key].ParentId].numChildren:0)+1:(ctrl.targets[data[key].ParentId]={},ctrl.targets[data[key].ParentId].numChildren=1);var childRank=ctrl.$Utils.isEmpty(listObj[value.ParentId])?eval(listObj[value.ParentId].Level-ctrl.RootLevel+1):eval(value.Level-ctrl.RootLevel);for(ctrl.targetLst[key].text="";childRank>0;)ctrl.targetLst[key].text+="|-- ",childRank--;ctrl.targetLst[key].text+=value.Name;var isLeaderOfTarget=!1;void 0!=user.GroupRoles&&void 0!=user.GroupRoles.Leader&&ctrl.targetLst[key].Value&&ctrl.targetLst[key].Value.split(";").length>0&&user.GroupRoles.Leader.split(";").filter(function(e,t){ctrl.targetLst[key].Value.indexOf(e)>-1&&(isLeaderOfTarget=!0)}),ctrl.$isSystemAdmin()||ctrl.$isMantisAdmin()||isLeaderOfTarget&&"3"===ctrl.targetLst[key].TargetType?ctrl.targetLst[key].Permission="Manage":isLeaderOfTarget&&"2"===ctrl.targetLst[key].TargetType||isLeaderOfTarget&&"1"===ctrl.targetLst[key].TargetType||ctrl.targetLst[key].Owner&&ctrl.targetLst[key].Owner.indexOf(user.UserId)>-1||ctrl.targetLst[key].Assigned&&ctrl.targetLst[key].Assigned.indexOf(user.UserId)>-1?ctrl.targetLst[key].Permission="Edit":ctrl.targetLst[key].Permission="View",ctrl.targetLst[key]&&void 0!==ctrl.targetLst[key].Code&&"5"===ctrl.targetLst[key].Level&&(ctrl.ParentId=ctrl.$Lodash.cloneDeep(ctrl.targetLst[key].Id),indexOfRoot=key)}),ctrl.targetSavedLst=ctrl.$Lodash.cloneDeep(ctrl.targetLst),void 0!=indexOfRoot&&(ctrl.targetLst.splice(indexOfRoot,1),data.splice(indexOfRoot,1))}var lst=ctrl.$Utils.getDataWithRoot(result.R2,"Data.DynamicDS.Setting");if($.each(lst,function(e,t){void 0!=t.Code&&"5"===t.Level&&(ctrl.ParentId=ctrl.$Lodash.cloneDeep(t.Id))}),ctrl.$Utils.isEmpty(ctrl.StartDateFilter)&&ctrl.$Utils.isEmpty(ctrl.EndDateFilter)){var temp=ctrl.$Lodash.cloneDeep(data),lst=[];$.each(temp,function(e){if(ctrl.$Utils.isEmpty(e)){var t=new Date(e.ActualStartDate),a=new Date(e.ActualFinishDate);t.getTime()>=ctrl.StartDateFilter.getTime()&&t.getTime()<=ctrl.EndDateFilter.getTime()&&a.getTime()>=ctrl.StartDateFilter.getTime()&&a.getTime()<=ctrl.EndDateFilter.getTime()&&lst.push(e)}}),data=lst}ctrl.filterChanged(ctrl.filter)})},getRecentWeeks:function(e){var t=[],a=__WEBPACK_IMPORTED_MODULE_3_vue__.default.moment().week();__WEBPACK_IMPORTED_MODULE_3_vue__.default.moment().isoWeekday()>=5&&(a+=1);var r=__WEBPACK_IMPORTED_MODULE_3_vue__.default.moment().subtract(8,"weeks"),s=__WEBPACK_IMPORTED_MODULE_3_vue__.default.moment().add(8,"weeks");if(s._d.getFullYear()!==r._d.getFullYear()){for(var i={year:s._d.getFullYear()+"",weeks:[]},n={year:r._d.getFullYear()+"",weeks:[]},l=s;l>r;l=l.subtract(1,"weeks")){var o=__WEBPACK_IMPORTED_MODULE_3_vue__.default.moment(l._d).isoWeekday(e).startOf("isoweek")._d,d=__WEBPACK_IMPORTED_MODULE_3_vue__.default.moment(l._d).isoWeekday(e).endOf("isoweek")._d,c={name:"Tuần "+l.isoWeek(),text:this.$Utils.formatDateTime(o,"DD/MM")+" -> "+this.$Utils.formatDateTime(d,"DD/MM"),value:o.getFullYear()+"/"+(o.getMonth()+1)+"/"+o.getDate()+" 00:00:00"};i.year==d.getFullYear()?i.weeks.push(c):n.year==d.getFullYear()&&n.weeks.push(c)}t.push(i),t.push(n)}else{for(var u={year:r._d.getFullYear()+"",weeks:[]},l=s;l>r;l=l.subtract(1,"weeks")){var o=__WEBPACK_IMPORTED_MODULE_3_vue__.default.moment(l._d).isoWeekday(e).startOf("isoweek")._d,d=__WEBPACK_IMPORTED_MODULE_3_vue__.default.moment(l._d).isoWeekday(e).endOf("isoweek")._d,c={name:"Tuần "+l.isoWeek(),text:this.$Utils.formatDateTime(o,"DD/MM")+" -> "+this.$Utils.formatDateTime(d,"DD/MM"),value:o.getFullYear()+"/"+(o.getMonth()+1)+"/"+o.getDate()+" 00:00:00"};u.weeks.push(c)}t.push(u)}return t},getRecentMonthsAndQuarters:function(){for(var e=-6;e<6;e++){var t=__WEBPACK_IMPORTED_MODULE_3_vue__.default.moment().add(e,"months"),a={name:"Tháng "+(t._d.getMonth()+1)+" năm "+t._d.getFullYear(),value:t._d.getFullYear()+"/"+(t._d.getMonth()+1)+"/"+t.startOf("month")._d.getDate()+" 00:00:00"};this.months.push(a)}for(var e=-4;e<4;e++){var t=__WEBPACK_IMPORTED_MODULE_3_vue__.default.moment().add(e,"quarters"),r={name:"Quý "+t.quarter()+" năm "+t._d.getFullYear(),value:t.startOf("quarter")._d.getFullYear()+"/"+(t.startOf("quarter")._d.getMonth()+1)+"/"+t.startOf("quarter")._d.getDate()+" 00:00:00"};this.quarters.push(r)}}},created:function(){var e=this;this.getRecentMonthsAndQuarters();var t=this;t.getWorker();var a=JSON.parse(t.$getItemLocalStorage(t.$localStorageConstant.LoggedOnUser));a.Groups.filter(function(e){"Leader"!==e.GroupName&&"Director"!==e.GroupName||(void 0==a.GroupRoles?(a.GroupRoles={},a.GroupRoles[e.GroupName]=e.GroupParent):a.GroupRoles[e.GroupName]+=";"+e.GroupParent)}),t.$setItemLocalStorage("LoggedOnUser",__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(a)),t.headers=[],t.listDates=[{name:"Tháng 1",value:1,type:"Tháng"},{name:"Tháng 2",value:2,type:"Tháng"},{name:"Tháng 3",value:3,type:"Tháng"},{name:"Tháng 4",value:4,type:"Tháng"},{name:"Tháng 5",value:5,type:"Tháng"},{name:"Tháng 6",value:6,type:"Tháng"},{name:"Tháng 7",value:7,type:"Tháng"},{name:"Tháng 8",value:8,type:"Tháng"},{name:"Tháng 9",value:9,type:"Tháng"},{name:"Tháng 10",value:10,type:"Tháng"},{name:"Tháng 11",value:11,type:"Tháng"},{name:"Tháng 12",value:12,type:"Tháng"},{name:"Quý 1",value:1,type:"Quý"},{name:"Quý 2",value:2,type:"Quý"},{name:"Quý 3",value:3,type:"Quý"},{name:"Quý 4",value:4,type:"Quý"}],t.listGroupsDate=t.listDates.reduce(function(e,t){return-1===e.indexOf(t.type)&&e.push(t.type),e},[]),t.tasks=[],t.ProgressColor=[15,30,45,60,75,90,105],t.ListPlan=[],t.DateTime=[[{key:"DayAgo",value:"Hôm trước"},{key:"Day",value:"Hôm nay"},{key:"DayNext",value:"Hôm sau"}],[{key:"WeekAgo",value:"Tuần trước"},{key:"Week",value:"Tuần này"},{key:"WeekNext",value:"Tuần sau"}],[{key:"MonthAgo",value:"Tháng trước"},{key:"Month",value:"Tháng này"},{key:"MonthNext",value:"Tháng sau"}]],t.datasource=[],t.notifications=[],t.taskIndex=[],t.listSubscribe=[],t.isSystemAdmin=t.$isSystemAdmin(),t.isMantisAdmin=t.$isMantisAdmin(),t.prefix=t.$isMobile.iOS()?"/":"",t.indexx=1,t.ListType=[{Id:"1",Name:"Mục tiêu công ty"},{Id:"2",Name:"Mục tiêu phòng ban"},{Id:"3",Name:"Mục tiêu cá nhân"}],t.SettingList={},t.showFilter=!1,t.model={},t.listData=[],t.thisYear=__WEBPACK_IMPORTED_MODULE_3_vue__.default.moment().year(),t.getVersionProject(),t.getTargets();var r=t.$Lodash.cloneDeep(t.$singleRequest);r.R1_RequestTemplate="OrgnizationList",r.R1_GroupType=1,t.$Utils.post(r).then(function(e){t.ListGroup=t.$Utils.getDataWithRoot(e.R1,"Data.UserDS.Group"),t.$Utils.isEmpty(t.ListGroup,"0")&&$.each(t.ListGroup,function(e,a){var r=a.Level;for(t.ListGroup[e].text="";r>1;)t.ListGroup[e].text+="|-- ",r--;t.ListGroup[e].text+=a.GroupName})});var s=this.$Lodash.cloneDeep(this.$singleRequest);s.R1_TotalRequests=1,s.R1_RequestTemplate="tblGroup.Search",s.R1_RequestDataGroup="DataGroup.quan-ly-du-an.053gf",s.R1_RequestFields="GroupId;GroupName;GroupType;GroupParent;ProjectCode;CreatedBy;State;Status;Type;Department;",s.R1_GroupType="1",this.$isSystemAdmin()||this.$isMantisAdmin()||(s.R1_AssignedUser=this.SessionId),this.$Utils.post(s).then(function(a){t.filteredListGroup=e.$Utils.getDataWithRoot(a.R1,"Data.UserDS.Group")});var i=t.$Lodash.cloneDeep(t.$singleRequest);i.R1_RequestTemplate="SettingNew.SearchSetting",i.R1_Code="DataGroup.muc-tieu.091fb",t.$Utils.post(i).then(function(e){t.targetFields=t.$Utils.getDataWithRoot(e.R1,"Data.DynamicDS.Setting.F1")}),t.TargetTab="weekTasks","/"!=t.$appUri.BaseURL?t.baseUri=t.$appUri.BaseURL:t.baseUri="",t.Show=[],t.Showa=!0,t.Type="Target",t.TypeName="Mục tiêu",t.Target=0,t.isMantisAdmin?t.filter.targetTypeId="1":t.filter.targetTypeId="3";var n=__WEBPACK_IMPORTED_MODULE_3_vue__.default.moment(new Date).isoWeekday(t.firstDayOfWeekCfg).startOf("isoweek")._d;t.filter.startDateValue=n.getFullYear()+"/"+(n.getMonth()+1)+"/"+n.getDate()+" 00:00:00"}}}).call(__webpack_exports__,__webpack_require__(2))},1104:function(e,t,a){var r=a(1105);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(932)("30d86eb6",r,!0)},1105:function(e,t,a){t=e.exports=a(931)(!0),t.push([e.i,".blocklefttargetpanel .headerMenu{color:#f0f3f5;font-weight:700;font-size:15px;background-color:#f50808!important}.blocklefttargetpanel .el-card__body,.blocklefttargetpanel .el-card__header{padding:10px}.blocklefttargetpanel .round-image{border-radius:50%;max-height:25px;display:inline-block}.blocklefttargetpanel .border-box{border:1px solid #d3d3d3}","",{version:3,sources:["/Users/yuukininomae/Sites/vue-crm2/src/components/static/BlockLeftPanelTarget.vue"],names:[],mappings:"AACA,kCACE,cAAe,AACf,gBAAkB,AAClB,eAAgB,AAChB,kCAAqC,CACtC,AACD,4EACE,YAAc,CACf,AACD,mCACE,kBAAmB,AACnB,gBAAiB,AACjB,oBAAsB,CACvB,AACD,kCACE,wBAA4B,CAC7B",file:"BlockLeftPanelTarget.vue",sourcesContent:["\n.blocklefttargetpanel .headerMenu {\n  color: #f0f3f5;\n  font-weight: bold;\n  font-size: 15px;\n  background-color: #f50808 !important;\n}\n.blocklefttargetpanel .el-card__header, .blocklefttargetpanel .el-card__body {\n  padding: 10px;\n}\n.blocklefttargetpanel .round-image {\n  border-radius: 50%;\n  max-height: 25px;\n  display: inline-block;\n}\n.blocklefttargetpanel .border-box {\n  border: 1px solid lightgray;\n}\n"],sourceRoot:""}])},1106:function(e,t,a){"use strict";t.a={inject:["getDayName"],props:["title","vList","fnOpenDetail"],data:function(){return{list:[]}},watch:{vList:function(e){}},methods:{loadAvatar:function(e){return void 0==e&&(e="assets/images/avatars/profile.png"),e=e.replace("profile.jpg","profile.png"),"assets/images/avatars/profile.png"===e?this.$appUri.BaseURL+e:this.$appUri.BaseURL+e.replace("/","")+"&Height=50&Width=50"}},mounted:function(){}}},1107:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"blocklefttargetpanel"},[a("div",{staticClass:"headerMenu"},[e._v(e._s(e.title))]),e._v(" "),e._l(e.vList,function(t){return a("el-card",{key:t.Id,staticClass:"box-card border-box"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t.TargetType?a("div",{staticClass:"tgSt"},[a("b",[e._v("Loại:")]),e._v(" "),"1"===t.TargetType?a("span",[a("b",[e._v(e._s(t.TargetTypeName))])]):e._e(),e._v(" "),"1"!==t.TargetType?a("span",[e._v(e._s(t.TargetTypeName))]):e._e()]):e._e(),e._v(" "),"1"===t.TargetType?a("span",{staticStyle:{"font-size":"1.3333em"}},[a("b",[a("a",{attrs:{href:"javaScript:void(0)"},on:{click:function(a){e.fnOpenDetail(t,!1)}}},[e._v(e._s(t.Name))])])]):e._e(),e._v(" "),"1"!==t.TargetType?a("span",{staticStyle:{"font-size":"1.3333em"}},[a("a",{attrs:{href:"javaScript:void(0)"},on:{click:function(a){e.fnOpenDetail(t,!1)}}},[e._v(e._s(t.Name))])]):e._e(),e._v(" "),t.Avatar?a("div",{staticClass:"owner"},["1"===t.TargetType?a("div",[a("img",{staticClass:"round-image",attrs:{src:e.loadAvatar(t.Avatar)}}),e._v(" - "+e._s(t.GroupName))]):e._e(),e._v(" "),"1"!==t.TargetType?a("div",[a("img",{staticClass:"round-image",attrs:{src:e.loadAvatar(t.Avatar)}}),e._v(" - "+e._s(t.OwnerName))]):e._e()]):a("div",{staticClass:"owner"},["1"===t.TargetType?a("span",[a("i",{staticClass:"fa fa-users fa-lg mt-2"}),e._v(" - "+e._s(t.GroupName))]):e._e(),e._v(" "),"1"!==t.TargetType?a("span",[a("i",{staticClass:"fa fa-user fa-lg mt-2"}),e._v(" - "+e._s(t.OwnerName))]):e._e()])]),e._v(" "),a("div",{staticClass:"bdCt text item"},["1"!==t.TargetType?a("div",{staticClass:"tgSt"},[a("b",[e._v("Phòng:")]),e._v(" "+e._s(t.GroupName))]):e._e(),e._v(" "),"1"===t.TargetType?a("div",{staticClass:"tgSt"},[a("b",[e._v("Quản lý:")]),e._v(" "+e._s(t.OwnerName))]):e._e(),e._v(" "),a("div",{staticClass:"tgSt row p-0 m-0"},[a("div",{staticClass:"col-md-2 p-0 m-0"},[a("b",{staticStyle:{"white-space":"nowrap"}},[e._v("Tỉ lệ:")])]),e._v(" "),a("div",{staticClass:"col-md-10 p-0 m-0"},[a("el-progress",{attrs:{"text-inside":!0,"stroke-width":18,percentage:parseFloat(t.Progress),status:t.Progress?parseFloat(t.Progress)>=100?"success":0===parseFloat(t.Progress)?"0":"":"0"}})],1)]),e._v(" "),a("div",{staticClass:"tgSt"},[a("b",[e._v("Người thực hiện:")]),e._v(" "+e._s(t.AssignedName))]),e._v(" "),a("div",{staticClass:"tgSt"},[a("b",[e._v("Cập nhật:")]),e._v(" "+e._s(e.getDayName(t.Modified)))])])])})],2)},s=[],i={render:r,staticRenderFns:s};t.a=i},1108:function(e,t,a){"use strict";function r(e){a(1109)}var s=a(1111),i=a(1112),n=a(0),l=r,o=n(s.a,i.a,!1,l,null,null);t.a=o.exports},1109:function(e,t,a){var r=a(1110);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(932)("1f76a084",r,!0)},1110:function(e,t,a){t=e.exports=a(931)(!0),t.push([e.i,".timeline-page .red-badge{color:red}.timeline-page .red-badge .el-badge__content{background-color:red;color:#fff}.timeline-page .el-badge__content{background-color:#ececec;color:#000}.timeline-page .hr{margin-top:10px;padding-top:10px;border-top:1px dashed #000}.timeline-page .hr .row{float:right}.timeline-page .chkbx{margin:0}.timeline-page .sidenav{height:100%;width:0;position:fixed;z-index:1;top:50;right:0;background-color:#fff;overflow-x:hidden;padding-top:30px;-webkit-transition:.5s;transition:.5s}.timeline-page .sidenav a{text-decoration:none;font-size:25px;color:#818181;display:block;-webkit-transition:.3s;transition:.3s}.timeline-page .menuTab{padding-left:5px}.timeline-page .sidenav a:hover{color:#f1f1f1}.timeline-page .sidenav .closebtn{position:absolute;top:0;right:10px;font-size:25px;margin-left:50px}.timeline-page #main{-webkit-transition:margin-left .5s;transition:margin-left .5s;padding:20px}.timeline-page #main .el-select{padding-bottom:10px}@media screen and (max-height:450px){.timeline-page .sidenav{padding-top:15px}.timeline-page .sidenav a{font-size:18px}}@media screen and (max-width:768px){.timeline-page .el-date-range-picker{overflow:auto!important;width:100%!important}}.timeline-page .left-scroll{max-height:100vh;overflow-y:scroll}.timeline-page .right-scroll{max-height:200vh;overflow-y:scroll}@media screen and (max-width:1366px){.timeline-page .left-scroll{max-height:79vh;overflow-y:scroll}.timeline-page .right-scroll{max-height:49vh;overflow-y:scroll}}@media screen and (max-width:1366px) and (max-width:375px){.timeline-page .left-scroll{max-height:77vh;overflow-y:scroll}}.timeline-page .pd-right-10{padding-right:10px}.timeline-page .padding-0{padding:0!important}.timeline-page .b-600{font-weight:600}.timeline-page body{font-size:13px}.timeline-page .span-block-border{text-align:center;width:60%;display:inline-block}.timeline-page .span-block-border span{margin:auto}.timeline-page .span-block-border .el-progress-bar__inner,.timeline-page .span-block-border .el-progress-bar__outer{border-radius:0}.timeline-page .el-progress-bar__innerText{color:#0b0e0f}.timeline-page .el-card__body{padding:5px 14px 5px 5px!important}.timeline-page .center-div{margin-left:auto;margin-right:auto;text-align:center;width:auto}.timeline-page .status .el-main{margin-bottom:10px}.timeline-page .rightaligndiv{padding-right:5px}.timeline-page .el-card{margin-bottom:5px;width:100%;overflow:visible}.timeline-page .round-image{border-radius:50%;max-height:50px;display:block;margin:auto}.timeline-page .target-header{font-size:16px}.timeline-page .el-container{color:#333;padding-top:5px}.timeline-page .el-main{padding:0}.timeline-page .el-main .el-container{padding:5px}.timeline-page .el-checkbox__label{margin-right:5px}.timeline-page .el-header{padding-top:5px;height:32px!important;line-height:27px;font-size:16px;background-color:#f0f3f5;border:1px solid #c2cfd6}.timeline-page .el-header .rightaligndiv{text-align:right}@media screen and (max-width:599px){.timeline-page .container-fluid{padding:0 5px!important}.timeline-page .timeline-page .el-header{height:32px!important}}","",{version:3,sources:["/Users/yuukininomae/Sites/vue-crm2/src/components/static/TargetTimeLine.vue"],names:[],mappings:"AASA,0BACI,SAAW,CACd,AACD,6CACM,qBAAsB,AACtB,UAAa,CAClB,AACD,kCACI,yBAA0B,AAC1B,UAAa,CAChB,AACD,mBACI,gBAAiB,AACjB,iBAAkB,AAClB,0BAA6B,CAChC,AACD,wBACM,WAAa,CAClB,AACD,sBACI,QAAY,CACf,AACD,wBACI,YAAa,AAEb,QAAS,AAET,eAAgB,AAEhB,UAAW,AAEX,OAAQ,AAER,QAAS,AACT,sBAAwB,AAExB,kBAAmB,AAEnB,iBAAkB,AAElB,uBAAyB,AACzB,cAAiB,CAEpB,AACD,0BACI,qBAAsB,AACtB,eAAgB,AAChB,cAAe,AACf,cAAe,AACf,uBAAyB,AACzB,cAAiB,CACpB,AACD,wBACI,gBAAkB,CACrB,AACD,gCACI,aAAe,CAClB,AACD,kCACI,kBAAmB,AACnB,MAAO,AACP,WAAY,AACZ,eAAgB,AAChB,gBAAkB,CACrB,AACD,qBACI,mCAAoC,AACpC,2BAA4B,AAC5B,YAAc,CACjB,AACD,gCACM,mBAAqB,CAC1B,AACD,qCACA,wBACM,gBAAkB,CACvB,AACD,0BACM,cAAgB,CACrB,CACA,AACD,oCACA,qCACM,wBAA0B,AAC1B,oBAAuB,CAC5B,CACA,AACD,4BACI,iBAAkB,AAClB,iBAAmB,CACtB,AACD,6BACI,iBAAkB,AAClB,iBAAmB,CACtB,AACD,qCACA,4BACM,gBAAiB,AACjB,iBAAmB,CACxB,AACD,6BACM,gBAAiB,AACjB,iBAAmB,CACxB,CACA,AACD,2DACA,4BACI,gBAAiB,AACjB,iBAAmB,CACtB,CACA,AACD,4BACI,kBAAoB,CACvB,AACD,0BACI,mBAAsB,CACzB,AACD,sBACI,eAAiB,CACpB,AACD,oBACI,cAAgB,CACnB,AACD,kCACI,kBAAmB,AACnB,UAAW,AACX,oBAAsB,CACzB,AACD,uCACM,WAAa,CAClB,AACD,oHACM,eAAmB,CACxB,AACD,2CACI,aAAe,CAClB,AACD,8BACI,kCAAqC,CACxC,AACD,2BACI,iBAAkB,AAClB,kBAAmB,AACnB,kBAAmB,AACnB,UAAY,CACf,AACD,gCACI,kBAAoB,CACvB,AACD,8BACI,iBAAmB,CACtB,AACD,wBACI,kBAAmB,AACnB,WAAY,AACZ,gBAAkB,CACrB,AACD,4BACI,kBAAmB,AACnB,gBAAiB,AACjB,cAAe,AACf,WAAa,CAChB,AACD,8BACI,cAAgB,CACnB,AACD,6BACI,WAAY,AACZ,eAAiB,CACpB,AACD,wBACI,SAAa,CAChB,AACD,sCACM,WAAa,CAClB,AACD,mCACI,gBAAkB,CACrB,AACD,0BACI,gBAAiB,AACjB,sBAAwB,AACxB,iBAAkB,AAClB,eAAgB,AAChB,yBAA0B,AAC1B,wBAA0B,CAC7B,AACD,yCACM,gBAAkB,CACvB,AACD,oCACA,gCACM,uBAA4B,CACjC,AACD,yCACM,qBAAwB,CAC7B,CACA",file:"TargetTimeLine.vue",sourcesContent:["\n.timeline-page {\n  /* The side navigation menu */\n  /* The navigation menu links */\n  /* When you mouse over the navigation links, change their color */\n  /* Position and style the close button (top right corner) */\n  /* Style page content - use this if you want to push the page content to the right when you open the side navigation */\n  /* On smaller screens, where height is less than 450px, change the style of the sidenav (less padding and a smaller font size) */\n}\n.timeline-page .red-badge {\n    color: red;\n}\n.timeline-page .red-badge .el-badge__content {\n      background-color: red;\n      color: white;\n}\n.timeline-page .el-badge__content {\n    background-color: #ececec;\n    color: black;\n}\n.timeline-page .hr {\n    margin-top: 10px;\n    padding-top: 10px;\n    border-top: 1px dashed black;\n}\n.timeline-page .hr .row {\n      float: right;\n}\n.timeline-page .chkbx {\n    margin: 0px;\n}\n.timeline-page .sidenav {\n    height: 100%;\n    /* 100% Full-height */\n    width: 0;\n    /* 0 width - change this with JavaScript */\n    position: fixed;\n    /* Stay in place */\n    z-index: 1;\n    /* Stay on top */\n    top: 50;\n    /* Stay at the top */\n    right: 0;\n    background-color: white;\n    /* Black*/\n    overflow-x: hidden;\n    /* Disable horizontal scroll */\n    padding-top: 30px;\n    /* Place content 60px from the top */\n    -webkit-transition: 0.5s;\n    transition: 0.5s;\n    /* 0.5 second transition effect to slide in the sidenav */\n}\n.timeline-page .sidenav a {\n    text-decoration: none;\n    font-size: 25px;\n    color: #818181;\n    display: block;\n    -webkit-transition: 0.3s;\n    transition: 0.3s;\n}\n.timeline-page .menuTab {\n    padding-left: 5px;\n}\n.timeline-page .sidenav a:hover {\n    color: #f1f1f1;\n}\n.timeline-page .sidenav .closebtn {\n    position: absolute;\n    top: 0;\n    right: 10px;\n    font-size: 25px;\n    margin-left: 50px;\n}\n.timeline-page #main {\n    -webkit-transition: margin-left .5s;\n    transition: margin-left .5s;\n    padding: 20px;\n}\n.timeline-page #main .el-select {\n      padding-bottom: 10px;\n}\n@media screen and (max-height: 450px) {\n.timeline-page .sidenav {\n      padding-top: 15px;\n}\n.timeline-page .sidenav a {\n      font-size: 18px;\n}\n}\n@media screen and (max-width: 768px) {\n.timeline-page .el-date-range-picker {\n      overflow: auto !important;\n      width: 100% !important;\n}\n}\n.timeline-page .left-scroll {\n    max-height: 100vh;\n    overflow-y: scroll;\n}\n.timeline-page .right-scroll {\n    max-height: 200vh;\n    overflow-y: scroll;\n}\n@media screen and (max-width: 1366px) {\n.timeline-page .left-scroll {\n      max-height: 79vh;\n      overflow-y: scroll;\n}\n.timeline-page .right-scroll {\n      max-height: 49vh;\n      overflow-y: scroll;\n}\n}\n@media screen and (max-width: 1366px) and (max-width: 375px) {\n.timeline-page .left-scroll {\n    max-height: 77vh;\n    overflow-y: scroll;\n}\n}\n.timeline-page .pd-right-10 {\n    padding-right: 10px;\n}\n.timeline-page .padding-0 {\n    padding: 0 !important;\n}\n.timeline-page .b-600 {\n    font-weight: 600;\n}\n.timeline-page body {\n    font-size: 13px;\n}\n.timeline-page .span-block-border {\n    text-align: center;\n    width: 60%;\n    display: inline-block;\n}\n.timeline-page .span-block-border span {\n      margin: auto;\n}\n.timeline-page .span-block-border .el-progress-bar__outer, .timeline-page .span-block-border .el-progress-bar__inner {\n      border-radius: 0px;\n}\n.timeline-page .el-progress-bar__innerText {\n    color: #0b0e0f;\n}\n.timeline-page .el-card__body {\n    padding: 5px 14px 5px 5px !important;\n}\n.timeline-page .center-div {\n    margin-left: auto;\n    margin-right: auto;\n    text-align: center;\n    width: auto;\n}\n.timeline-page .status .el-main {\n    margin-bottom: 10px;\n}\n.timeline-page .rightaligndiv {\n    padding-right: 5px;\n}\n.timeline-page .el-card {\n    margin-bottom: 5px;\n    width: 100%;\n    overflow: visible;\n}\n.timeline-page .round-image {\n    border-radius: 50%;\n    max-height: 50px;\n    display: block;\n    margin: auto;\n}\n.timeline-page .target-header {\n    font-size: 16px;\n}\n.timeline-page .el-container {\n    color: #333;\n    padding-top: 5px;\n}\n.timeline-page .el-main {\n    padding: 0px;\n}\n.timeline-page .el-main .el-container {\n      padding: 5px;\n}\n.timeline-page .el-checkbox__label {\n    margin-right: 5px;\n}\n.timeline-page .el-header {\n    padding-top: 5px;\n    height: 32px !important;\n    line-height: 27px;\n    font-size: 16px;\n    background-color: #f0f3f5;\n    border: 1px solid #c2cfd6;\n}\n.timeline-page .el-header .rightaligndiv {\n      text-align: right;\n}\n@media screen and (max-width: 599px) {\n.timeline-page .container-fluid {\n      padding: 0px 5px !important;\n}\n.timeline-page .timeline-page .el-header {\n      height: 32px !important;\n}\n}\n"],sourceRoot:""}])},1111:function(e,t,a){"use strict";var r=a(3),s=a(1070);t.a={inject:["getDayName"],extends:s.a,props:["datasrc"],data:function(){return{timeline:[]}},watch:{datasrc:function(e){this.timeline=this.$Lodash.orderBy(e,["Modified"],["desc"])}},methods:{overDue:function(e,t){var a=t?r.default.moment(e,t):r.default.moment(e),s=r.default.moment(Date.Now);return a.diff(s,"days")},totalUsers:function(e){return e?e.split(",").length:0}}}},1112:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"timeline-page"},[a("el-container",{attrs:{direction:"vertical"}},[e._l(e.timeline,function(t){return a("el-card",{key:t.Id,staticClass:"box-card"},[a("div",{staticClass:"text item"},[a("el-row",{staticStyle:{display:"flex","align-items":"center"}},[a("el-col",{staticClass:"mr-2",attrs:{xs:4,md:3}},[a("div",[a("div",{staticStyle:{"text-align":"center"}},[t.Avatar?a("img",{staticClass:"round-image",attrs:{src:e.loadAvatar(t.Avatar)}}):a("i",{staticClass:"fa fa-users fa-2x"})]),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("div",{staticStyle:{overflow:"hidden"}},[e._v("                            \n                            "+e._s("1"===t.TargetType?t.GroupName:t.OwnerName)+"\n                         ")]),e._v(" "),a("div",{staticClass:"b-600"},[e._v(e._s(e.getDayName(t.Modified)))])])])]),e._v(" "),a("el-col",{attrs:{xs:20,md:21}},[a("el-row",[a("span",{staticClass:"b-600"},[e._v("Tên:\n                        "),a("a",{attrs:{href:"javascript:void(0)"},on:{click:function(a){e.fnOpenDetail(t,!1)}}},[a("span",[e._v("\n                            "+e._s(t.Name)+"\n                          ")])])]),e._v(" "),a("br"),e._v(" "),a("span",[a("span",{staticClass:"b-600"},[e._v("Bắt đầu: ")]),e._v(" "+e._s(e.$Utils.formatDateTime(t.ActualStartDate,"DD/MM/YYYY"))+"| \n                          "),a("span",{staticClass:"b-600"},[e._v("Kết thúc:  ")]),e._v("  "+e._s(e.$Utils.formatDateTime(t.ActualFinishDate,"DD/MM/YYYY"))+"| \n                          "),a("span",{staticClass:"b-600"},[e._v("Kế hoạch: ")]),e._v("  "+e._s(t.Plan)+"|                               \n                          "),a("span",{staticClass:"b-600"},[e._v("Kết quả: ")]),e._v("  "+e._s(t.Done)+"|\n                          "),a("span",{staticClass:"b-600"},[e._v("Đơn vị tính: ")]),e._v(" "+e._s(t.Unit)+"|\n                          "),a("span",{staticClass:"b-600"},[e._v("Thực hiện: ")]),e._v(" "+e._s(t.AssignedName)+"\n                        ")])]),e._v(" "),a("el-row",{staticClass:"mt-2"},[a("el-col",{attrs:{xs:24,md:6}},[a("el-row",{staticStyle:{"text-align":"left"}},[a("el-col",{attrs:{xs:12,md:11}},[a("span",{staticClass:"b-600"},[e._v("Hoàn thành:")])]),e._v(" "),a("el-col",{attrs:{xs:12,md:13}},[a("div",{staticClass:"span-block-border"},[a("el-progress",{attrs:{"text-inside":!0,"stroke-width":18,percentage:parseFloat(t.Progress),status:t.Progress?parseFloat(t.Progress)>=100?"success":0===parseFloat(t.Progress)?"0":"":"0"}})],1)])],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,md:5}},[a("el-row",{staticStyle:{"text-align":"left"}},[a("el-col",{attrs:{xs:12,md:11}},[a("span",{staticClass:"b-600"},[e._v("Quền xem: ")])]),e._v(" "),a("el-col",{attrs:{xs:12,md:13}},[a("div",{staticClass:"span-block-border"},[a("span",[e._v(e._s("1"===t.IsPublic?"Công khai":"Riêng tư"))])])])],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,md:7}},[a("el-row",{staticStyle:{"text-align":"left"}},[a("el-col",{attrs:{xs:12,md:11}},[a("span",{staticClass:"b-600"},[e._v("Loại: ")])]),e._v(" "),a("el-col",{attrs:{xs:12,md:13}},[a("div",{staticClass:"span-block-border"},[a("span",[e._v(e._s(t.TargetTypeName.replace("Mục tiêu","").toUpperCase()))])])])],1)],1),e._v(" "),e.$isMobileDevice?a("el-col",{staticClass:"hr"},[a("div",{staticClass:"row"},[a("div",{class:parseFloat(e.overDue(t.ActualFinishDate)+"")<0?"red-badge col":"col"},[a("el-badge",{staticClass:"item",attrs:{value:e.overDue(t.ActualFinishDate),max:99}},[a("i",{staticClass:"fa fa-calendar"})])],1),e._v(" "),a("div",{staticClass:"col"},[a("el-badge",{staticClass:"item",attrs:{value:e.totalUsers(t.AssignedName),max:99}},[a("i",{staticClass:"fa fa-users "})])],1),e._v(" "),a("div",{staticClass:"col"},[a("div",{staticStyle:{color:"red"}},[a("i",{class:"1"===t.IsPublic?"":"fa fa-minus-circle"})])])])]):a("el-col",{attrs:{md:6}},[a("el-row",[a("el-col",{attrs:{span:6,offset:8}},[a("div",{class:parseFloat(e.overDue(t.ActualFinishDate)+"")<0?"red-badge":""},[a("el-badge",{staticClass:"item",attrs:{value:e.overDue(t.ActualFinishDate),max:99}},[a("i",{staticClass:"fa fa-calendar"})])],1)]),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-badge",{staticClass:"item",attrs:{value:e.totalUsers(t.AssignedName),max:99}},[a("i",{staticClass:"fa fa-users "})])],1),e._v(" "),a("el-col",{staticStyle:{cursor:"pointer"},attrs:{span:2}},[a("div",{staticStyle:{color:"red"}},[a("i",{class:"1"===t.IsPublic?"":"fa fa-minus-circle"})])])],1)],1)],1)],1)],1)],1)])}),e._v(" "),0==e.timeline.length?a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"center-div"},[e._v("Không có dữ liệu")])]):e._e()],2)],1)},s=[],i={render:r,staticRenderFns:s};t.a=i},1113:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{attrs:{id:"target-part"}},[a("el-header",{staticStyle:{height:"auto"}},[a("div",{staticStyle:{flex:"1",display:"flex","align-items":"center","justify-content":"space-between","font-size":"14px","padding-right":"8px"}},[a("div",{attrs:{span:1}}),e._v(" "),a("div",{staticClass:"my-row row"},[e.ListType&&"settingTargets"!==e.TargetTab?a("div",{staticClass:"col"},[a("el-select",{attrs:{placeholder:"Loại mục tiêu"},model:{value:e.filter.targetTypeId,callback:function(t){e.$set(e.filter,"targetTypeId",t)},expression:"filter.targetTypeId"}},e._l(e.ListType,function(t){return e.ListType.length>0?a("el-option",{key:t.Id,attrs:{label:t.Name,value:t.Id}}):e._e()}))],1):e._e(),e._v(" "),e.filteredListGroup&&"settingTargets"!==e.TargetTab?a("div",{staticClass:"col"},[a("el-select",{attrs:{multiple:"","collapse-tags":"",placeholder:"Phòng ban"},model:{value:e.filter.departmentIds,callback:function(t){e.$set(e.filter,"departmentIds",t)},expression:"filter.departmentIds"}},e._l(e.filteredListGroup,function(e){return a("el-option",{key:e.Id,attrs:{label:e.GroupName,value:e.GroupId}})}))],1):e._e(),e._v(" "),"settingTargets"!==e.TargetTab?a("div",{staticClass:"col"},[a("el-select",{attrs:{placeholder:"Lọc nhân sự",size:"mini",multiple:"","collapse-tags":""},model:{value:e.filter.selectedWorkers,callback:function(t){e.$set(e.filter,"selectedWorkers",t)},expression:"filter.selectedWorkers"}},e._l(e.ListWorker,function(t){return-1==t.UserId.indexOf(";")&&1==t.Status?a("el-option",{key:t.UserId,attrs:{label:t.Username,value:t.UserId}}):e._e()}))],1):e._e(),e._v(" "),a("div",{staticClass:"col"},[a("el-select",{attrs:{placeholder:"Tuần"},model:{value:e.filter.startDateValue,callback:function(t){e.$set(e.filter,"startDateValue",t)},expression:"filter.startDateValue"}},e._l(e.years,function(t){return e.years?a("el-option-group",{key:t.year,attrs:{label:t.year}},e._l(t.weeks,function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.value}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.name)+"     ")]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.text))])])})):e._e()}))],1)])])]),e._v(" "),a("el-container",[a("el-aside",{directives:[{name:"show",rawName:"v-show",value:e.showMenu,expression:"showMenu"}],staticClass:"hidden-xs-only",staticStyle:{"background-color":"rgb(238, 241, 246)","min-width":"300px"}},[a("BlockLeftPanelTarget",{attrs:{title:"Của tôi",vList:e.myTargetLst,fnOpenDetail:e.openTargetDetail}}),e._v(" "),a("BlockLeftPanelTarget",{attrs:{title:"Tôi quản lý",vList:e.myManagedTargetLst,fnOpenDetail:e.openTargetDetail}}),e._v(" "),a("BlockLeftPanelTarget",{attrs:{title:"Được xem",vList:e.publicTargetLst,fnOpenDetail:e.openTargetDetail}})],1),e._v(" "),a("div",{staticClass:"hidden-xs-only",staticStyle:{cursor:"pointer"},on:{click:function(t){e.onShowMenu(e.showMenu)}}},[e.showMenu?e._e():a("el-tooltip",{attrs:{content:"Mở rộng",placement:"top"}},[a("i",{staticClass:"fa fa-chevron-circle-right fa-lg mt-4 pl-1 pr-1"})]),e._v(" "),e.showMenu?a("el-tooltip",{attrs:{content:"Thu gọn",placement:"top"}},[a("i",{staticClass:"fa fa-chevron-circle-left fa-lg mt-4 pl-1 pr-1"})]):e._e()],1),e._v(" "),a("el-main",{staticStyle:{overflow:"hidden"},attrs:{id:"mainTarget"}},[a("div",{staticClass:"hidden-sm-and-up"},[a("el-collapse",[a("el-collapse-item",{attrs:{title:"Phân loại mục tiêu"}},[a("BlockLeftPanelTarget",{attrs:{title:"Của tôi",vList:e.myTargetLst,fnOpenDetail:e.openTargetDetail}}),e._v(" "),a("BlockLeftPanelTarget",{attrs:{title:"Tôi quản lý",vList:e.myManagedTargetLst,fnOpenDetail:e.openTargetDetail}}),e._v(" "),a("BlockLeftPanelTarget",{attrs:{title:"Được xem",vList:e.publicTargetLst,fnOpenDetail:e.openTargetDetail}})],1)],1)],1),e._v(" "),a("el-tabs",{on:{"tab-click":e.changeTab},model:{value:e.TargetTab,callback:function(t){e.TargetTab=t},expression:"TargetTab"}},[a("el-tab-pane",{attrs:{label:"Công việc tuần",name:"weekTasks"}},["weekTasks"==e.TargetTab&&e.Display?a("div",{attrs:{flex:""}},[a("WeekTask",{attrs:{datasrc:e.dataToPass}})],1):e._e()]),e._v(" "),a("el-tab-pane",{attrs:{label:"Mục tiêu tuần",name:"weekTargets"}},["weekTargets"===e.TargetTab&&e.Display?a("div",{attrs:{id:"configuration-list-detail"}},[a("span",{staticClass:"mr-2",style:"cursor: pointer;"+(e.isShowTimeLine?"":"color:#20a8d8;"),on:{click:function(t){e.isShowTimeLine=!1}}},[a("i",{staticClass:"fa fa-table"},[e._v(" Bảng")])]),e._v(" "),a("span",{style:"cursor: pointer;"+(e.isShowTimeLine?"color:#20a8d8;":""),on:{click:function(t){e.isShowTimeLine=!0}}},[a("i",{staticClass:"fa fa-th-list"},[e._v(" Thời gian")])]),e._v(" "),a("TargetTimeLine",{directives:[{name:"show",rawName:"v-show",value:e.isShowTimeLine,expression:"isShowTimeLine"}],attrs:{datasrc:e.$Lodash.concat(e.myTargetLst,e.myManagedTargetLst,e.publicTargetLst),fnOpenDetail:e.openTargetDetail}}),e._v(" "),a("WeekTarget",{directives:[{name:"show",rawName:"v-show",value:!e.isShowTimeLine,expression:"!isShowTimeLine"}],attrs:{datasrc:e.dataToPass}})],1):e._e()]),e._v(" "),a("el-tab-pane",{attrs:{label:"Nhập mục tiêu",name:"settingTargets"}},["settingTargets"==e.TargetTab&&e.Display?a("div",{attrs:{flex:""}},[a("TargetSetting",{attrs:{options:{key:"Id",parentKey:"ParentId",levelKey:"Level",rootLevel:6},typeLst:e.ListType,workerLst:e.ListWorker,departmentLst:e.ListGroup,targetLst:e.targetLst,targetFieldLst:e.targetFields,getTargets:e.getTargets,getObject:e.getObject,rootId:e.ParentId,targetSavedLst:e.targetSavedLst,years:e.years,months:e.months,firstDayOfWeekCfg:e.firstDayOfWeekCfg}})],1):e._e()])],1)],1)],1)],1)},s=[],i={render:r,staticRenderFns:s};t.a=i},933:function(e,t,a){"use strict";function r(e){a(987)}Object.defineProperty(t,"__esModule",{value:!0});var s=a(989),i=a(990),n=a(0),l=r,o=n(s.a,i.a,!1,l,"data-v-6136c48e",null);t.default=o.exports},934:function(e,t,a){"use strict";function r(e){a(991)}Object.defineProperty(t,"__esModule",{value:!0});var s=a(993),i=a(994),n=a(0),l=r,o=n(s.a,i.a,!1,l,null,null);t.default=o.exports},935:function(e,t,a){"use strict";function r(e){a(995)}Object.defineProperty(t,"__esModule",{value:!0});var s=a(997),i=a(1007),n=a(0),l=r,o=n(s.a,i.a,!1,l,null,null);t.default=o.exports},951:function(e,t,a){"use strict";function r(e){a(1101)}Object.defineProperty(t,"__esModule",{value:!0});var s=a(1103),i=a(1113),n=a(0),l=r,o=n(s.a,i.a,!1,l,null,null);t.default=o.exports},967:function(e,t,a){!function(t,a){e.exports=a()}(0,function(){return function(e){function t(r){if(a[r])return a[r].exports;var s=a[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var a={};return t.m=e,t.c=a,t.d=function(e,a,r){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=0)}([function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.dragscroll={init:function(e,t){var a=void 0,r=void 0,s=function(){var s=void 0,i=void 0,n=void 0;e.addEventListener("mousedown",e.md=function(a){var r="nochilddrag"===t.arg,l="firstchilddrag"===t.arg,o=document.elementFromPoint(a.pageX-window.pageXOffset,a.pageY-window.pageYOffset)===e,d=document.elementFromPoint(a.pageX-window.pageXOffset,a.pageY-window.pageYOffset)===e.firstChild,c=function(e){n=1,s=e.clientX,i=e.clientY,e.preventDefault()};r?o&&c(a):l?(o||d)&&c(a):c(a)},0),window.addEventListener("mouseup",e.mu=function(){n=0},0),window.addEventListener("mousemove",e.mm=function(l){n&&(t.modifiers.x?(e.scrollLeft-=a=-s+(s=l.clientX),e===document.body&&(e.scrollLeft-=a)):t.modifiers.y?(e.scrollTop-=r=-i+(i=l.clientY),e===document.body&&(e.scrollTop-=r)):(e.scrollLeft-=a=-s+(s=l.clientX),e.scrollTop-=r=-i+(i=l.clientY),e===document.body&&(e.scrollLeft-=a,e.scrollTop-=r)))},0)};void 0===t.value||!0===t.value?"complete"===document.readyState?s():window.addEventListener("load",s,0):(t.value&&console.error("The passed value should be either 'undefined', 'true' or 'false'."),e.removeEventListener("mousedown",e.md,0),window.removeEventListener("mouseup",e.mu,0),window.removeEventListener("mousemove",e.mm,0))},bind:function(e,t,a){t.def.init(e,t)},update:function(e,t,a,r){t.value!==t.oldValue&&t.def.init(e,t)},unbind:function(e,t,a){e.removeEventListener("mousedown",e.md,0),window.removeEventListener("mouseup",e.mu,0),window.removeEventListener("mousemove",e.mm,0)}},s={install:function(e,t){e.directive("dragscroll",r)}};"undefined"!=typeof window&&window.Vue&&(window.VueDragscroll=s,window.Vue.use(s)),t.default=s}])})},985:function(e,t,a){"use strict";function r(e){a(998)}var s=a(1e3),i=a(1006),n=a(0),l=r,o=n(s.a,i.a,!1,l,"data-v-c9eec43c",null);t.a=o.exports},987:function(e,t,a){var r=a(988);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(932)("9b0a30e6",r,!0)},988:function(e,t,a){t=e.exports=a(931)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"WeekTarget.vue",sourceRoot:""}])},989:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_vue__=__webpack_require__(3),__WEBPACK_IMPORTED_MODULE_1_vue_dragscroll__=__webpack_require__(967),__WEBPACK_IMPORTED_MODULE_1_vue_dragscroll___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_vue_dragscroll__);__WEBPACK_IMPORTED_MODULE_0_vue__.default.use(__WEBPACK_IMPORTED_MODULE_1_vue_dragscroll___default.a),__WEBPACK_IMPORTED_MODULE_0_vue__.default.use(__webpack_require__(40)),__webpack_exports__.a={name:"WeekTarget",component:{},props:["datasrc"],inject:["taskDone","statusColors"],data:function(){return{}},methods:{onShowMenu:function(e,t){var a=this;a.datasrc.cells[e].ShowMenu=!t;for(var r=e+1;r<a.datasrc.cells.length;r++)if(a.datasrc.cells[e+1]&&(!a.datasrc.cells[e+1].Level||a.datasrc.cells[e+1].Level>a.datasrc.cells[e].Level)&&!t){if(a.datasrc.cells[e+1]&&a.datasrc.cells[e+1].Level){if(a.datasrc.cells[r].Level==a.datasrc.cells[e+1].Level)a.datasrc.cells[r].Display=!t;else if(a.datasrc.cells[r].Level!=a.datasrc.cells[e+1].Level)return!1}else if(a.datasrc.cells[e+1]&&!a.datasrc.cells[e+1].Level&&(a.datasrc.cells[r].Display=!t,a.datasrc.cells[r+1]&&a.datasrc.cells[r+1].Level))return!1}else if(a.datasrc.cells[e+1]&&a.datasrc.cells[e+1].Level){if(a.datasrc.cells[r].Display=!t,a.datasrc.cells[r].ShowMenu=!t,a.datasrc.cells[r+1]&&a.datasrc.cells[r+1].Level==a.datasrc.cells[e].Level)return!1}else if(a.datasrc.cells[e+1]&&!a.datasrc.cells[e+1].Level&&(a.datasrc.cells[r].Display=!t,a.datasrc.cells[r+1]&&a.datasrc.cells[r+1].Level))return!1},convertSpendTime:function convertSpendTime(data){var exp="";return exp=Math.abs(data)>=24?parseFloat(eval(data)/24).toFixed(0)+" ngày":0!=data?data+" giờ":data},getWeekthisYear:function(){this.arrWeek=[];var e=moment().week();__WEBPACK_IMPORTED_MODULE_0_vue__.default.moment().isoWeekday()>=5&&(e+=1);for(var t=e;t>0;t--){var a=__WEBPACK_IMPORTED_MODULE_0_vue__.default.moment(this.thisYear.toString(),"YYYY").add(t,"weeks").startOf("isoweek").format("DD/MM/YYYY"),r=__WEBPACK_IMPORTED_MODULE_0_vue__.default.moment(this.thisYear.toString(),"YYYY").add(t,"weeks").endOf("isoweek").format("DD/MM/YYYY"),s={name:"Tuần "+t+" ("+a+" - "+r+")",value:t};this.arrWeek.push(s)}this.model.WeekNumber=__WEBPACK_IMPORTED_MODULE_0_vue__.default.moment().isoWeek(),this.bindObjWeek()},bindObjWeek:function(){this.isWeek="true",this.firstDayOfWeek(this.thisYear,this.model.WeekNumber,!0)},firstDayOfWeek:function(e,t,a){this.model.PlanStartDateStartValue=new Date(e,0,1);var r=this.model.PlanStartDateStartValue.getTimezoneOffset();this.model.PlanStartDateStartValue.setDate(this.model.PlanStartDateStartValue.getDate()+4-(this.model.PlanStartDateStartValue.getDay()||7)),this.model.PlanStartDateStartValue.setTime(this.model.PlanStartDateStartValue.getTime()+6048e5*(t+(e==this.model.PlanStartDateStartValue.getFullYear()?-1:0))),this.model.PlanStartDateStartValue.setTime(this.model.PlanStartDateStartValue.getTime()+60*(this.model.PlanStartDateStartValue.getTimezoneOffset()-r)*1e3),this.model.PlanStartDateStartValue.setDate(this.model.PlanStartDateStartValue.getDate()-3);var s=angular.copy(this.model.PlanStartDateStartValue);s.setDate(this.model.PlanStartDateStartValue.getDate()-this.model.PlanStartDateStartValue.getDay()+(0==this.model.PlanStartDateStartValue.getDay()?-6:1)+6),s.setHours(23,59,59),this.model.PlanStartDateEndValue=s,a||this.getObject()}},created:function(){}}},990:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"dragscroll",rawName:"v-dragscroll"}],staticClass:"el-table__body-wrapper grab-bing"},[a("table",[a("thead",[a("tr",[a("th",{staticClass:"default-column",attrs:{rowspan:"2"}},[e._v("Stt")]),e._v(" "),a("th",{staticClass:"mt",attrs:{rowspan:"2"}},[e._v("Mục tiêu / Công việc")]),e._v(" "),a("th",{staticClass:"default-column",attrs:{rowspan:"2"}},[e._v("KPIs kế hoạch")]),e._v(" "),a("th",{staticClass:"default-column",attrs:{rowspan:"2"}},[e._v("KPIs đạt được")]),e._v(" "),a("th",{staticClass:"default-column",attrs:{rowspan:"2"}},[e._v("Hoàn thành")]),e._v(" "),a("th",{staticClass:"c",attrs:{rowspan:"2"}}),e._v(" "),e.datasrc.ListCols["Kế hoạch"]?a("th",{attrs:{colspan:e.datasrc.ListCols["Kế hoạch"].length}},[e._v("Kế hoạch")]):e._e(),e._v(" "),a("th",{staticClass:"c",attrs:{rowspan:"2"}}),e._v(" "),e.datasrc.ListCols["Thực hiện"]?a("th",{attrs:{colspan:e.datasrc.ListCols["Thực hiện"].length}},[e._v("Thực hiện")]):e._e()]),e._v(" "),a("tr",[e._l(e.datasrc.ListCols["Kế hoạch"],function(t){return e.datasrc.ListCols["Kế hoạch"]?a("th",{staticClass:"default-column",class:"cl-"+t.Name},[e._v(e._s(t.Caption))]):e._e()}),e._v(" "),e._l(e.datasrc.ListCols["Thực hiện"],function(t){return e.datasrc.ListCols["Thực hiện"]?a("th",{staticClass:"default-column",class:"cl-"+t.Name},[e._v(e._s(t.Caption))]):e._e()})],2)]),e._v(" "),a("tbody",e._l(e.datasrc.cells,function(t,r){return e.datasrc.cells&&t.Display?a("tr",{class:void 0!=t.CellType?t.CellType:" Level"+t.Index},[a("td",{staticClass:"default-column text-left pl-4"},[a("span",{class:t.Index.length>1?"":"caption"},[t.Level&&e.datasrc.cells[r+1]&&!e.datasrc.cells[r+1].Level?a("span",{staticStyle:{cursor:"pointer"},on:{click:function(a){e.onShowMenu(r,t.ShowMenu)}}},[t.ShowMenu?a("i",{staticClass:"el-icon-caret-bottom  mt-4 pr-1"}):e._e(),e._v(" "),t.ShowMenu?e._e():a("i",{staticClass:"el-icon-caret-right  mt-4 pr-1"})]):e._e(),e._v(" "),a("span",{style:"text-decoration:"+(e.taskDone.indexOf(t.Status)>-1?"line-through":"")},[e._v(e._s(t.Index))])])]),e._v(" "),a("td",[a("span",{staticClass:"icon Level"}),e._v(" "),"h"==t.CellType?a("span",[e._v(e._s(t.Name))]):e._e(),e._v(" "),"h"!=t.CellType?a("router-link",{attrs:{to:"/dynamic/view/Index="+t.Index}},[a("span",{style:"text-decoration:"+(e.taskDone.indexOf(t.Status)>-1?"line-through":"")},[e._v(e._s(t.Name))])]):e._e()],1),e._v(" "),a("td",{staticClass:"default-column"},[e._v(e._s(t.TargetPlan)+e._s(t.Unit))]),e._v(" "),a("td",{staticClass:"default-column"},[e._v(e._s(t.TargetDone)+e._s(t.Unit))]),e._v(" "),a("td",{staticClass:"default-column"},["h"==t.CellType?a("el-progress",{attrs:{"text-inside":!0,"stroke-width":18,percentage:t.TargetProgress?parseInt(t.TargetProgress):0,status:t.TargetProgress?parseInt(t.TargetProgress)>=100?"success":0==parseInt(t.TargetProgress)?"exception":"":"exception"}}):e._e()],1),e._v(" "),a("td",{staticClass:"c default-column",staticStyle:{"border-right":"1px solid #ddd !important"}}),e._v(" "),e._l(e.datasrc.ListCols["Kế hoạch"],function(r){return e.datasrc.ListCols["Kế hoạch"]?a("td",{class:"default-column tg-"+r.Name},[r.Redirect?a("router-link",{attrs:{to:"/dynamic/view/Index="+t.Index}},[e._v(e._s(t[r.DynamicText?r.DynamicText:r.Expression?r.Expression:r.Name]))]):e._e(),e._v(" "),r.Format&&"DateTime"==r.FieldColumnType?a("span",[e._v(e._s(t[r.DynamicText?r.DynamicText:r.Expression?r.Expression:r.Name]?e.$Utils.formatDateTime(t[r.DynamicText?r.DynamicText:r.Expression?r.Expression:r.Name],"h"==t.CellType?"DD/MM/YYYY":"DD/MM/YYYY HH:mm"):""))]):e._e(),e._v(" "),"DateTime"==r.FieldColumnType||r.Redirect?e._e():a("span",[e._v(e._s(t[r.DynamicText?r.DynamicText:r.Expression?r.Expression:r.Name]))])],1):e._e()}),e._v(" "),a("td",{staticClass:"c default-column",staticStyle:{"border-right":"1px solid #ddd !important"}}),e._v(" "),e._l(e.datasrc.ListCols["Thực hiện"],function(r){return e.datasrc.ListCols["Thực hiện"]?a("td",{class:"default-column tg-"+r.Name},[r.Redirect?a("router-link",{attrs:{to:"/dynamic/view/Index="+t.Index}},[e._v(e._s(t[r.DynamicText?r.DynamicText:r.Expression?r.Expression:r.Name]))]):e._e(),e._v(" "),"SpentTime"==r.Expression?a("a",[e._v(e._s(e.convertSpendTime(t.SpentTime))+"\n                             "),"h"!=t.CellType?a("i",{staticClass:"fa  fa-clock-o fa-lg mt-4",style:{color:t.SpentTime<0?"red":"blue"}}):e._e()]):e._e(),e._v(" "),"Progress"==r.Name&&"h"!=t.CellType?a("el-progress",{attrs:{"text-inside":!0,"stroke-width":18,percentage:t.Progress?parseInt(t.Progress):0,status:void 0!=t.Progress?parseInt(t.Progress)>=100?"success":0==parseInt(t.Progress)?"exception":"":"exception"}}):e._e(),e._v(" "),"Progress"==r.Name&&"h"==t.CellType?a("span",[e._v(e._s(t.Progress)+"%")]):e._e(),e._v(" "),r.Format&&"DateTime"==r.FieldColumnType?a("span",[e._v(e._s(e.$Utils.formatDateTime(t[r.DynamicText?r.DynamicText:r.Expression?r.Expression:r.Name],"DD/MM/YYYY HH:mm")))]):e._e(),e._v(" "),"DateTime"==r.FieldColumnType||r.Redirect||"SpentTime"==r.Expression||"Progress"==r.Name?e._e():a("div",{style:"h"!=t.CellType&&void 0!=t.Status&&"StatusName"===r.Name?"background-color: "+e.statusColors[t.Status.toUpperCase()]:""},[e._v(e._s(t[r.DynamicText?r.DynamicText:r.Expression?r.Expression:r.Name]))])],1):e._e()})],2):e._e()}))])])},s=[],i={render:r,staticRenderFns:s};t.a=i},991:function(e,t,a){var r=a(992);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(932)("55c56c5a",r,!0)},992:function(e,t,a){t=e.exports=a(931)(!0),t.push([e.i,".el-progress--circle .el-progress__text{font-size:12px!important}","",{version:3,sources:["/Users/yuukininomae/Sites/vue-crm2/src/components/static/WeekTask.vue"],names:[],mappings:"AACA,wCACE,wBAA2B,CAC5B",file:"WeekTask.vue",sourcesContent:["\n.el-progress--circle .el-progress__text {\n  font-size: 12px !important;\n}\n"],sourceRoot:""}])},993:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_vue__=__webpack_require__(3),__WEBPACK_IMPORTED_MODULE_1_vue_dragscroll__=__webpack_require__(967),__WEBPACK_IMPORTED_MODULE_1_vue_dragscroll___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_vue_dragscroll__);__WEBPACK_IMPORTED_MODULE_0_vue__.default.use(__WEBPACK_IMPORTED_MODULE_1_vue_dragscroll___default.a),__WEBPACK_IMPORTED_MODULE_0_vue__.default.use(__webpack_require__(40)),__webpack_exports__.a={name:"WeekTask",props:["datasrc"],inject:["taskDone","statusColors"],data:function(){return{}},methods:{onShowMenu:function(e,t){var a=this;a.datasrc.cells[e].ShowMenu=!t;for(var r=e+1;r<a.datasrc.cells.length;r++)if(a.datasrc.cells[e+1]&&(!a.datasrc.cells[e+1].Level||a.datasrc.cells[e+1].Level>a.datasrc.cells[e].Level)&&!t){if(a.datasrc.cells[e+1]&&a.datasrc.cells[e+1].Level){if(a.datasrc.cells[r].Level==a.datasrc.cells[e+1].Level)a.datasrc.cells[r].Display=!t;else if(a.datasrc.cells[r].Level!=a.datasrc.cells[e+1].Level)return!1}else if(a.datasrc.cells[e+1]&&!a.datasrc.cells[e+1].Level&&(a.datasrc.cells[r].Display=!t,a.datasrc.cells[r+1]&&a.datasrc.cells[r+1].Level))return!1}else if(a.datasrc.cells[e+1]&&a.datasrc.cells[e+1].Level){if(a.datasrc.cells[r].Display=!t,a.datasrc.cells[r].ShowMenu=!t,a.datasrc.cells[r+1]&&a.datasrc.cells[r+1].Level==a.datasrc.cells[e].Level)return!1}else if(a.datasrc.cells[e+1]&&!a.datasrc.cells[e+1].Level&&(a.datasrc.cells[r].Display=!t,a.datasrc.cells[r+1]&&a.datasrc.cells[r+1].Level))return!1},convertSpendTime:function convertSpendTime(data){var exp="";return exp=Math.abs(data)>=24?parseFloat(eval(data)/24).toFixed(0)+" ngày":0!=data?data+" giờ":data}},created:function(){}}},994:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"source"},[a("div",{directives:[{name:"dragscroll",rawName:"v-dragscroll"}],staticClass:"el-table__body-wrapper grab-bing"},[a("table",[a("thead",[a("tr",[a("th",{staticClass:"tgWeek default-column",attrs:{rowspan:"2"}},[e._v(e._s(e.datasrc.TypeName))]),e._v(" "),e.datasrc.ListCols["Kế hoạch"]?a("th",{staticClass:"default-column",attrs:{colspan:e.datasrc.ListCols["Kế hoạch"].length}},[e._v("Kế hoạch")]):e._e(),e._v(" "),a("th",{staticClass:"c default-column",attrs:{rowspan:"2"}}),e._v(" "),e.datasrc.ListCols["Thực hiện"]?a("th",{staticClass:"default-column",attrs:{colspan:e.datasrc.ListCols["Thực hiện"].length}},[e._v("Thực hiện")]):e._e()]),e._v(" "),a("tr",[e._l(e.datasrc.ListCols["Kế hoạch"],function(t){return a("th",{class:"default-column cl-"+t.Name},[e._v(e._s(t.Caption))])}),e._v(" "),e._l(e.datasrc.ListCols["Thực hiện"],function(t){return a("th",{class:"default-column cl-"+t.Name},[e._v(e._s(t.Caption))])})],2)]),e._v(" "),e.datasrc.cells?a("tbody",{staticStyle:{"background-color":"white"}},e._l(e.datasrc.cells,function(t,r){return t.Display?a("tr",{class:t.CellType,style:"h"==t.CellType?"background-color:#f50808 ; color: white; font-weight:bold; font-size: 15px":""},[a("td",{attrs:{colspan:"h"==t.CellType?2:1}},["h"!=t.CellType?a("div",{staticClass:"default-column"},[a("router-link",{attrs:{to:"/dynamic/view/Index="+t.Index},on:{click:function(t){e.showSetting(e.item)}}},[a("span",{style:"text-decoration:"+(e.taskDone.indexOf(t.Status)>-1?"line-through":"")},[e._v(e._s(t.Index))])]),e._v(" "),a("br"),e._v(" "),a("el-progress",{attrs:{width:35,type:"circle",percentage:parseInt(t.Progress)}})],1):a("div",{staticStyle:{"padding-left":"30px"}},[t.Level&&e.datasrc.cells[r+1]&&!e.datasrc.cells[r+1].Level?a("span",{staticStyle:{cursor:"pointer"},on:{click:function(a){e.onShowMenu(r,t.ShowMenu)}}},[t.ShowMenu?a("i",{staticClass:"el-icon-caret-bottom  mt-4 pr-1"}):e._e(),e._v(" "),t.ShowMenu?e._e():a("i",{staticClass:"el-icon-caret-right  mt-4 pr-1"})]):e._e(),e._v(" "),a("span",[e._v(e._s(t.Index))]),a("br")])]),e._v(" "),e._l(e.datasrc.ListCols["Kế hoạch"],function(r,s){return"h"!=t.CellType||0!=s?a("td",{class:"tg-"+r.Name},[r.Redirect?a("router-link",{attrs:{to:"/dynamic/view/Index="+t.Index}},[a("span",{style:"text-decoration:"+(e.taskDone.indexOf(t.Status)>-1?"line-through":"")},[e._v("\n              "+e._s(t[r.DynamicText?r.DynamicText:r.Expression?r.Expression:r.Name])+"\n            ")])]):e._e(),e._v(" "),r.Format&&"DateTime"==r.FieldColumnType?a("span",[e._v(e._s(t[r.DynamicText?r.DynamicText:r.Expression?r.Expression:r.Name]?e.$Utils.formatDateTime(t[r.DynamicText?r.DynamicText:r.Expression?r.Expression:r.Name],"h"==t.CellType?"DD/MM/YYYY":"HH:mm"):""))]):e._e(),e._v(" "),"DateTime"==r.FieldColumnType||r.Redirect?e._e():a("span",[e._v(e._s(t[r.DynamicText?r.DynamicText:r.Expression?r.Expression:r.Name]))])],1):e._e()}),e._v(" "),a("td",{staticClass:"default-column c"}),e._v(" "),e._l(e.datasrc.ListCols["Thực hiện"],function(r){return a("td",{class:"default-column tg-"+r.Name},[r.Redirect?a("router-link",{attrs:{to:"/dynamic/view/Index="+t.Index}},[e._v(e._s(t[r.DynamicText?r.DynamicText:r.Expression?r.Expression:r.Name]))]):e._e(),e._v(" "),"SpentTime"==r.Expression?a("span",{staticStyle:{"white-space":"nowrap"}},[e._v(e._s(e.convertSpendTime(t.SpentTime))+"\n                      "),"h"!=t.CellType?a("i",{staticClass:"fa  fa-clock-o fa-lg mt-4",style:{color:t.SpentTime<0?"red":"blue"}}):e._e()]):e._e(),e._v(" "),"Progress"==r.Name&&"h"!=t.CellType?a("el-progress",{attrs:{"text-inside":!0,"stroke-width":18,percentage:t.Progress?parseInt(t.Progress):0,status:void 0!=t.Progress?parseInt(t.Progress)>=100?"success":0==parseInt(t.Progress)?"exception":"":"exception"}}):e._e(),e._v(" "),"Progress"==r.Name&&"h"==t.CellType?a("span",[e._v(e._s(t.Progress)+"%")]):e._e(),e._v(" "),r.Format&&"DateTime"==r.FieldColumnType?a("span",[e._v(e._s(e.$Utils.formatDateTime(t[r.DynamicText?r.DynamicText:r.Expression?r.Expression:r.Name],"DD/MM/YYYY HH:mm")))]):e._e(),e._v(" "),"DateTime"==r.FieldColumnType||r.Redirect||"SpentTime"==r.Expression||"Progress"==r.Name?e._e():a("div",{style:"h"!=t.CellType&&void 0!=t.Status&&"StatusName"===r.Name?"background-color: "+e.statusColors[t.Status.toUpperCase()]:""},[e._v(e._s(t[r.DynamicText?r.DynamicText:r.Expression?r.Expression:r.Name]))])],1)})],2):e._e()})):e._e()])])])},s=[],i={render:r,staticRenderFns:s};t.a=i},995:function(e,t,a){var r=a(996);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(932)("3cb0f242",r,!0)},996:function(e,t,a){t=e.exports=a(931)(!0),t.push([e.i,"#tTbl #plusBtn{position:fixed;top:120px;right:30px;z-index:99;cursor:pointer}","",{version:3,sources:["/Users/yuukininomae/Sites/vue-crm2/src/components/static/TargetSetting.vue"],names:[],mappings:"AACA,eACE,eAAgB,AAChB,UAAW,AACX,WAAY,AACZ,WAAY,AACZ,cAAgB,CACjB",file:"TargetSetting.vue",sourcesContent:["\n#tTbl #plusBtn {\n  position: fixed;\n  top: 120px;\n  right: 30px;\n  z-index: 99;\n  cursor: pointer;\n}\n"],sourceRoot:""}])},997:function(e,t,a){"use strict";var r=a(3),s=a(280),i=a(30),n=a.n(i),l=a(985);r.default.use(a(40)),t.a={props:["targetLst","options","typeLst","workerLst","departmentLst","targetFieldLst","getTargets","getObject","rootId","targetSavedLst","years","months","firstDayOfWeekCfg"],components:{ElTreeGrid:n.a,ElTableTreeColumn:s.a},data:function(){return{dtSrc:[],userWithAvatarLst:[],editableUser:!1,weeksOfYear:this.years}},methods:{loadAvatar:function(e){return void 0==e&&(e="assets/images/avatars/profile.png"),e=e.replace("profile.jpg","profile.png"),"assets/images/avatars/profile.png"===e?this.$appUri.BaseURL+e:this.$appUri.BaseURL+e.replace("/","")+"&Height=50&Width=50"},openTargetDetail:function(e){var t={item:e,workers:this.workerLst,isEditable:!1,targetLst:this.targetLst,departmentLst:this.departmentLst,disabled:!0,targetFields:JSON.parse(this.targetFieldLst),getTargets:this.getTargets,getObject:this.getObject,targetSavedLst:this.targetSavedLst,weeksOfYear:this.weeksOfYear,months:this.months,firstDayOfWeekCfg:this.firstDayOfWeekCfg};this.$hub.$emit("set-modal-data","","50%",!0,"center",l.a,!1,"",t,!0),this.$hub.$emit("open-modal")},addNewTarget:function(){if(!this.targetFieldLst||this.targetFieldLst.constructor==Array){var e={item:{},workers:this.workerLst,departments:this.departmentLst,isEditable:!0,targetLst:this.targetLst,departmentLst:this.departmentLst,disabled:!1,targetFields:JSON.parse(this.targetFieldLst),rootId:this.rootId,getTargets:this.getTargets,getObject:this.getObject,targetSavedLst:this.targetSavedLst,weeksOfYear:this.weeksOfYear,months:this.months,firstDayOfWeekCfg:this.firstDayOfWeekCfg};this.$hub.$emit("set-modal-data","","50%",!0,"center",l.a,!1,"",e,!1),this.$hub.$emit("open-modal")}}},watch:{targetLst:function(e){this.dtSrc=this.$Utils.treeify(e,this.options.key,this.options.parentKey,"level")}},created:function(){this.userWithAvatarLst=this.$Utils.rotateDementionArr(this.workerLst,"UserId"),this.targetsObj=this.$Utils.rotateDementionArr(this.typeLst,"Id"),this.dtSrc=this.$Utils.treeify(this.targetLst,this.options.key,this.options.parentKey,"level");var e=JSON.parse(this.$getItemLocalStorage(this.$localStorageConstant.LoggedOnUser));this.$isSystemAdmin()||this.$isMantisAdmin()?this.editableUser=!0:e.GroupRoles?(e.GroupRoles.Leader&&e.GroupRoles.Leader.indexOf(e.Project.GroupId)>-1||e.GroupRoles.Director&&e.GroupRoles.Director.indexOf(e.Project.GroupId)>-1)&&(this.editableUser=!0):this.editableUser=!1}}},998:function(e,t,a){var r=a(999);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(932)("1031833e",r,!0)},999:function(e,t,a){t=e.exports=a(931)(!0),t.push([e.i,"@media only screen and (max-width:768px){.el-input[data-v-c9eec43c],.el-radio[data-v-c9eec43c],.el-select[data-v-c9eec43c]{width:100%}.el-radio[data-v-c9eec43c]{margin-left:0!important}}","",{version:3,sources:["/Users/yuukininomae/Sites/vue-crm2/src/components/static/TargetDialog.vue"],names:[],mappings:"AACA,yCAEA,kFAGI,UAAY,CACf,AACD,2BACI,uBAA4B,CAC/B,CACA",file:"TargetDialog.vue",sourcesContent:["\n@media only screen and (max-width: 768px) {\n  /* For mobile phones: */\n.el-input[data-v-c9eec43c],\n  .el-select[data-v-c9eec43c],\n  .el-radio[data-v-c9eec43c] {\n    width: 100%;\n}\n.el-radio[data-v-c9eec43c] {\n    margin-left: 0px !important;\n}\n}\n"],sourceRoot:""}])}});
//# sourceMappingURL=1.e02ee32b9e847c2e3c1b.js.map
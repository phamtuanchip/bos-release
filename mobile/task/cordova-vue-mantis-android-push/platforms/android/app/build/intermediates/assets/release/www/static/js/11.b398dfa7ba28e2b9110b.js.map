{"version":3,"sources":["webpack:///static/js/11.b398dfa7ba28e2b9110b.js","webpack:///./src/components/static/TargetSetting.vue?c0f5","webpack:///./src/components/static/TargetSetting.vue?f99d","webpack:///src/components/static/TargetSetting.vue","webpack:///./src/components/static/TargetDialog.vue?03c6","webpack:///./src/components/static/TargetDialog.vue?a621","webpack:///src/components/static/TargetDialog.vue","webpack:///./src/components/dynamic/HistoryGrid.vue","webpack:///./src/components/dynamic/HistoryGrid.vue?3516","webpack:///./src/components/dynamic/HistoryGrid.vue?2da2","webpack:///src/components/dynamic/HistoryGrid.vue","webpack:///./src/components/dynamic/HistoryGrid.vue?2918","webpack:///./src/components/static/TargetDialog.vue?edb7","webpack:///./src/components/static/TargetSetting.vue?8cb6","webpack:///./src/components/static/TargetSetting.vue","webpack:///./src/components/static/TargetDialog.vue"],"names":["webpackJsonp","1000","module","exports","__webpack_require__","content","i","locals","1001","push","version","sources","names","mappings","file","sourcesContent","sourceRoot","1002","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1_element_tree_grid_src_index_js__","__WEBPACK_IMPORTED_MODULE_2_element_tree_grid__","__WEBPACK_IMPORTED_MODULE_2_element_tree_grid___default","n","__WEBPACK_IMPORTED_MODULE_3__components_static_TargetDialog__","use","props","components","ElTreeGrid","a","ElTableTreeColumn","data","dtSrc","userWithAvatarLst","editableUser","weeksOfYear","this","years","methods","loadAvatar","avatar","undefined","replace","$appUri","BaseURL","openTargetDetail","row","dataToPass","item","workers","workerLst","isEditable","targetLst","departmentLst","disabled","targetFields","JSON","parse","targetFieldLst","getTargets","getObject","targetSavedLst","months","firstDayOfWeekCfg","$hub","$emit","addNewTarget","constructor","Array","departments","rootId","watch","val","$Utils","treeify","options","key","parentKey","created","rotateDementionArr","targetsObj","typeLst","user","$getItemLocalStorage","$localStorageConstant","LoggedOnUser","$isSystemAdmin","$isMantisAdmin","GroupRoles","Leader","indexOf","Project","GroupId","Director","1003","1004","1005","$","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default","__WEBPACK_IMPORTED_MODULE_1__components_dynamic_HistoryGrid__","__WEBPACK_IMPORTED_MODULE_2_vue__","HistoryGrid","_this","isLeader","ruleForm","Name","$Lodash","cloneDeep","Assigned","equals","split","filter","autoCal","oldName","IsPublic","Value","TargetType","ActualStartDate","ActualFinishDate","ParentId","Owner","Plan","Done","Unit","Progress","Milestone","MilestoneVal","isShowAllTarget","oldObject","Id","dataCopied","viewHistoryModel","rules","required","message","trigger","changeMilestoneVal","type","moment","isoWeekday","endOf","_d","$forceUpdate","submitForm","formName","ctrl","$refs","validate","valid","console","log","checkExits","tmp","Math","round","Number","isNaN","resetForm","resetFields","close","deleteTarget","_this2","$confirm","confirmButtonText","cancelButtonText","then","recursiveDeleteTarget","Level","tRequest","clone","$singleRequest","R1_RequestTemplate","R1_RequestDataGroup","R1_RequestFields","eval","model","post","response","getDataWithRoot","R1","updateRequest","each","index","value","fVal","Targets","TargetsName","RequestTemplate","RequestDataGroup","RequestFields","TotalRequests","updateParamsSingleRequest","catch","isEmpty","request","R1_Id","dData","loadHistory","id","RequestAction","RequestClass","R1_Code","R1_SourceId","arrShowField","field","History","result","success","logData","k","logChanges","Changes","change","length","ColumnName","date","stringToDate","OldDisplayValue","Version","formatDateTime","NewDisplayValue","forEach","object","checkField","DynamicText","ex","R1_Name","R1_ParentId","Parent","listExitsTar","el","$message","error","saveOrUpdate","R1_ReferenceId","R1_NestedSetType","R1_Plan","R1_Done","R1_Owner","R1_TargetType","R1_Milestone","parseFloat","R1_Progress","R1_Unit","R1_IsPublic","R1_Value","res","R1_ValueName","GroupName","R1_Assigned","R1_AssignedName","UserId","Username","R1_OwnerName","R1_ActualStartDate","R1_ActualFinishDate","objectReturn","Data","autoCals","AssignedName","OwnerName","arrChanged","compareChange","createHistoryLogs","target","saveOrUpdatePermissions","objReturn","objOld","objTemp","valueReturn","caption","values","Caption","obj","key1","changedObject","ColumnCaption","OldValue","NewValue","FieldColumnType","getTime","countHistory","SourceId","Code","insertRequest","parseInt","CreatedByName","getUserInfo","insertResult","isUpdate","paramsSearchLinked","ConditionFields","StaticFields","OrderFields","TotalCount","arrLink","DataDS","Linked","removeLinks","link","savePermission","linkToRoleEveryone","permissons","leaders","groups","req","gro","ix","data1","ele","concat","strLeaders","GroupParent","p","Parrent","Child","ChildTable","p1","p10","$administrator","p11","$supervisor","persReadyToInsert","data3","data2","changeEditState","changeType","$set","setParent","parent","group","v","Permission","Date","LoginName","call","1006","injectStyle","ssrContext","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_HistoryGrid_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_18926a71_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_HistoryGrid_vue__","normalizeComponent","__vue_styles__","Component","1007","1008","1009","1010","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","slot","_v","staticStyle","width","_l","h","_s","itemLog","style","background-color","colspan","Created","_e","staticRenderFns","esExports","1011","float","padding","icon","on","click","$event","ref","label-position","$isMobileDevice","label-width","label","prop","callback","$$v","expression","display","active-color","inactive-color","active-text","inactive-text","filterable","placeholder","format","t","size","border","ng-show","effect","placement","clearable","Status","multiple","dtSource","dtHeader","1012","flex","align-items","justify-content","font-size","padding-right","empty-text","scopedSlots","_u","fn","scope","text-align","cursor","levelKey","treeKey","min-width","show-overflow-tooltip","text-inside","stroke-width","percentage","margin","height","title","src","Avatar","940","Object","defineProperty","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_TargetSetting_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_4c98b227_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_TargetSetting_vue__","990","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_TargetDialog_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_1bb2e27e_hasScoped_true_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_TargetDialog_vue__"],"mappings":"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","file":"static/js/11.b398dfa7ba28e2b9110b.js","sourcesContent":["webpackJsonp([11],{\n\n/***/ 1000:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(1001);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(937)(\"77e39fee\", content, true);\n\n/***/ }),\n\n/***/ 1001:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(936)(true);\n// imports\n\n\n// module\nexports.push([module.i, \"#tTbl #plusBtn{position:fixed;top:120px;right:30px;z-index:99;cursor:pointer}\", \"\", {\"version\":3,\"sources\":[\"/Users/yuukininomae/Sites/vue-crm3/src/components/static/TargetSetting.vue\"],\"names\":[],\"mappings\":\"AACA,eACE,eAAgB,AAChB,UAAW,AACX,WAAY,AACZ,WAAY,AACZ,cAAgB,CACjB\",\"file\":\"TargetSetting.vue\",\"sourcesContent\":[\"\\n#tTbl #plusBtn {\\n  position: fixed;\\n  top: 120px;\\n  right: 30px;\\n  z-index: 99;\\n  cursor: pointer;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 1002:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_element_tree_grid_src_index_js__ = __webpack_require__(281);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_element_tree_grid__ = __webpack_require__(30);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_element_tree_grid___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_element_tree_grid__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__components_static_TargetDialog__ = __webpack_require__(990);\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].use(__webpack_require__(40));\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  props: [\"targetLst\", \"options\", \"typeLst\", \"workerLst\", \"departmentLst\", \"targetFieldLst\", \"getTargets\", \"getObject\", \"rootId\", \"targetSavedLst\", \"years\", \"months\", \"firstDayOfWeekCfg\"],\n  components: { ElTreeGrid: __WEBPACK_IMPORTED_MODULE_2_element_tree_grid___default.a, ElTableTreeColumn: __WEBPACK_IMPORTED_MODULE_1_element_tree_grid_src_index_js__[\"a\" /* default */] },\n  data: function data() {\n    return {\n      dtSrc: [],\n      userWithAvatarLst: [],\n      editableUser: false,\n      weeksOfYear: this.years\n    };\n  },\n\n  methods: {\n    loadAvatar: function loadAvatar(avatar) {\n      if (avatar == undefined) avatar = 'assets/images/avatars/profile.png';\n      avatar = avatar.replace('profile.jpg', 'profile.png');\n      var strAvatar = avatar === \"assets/images/avatars/profile.png\" ? this.$appUri.BaseURL + avatar : this.$appUri.BaseURL + avatar.replace('/', '') + \"&Height=50&Width=50\";\n      return strAvatar;\n    },\n    openTargetDetail: function openTargetDetail(row) {\n      var dataToPass = {\n        item: row,\n        workers: this.workerLst,\n\n        isEditable: false,\n        targetLst: this.targetLst,\n        departmentLst: this.departmentLst,\n        disabled: true,\n        targetFields: JSON.parse(this.targetFieldLst),\n        getTargets: this.getTargets,\n        getObject: this.getObject,\n        targetSavedLst: this.targetSavedLst,\n        weeksOfYear: this.weeksOfYear,\n        months: this.months,\n        firstDayOfWeekCfg: this.firstDayOfWeekCfg\n      };\n      this.$hub.$emit(\"set-modal-data\", \"\", \"50%\", true, \"center\", __WEBPACK_IMPORTED_MODULE_3__components_static_TargetDialog__[\"a\" /* default */], false, \"\", dataToPass, true);\n      this.$hub.$emit(\"open-modal\");\n    },\n    addNewTarget: function addNewTarget() {\n      if (this.targetFieldLst && this.targetFieldLst.constructor != Array) return;\n      var dataToPass = { item: {},\n        workers: this.workerLst,\n        departments: this.departmentLst,\n        isEditable: true,\n        targetLst: this.targetLst,\n        departmentLst: this.departmentLst,\n        disabled: false,\n        targetFields: JSON.parse(this.targetFieldLst),\n        rootId: this.rootId,\n        getTargets: this.getTargets,\n        getObject: this.getObject,\n        targetSavedLst: this.targetSavedLst,\n        weeksOfYear: this.weeksOfYear,\n        months: this.months,\n        firstDayOfWeekCfg: this.firstDayOfWeekCfg\n      };\n      this.$hub.$emit(\"set-modal-data\", \"\", \"50%\", true, \"center\", __WEBPACK_IMPORTED_MODULE_3__components_static_TargetDialog__[\"a\" /* default */], false, \"\", dataToPass, false);\n      this.$hub.$emit(\"open-modal\");\n    }\n  },\n  watch: {\n    targetLst: function targetLst(val) {\n      this.dtSrc = this.$Utils.treeify(val, this.options.key, this.options.parentKey, 'level');\n    }\n  },\n  created: function created() {\n    this.userWithAvatarLst = this.$Utils.rotateDementionArr(this.workerLst, 'UserId');\n    this.targetsObj = this.$Utils.rotateDementionArr(this.typeLst, 'Id');\n    this.dtSrc = this.$Utils.treeify(this.targetLst, this.options.key, this.options.parentKey, 'level');\n    var user = JSON.parse(this.$getItemLocalStorage(this.$localStorageConstant.LoggedOnUser));\n    if (this.$isSystemAdmin() || this.$isMantisAdmin()) {\n      this.editableUser = true;\n    } else if (user.GroupRoles) {\n      if (user.GroupRoles.Leader && user.GroupRoles.Leader.indexOf(user.Project.GroupId) > -1 || user.GroupRoles.Director && user.GroupRoles.Director.indexOf(user.Project.GroupId) > -1) {\n        this.editableUser = true;\n      }\n    } else {\n      this.editableUser = false;\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 1003:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(1004);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(937)(\"5aa07319\", content, true);\n\n/***/ }),\n\n/***/ 1004:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(936)(true);\n// imports\n\n\n// module\nexports.push([module.i, \"@media only screen and (max-width:768px){.el-input[data-v-1bb2e27e],.el-radio[data-v-1bb2e27e],.el-select[data-v-1bb2e27e]{width:100%}.el-radio[data-v-1bb2e27e]{margin-left:0!important}}\", \"\", {\"version\":3,\"sources\":[\"/Users/yuukininomae/Sites/vue-crm3/src/components/static/TargetDialog.vue\"],\"names\":[],\"mappings\":\"AACA,yCAEA,kFAGI,UAAY,CACf,AACD,2BACI,uBAA4B,CAC/B,CACA\",\"file\":\"TargetDialog.vue\",\"sourcesContent\":[\"\\n@media only screen and (max-width: 768px) {\\n  /* For mobile phones: */\\n.el-input[data-v-1bb2e27e],\\n  .el-select[data-v-1bb2e27e],\\n  .el-radio[data-v-1bb2e27e] {\\n    width: 100%;\\n}\\n.el-radio[data-v-1bb2e27e] {\\n    margin-left: 0px !important;\\n}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 1005:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_dynamic_HistoryGrid__ = __webpack_require__(1006);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_vue__ = __webpack_require__(3);\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_2_vue__[\"default\"].use(__webpack_require__(40));\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  components: {\n    HistoryGrid: __WEBPACK_IMPORTED_MODULE_1__components_dynamic_HistoryGrid__[\"a\" /* default */]\n  },\n  props: [\"data\"],\n  data: function data() {\n    var _this = this;\n\n    var user = JSON.parse(this.$getItemLocalStorage(this.$localStorageConstant.LoggedOnUser));\n    var isLeader = !this.$isMantisAdmin() && !this.$isMantisAdmin() && user.GroupRoles && user.GroupRoles.Leader && user.GroupRoles.Leader.indexOf(user.Project.GroupId) > -1;\n    var ruleForm = {};\n    if (this.data.item.Name != undefined) {\n      ruleForm = this.$Lodash.cloneDeep(this.data.item);\n      if (this.data.item.Assigned != undefined && !this.$Utils.equals(this.data.item.Assigned, \"\")) {\n        ruleForm.Assigned = this.data.item.Assigned.split(\";\").filter(function (item) {\n          return !_this.$Utils.equals(item, \"\");\n        });\n      } else {\n        ruleForm.Assigned = [];\n      }\n      ruleForm.autoCal = false;\n      ruleForm.oldName = this.data.item.Name + \"\";\n      ruleForm.IsPublic = ruleForm.IsPublic === \"0\" ? false : true;\n    } else {\n      ruleForm.Name = \"\";\n      ruleForm.Value = \"\";\n      ruleForm.TargetType = \"\";\n      ruleForm.IsPublic = true;\n      ruleForm.ActualStartDate = \"\";\n      ruleForm.ActualFinishDate = \"\";\n      ruleForm.Assigned = [];\n      ruleForm.ParentId = \"\";\n      ruleForm.Owner = \"\";\n      ruleForm.Plan = \"\";\n      ruleForm.Done = \"\";\n      ruleForm.Unit = \"\";\n      ruleForm.Progress = 0;\n      ruleForm.autoCal = true;\n      ruleForm.oldName = \"\";\n      ruleForm.Milestone = \"\";\n      ruleForm.MilestoneVal = {};\n    }\n    return {\n      isShowAllTarget: false,\n      oldObject: this.$Lodash.cloneDeep(ruleForm),\n      typeLst: [{\n        Id: \"1\",\n        Name: \"Mục tiêu công ty\"\n      }, {\n        Id: \"2\",\n        Name: \"Mục tiêu phòng ban\"\n      }, {\n        Id: \"3\",\n        Name: \"Mục tiêu cá nhân\"\n      }],\n      ruleForm: ruleForm,\n      isLeader: isLeader,\n      dataCopied: this.$Lodash.cloneDeep(this.data),\n      viewHistoryModel: [],\n      rules: {\n        Name: [{ required: true, message: \"Tên bắt buộc phải điền\", trigger: \"blur\" }],\n        Value: [{\n          required: true,\n          message: \"Phòng ban bắt buộc phải chọn\",\n          trigger: \"change\"\n        }],\n        ParentId: [{\n          required: true,\n          message: \"Mục tiêu cha bắt buộc phải chọn\",\n          trigger: \"change\"\n        }]\n      }\n    };\n  },\n\n  watch: {},\n  methods: {\n    changeMilestoneVal: function changeMilestoneVal(val, type) {\n      this.ruleForm.ActualStartDate = val;\n      if (type === \"week\") this.ruleForm.ActualFinishDate = __WEBPACK_IMPORTED_MODULE_2_vue__[\"default\"].moment(val).isoWeekday(this.dataCopied.firstDayOfWeekCfg).endOf(\"isoweek\")._d;else if (type === \"month\") this.ruleForm.ActualFinishDate = __WEBPACK_IMPORTED_MODULE_2_vue__[\"default\"].moment(val).endOf(\"month\")._d;else if (type === \"year\") this.ruleForm.ActualFinishDate = __WEBPACK_IMPORTED_MODULE_2_vue__[\"default\"].moment(val).endOf(\"year\")._d;\n      this.$forceUpdate();\n    },\n    submitForm: function submitForm(formName) {\n      var ctrl = this;\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          ctrl.checkExits();\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n    autoCal: function autoCal() {\n      if (this.ruleForm.autoCal == true) {\n        var tmp = Math.round(Number(this.ruleForm.Done) / Number(this.ruleForm.Plan) * 100);\n        this.ruleForm.Progress = isNaN(tmp) ? this.ruleForm.Progress : tmp;\n      }\n    },\n    resetForm: function resetForm(formName) {\n      this.$refs[formName].resetFields();\n    },\n    close: function close() {\n      this.$hub.$emit(\"close-modal\");\n    },\n    deleteTarget: function deleteTarget() {\n      var _this2 = this;\n\n      var ctrl = this;\n      this.$confirm(\"Mục tiêu sẽ bị xóa hoàn toàn. Tiếp tục?\", \"Cảnh báo\", {\n        confirmButtonText: \"Xóa\",\n        cancelButtonText: \"Bỏ qua\",\n        type: \"warning\"\n      }).then(function () {\n        ctrl.recursiveDeleteTarget({\n          Id: ctrl.data.item.Id,\n          Level: ctrl.data.item.Level\n        });\n        ctrl.close();\n\n        var tRequest = _this2.$Utils.clone(_this2.$singleRequest);\n        tRequest.R1_RequestTemplate = \"AG_Task_Task.Search\";\n        tRequest.R1_RequestDataGroup = \"DataGroup.danh-sach-cong-viec.04b66\";\n        tRequest.R1_RequestFields = \"Id;Targets;TargetsName;\";\n        for (var i = 1; i <= eval(ctrl.data.item.Level - 5); i++) {\n          tRequest.R1_RequestFields += \"TargetsLevel\" + i + \";\";\n        }\n        tRequest[\"R1_TargetsLevel\" + [ctrl.model.Level - 5]] = ctrl.model.Id;\n        ctrl.$Utils.post(tRequest).then(function (response) {\n          response = ctrl.$Utils.getDataWithRoot(response.R1, \"Data.TasksDS.Task\");\n          var updateRequest = ctrl.$Lodash.cloneDeep(ctrl.$singleRequest);\n          $.each(response, function (index, value) {\n            var fVal = {};\n            fVal.Id = ctrl.$Lodash.cloneDeep(value.Id);\n            fVal.Targets = \"\";\n            fVal.TargetsName = \"\";\n            fVal.RequestTemplate = \"AG_Task_Task.Update\";\n            fVal.RequestDataGroup = \"DataGroup.danh-sach-cong-viec.04b66\";\n            fVal.RequestFields = \"Id;Targets;TargetsName;\";\n            $.each(value.Targets.split(\";\"), function (key, val) {\n              if (key < eval(ctrl.data.item.Level - 6)) {\n                fVal.Targets += val + \";\";\n                fVal[\"TargetsLevel\" + [key + 1]] = val;\n                fVal.RequestFields += \"TargetsLevel\" + [key + 1] + \";\";\n              }\n            });\n            $.each(value.TargetsName.split(\";\"), function (key, val) {\n              if (key < eval(ctrl.data.item.Level - 6)) {\n                fVal.TargetsName += val + \";\";\n              }\n            });\n            updateRequest.TotalRequests = index + 1;\n            updateRequest = ctrl.$Utils.updateParamsSingleRequest(updateRequest, fVal, index + 1);\n          });\n          ctrl.$Utils.post(updateRequest);\n        });\n      }).catch(function () {});\n    },\n    recursiveDeleteTarget: function recursiveDeleteTarget(data) {\n      var ctrl = this;\n      if (ctrl.$Utils.isEmpty(data)) {\n        var request = ctrl.$Lodash.cloneDeep(ctrl.$singleRequest);\n        request.R1_RequestTemplate = \"Setting.Delete\";\n        request.R1_Id = data.Id;\n        ctrl.$Utils.post(request).then(function (dData) {\n          $.each(ctrl.data.targetLst, function (key, value) {\n            if (data.Id == value.ParentId) {\n              ctrl.recursiveDeleteTarget(value);\n            }\n          });\n          ctrl.data.getTargets();\n          ctrl.data.getObject();\n        });\n      }\n    },\n    loadHistory: function loadHistory(id) {\n      var ctrl = this;\n      var request = {\n        RequestAction: \"Request\",\n        RequestClass: \"xBase\",\n        TotalRequests: \"1\",\n        R1_RequestTemplate: \"ChangedLogs\",\n        R1_Code: \"ChangedHistory\",\n        R1_SourceId: id\n      };\n\n      var arrShowField = [];\n      arrShowField = ctrl.data.targetFields.filter(function (field) {\n        return field.History == \"true\";\n      });\n\n      ctrl.$Utils.post(request).then(function (result) {\n        if (result.success && result.R1.success) {\n          var logData = ctrl.$Utils.getDataWithRoot(result, \"R1.Data.DataDS.Logs\");\n\n          $.each(logData, function (k, log) {\n            try {\n              ctrl.viewHistoryModel.push({ type: \"head\", value: log });\n              var logChanges = JSON.parse(log.Changes);\n              $.each(logChanges, function (k, change) {\n                if (arrShowField.length > 0 && change.ColumnName !== \"Assigned\" && change.ColumnName !== \"Id\") {\n                  if (change.ColumnName === \"ActualStartDate\" || change.ColumnName === \"ActualFinishDate\" || change.ColumnName === \"Created\") {\n                    var format = \"DD/MM/YYYY\";\n                    var date = ctrl.$Utils.stringToDate(change.OldDisplayValue);\n                    change.OldDisplayValue = log.Version === \"1\" ? \"\" : ctrl.$Utils.formatDateTime(date, format);\n                    date = ctrl.$Utils.stringToDate(change.NewDisplayValue);\n                    change.NewDisplayValue = ctrl.$Utils.formatDateTime(date, format);\n                  }\n                  if ((change.ColumnName === \"AssignedName\" && !change.OldDisplayValue && change.NewDisplayValue === \"\") == false) {\n                    arrShowField.forEach(function (field) {\n                      var object = { type: \"body\", value: change };\n                      var checkField = field.DynamicText != undefined && field.DynamicText != \"\" ? field.DynamicText : field.Name;\n                      if (change.ColumnName == checkField) {\n                        if (change.ColumnName === \"TargetType\") {\n                          ctrl.typeLst.filter(function (item) {\n                            if (item.Id === change.OldDisplayValue) change.OldDisplayValue = log.Version === \"1\" ? \"\" : item.Name;\n                            if (item.Id === change.NewDisplayValue) change.NewDisplayValue = item.Name;\n                          });\n                        } else if (change.ColumnName === \"IsPublic\") {\n                          change.OldDisplayValue = log.Version === \"1\" ? \"\" : change.OldDisplayValue === \"0\" || change.OldDisplayValue == false ? \"Riêng tư\" : \"Công khai\";\n                          change.NewDisplayValue = change.NewDisplayValue === \"0\" || change.OldDisplayValue == false ? \"Riêng tư\" : \"Công khai\";\n                        }\n                        ctrl.viewHistoryModel.push(object);\n                      }\n                    });\n                  }\n                }\n              });\n            } catch (ex) {\n              console.log(ex);\n            }\n          });\n        }\n      });\n    },\n    checkExits: function checkExits() {\n      var ctrl = this;\n      var request = ctrl.$Lodash.cloneDeep(this.$singleRequest);\n      request.R1_RequestTemplate = \"xDynamicData_Setting.Search\";\n      request.R1_RequestFields = \"Name;ParentId;\";\n      request.R1_Name = ctrl.ruleForm.Name;\n      request.R1_RequestDataGroup = \"DataGroup.muc-tieu.091fb\";\n      request.R1_ParentId = ctrl.ruleForm.Parent ? ctrl.ruleForm.Parent.Id : ctrl.ruleForm.ParentId;\n      ctrl.$Utils.post(request).then(function (data) {\n        var listExitsTar = ctrl.$Utils.getDataWithRoot(data.R1, \"Data.DynamicDS.Setting\");\n        listExitsTar = listExitsTar.filter(function (el) {\n          return el.Name != ctrl.ruleForm.oldName;\n        });\n        if (listExitsTar.length != 0) {\n          ctrl.$message.error(\"Tên mục tiêu đã có\");\n        } else {\n          ctrl.saveOrUpdate();\n        }\n      });\n    },\n    saveOrUpdate: function saveOrUpdate() {\n      var ctrl = this;\n      var request = ctrl.$Lodash.cloneDeep(this.$singleRequest);\n      if (!ctrl.ruleForm.Id) {\n        request.R1_RequestTemplate = \"xDynamicData_Setting.Insert\";\n        request.R1_ReferenceId = ctrl.ruleForm.ParentId ? ctrl.ruleForm.ParentId : ctrl.data.rootId;\n        request.R1_NestedSetType = \"InsertLastChildNode\";\n      } else {\n        request.R1_RequestTemplate = \"xDynamicData_Setting.Update\";\n        request.R1_Id = ctrl.ruleForm.Id;\n      }\n      request.R1_RequestFields = \"Plan;Done;Progress;Unit;Assigned;AssignedName;Owner;OwnerName;TargetType;Id;Index;\" + \"Code;Name;Value;Description;LeftIndex;ParentId;Level;Value;RightIndex;Created;CreatedBy;Modified;IsPublic;ActualStartDate;ActualFinishDate;ValueName;Milestone\";\n      request.R1_RequestDataGroup = \"DataGroup.muc-tieu.091fb\";\n      request.R1_Name = ctrl.ruleForm.Name;\n      request.R1_Plan = ctrl.ruleForm.Plan;\n      request.R1_Done = ctrl.ruleForm.Done;\n      request.R1_Owner = ctrl.ruleForm.Owner;\n      request.R1_TargetType = ctrl.ruleForm.TargetType;\n      request.R1_Milestone = ctrl.ruleForm.Milestone;\n      if (!isNaN(parseFloat(ctrl.ruleForm.Progress + \"\"))) {\n        request.R1_Progress = ctrl.ruleForm.Progress;\n      } else {\n        delete ctrl.ruleForm.Progress;\n      }\n      request.R1_Unit = ctrl.ruleForm.Unit;\n      request.R1_IsPublic = ctrl.ruleForm.IsPublic == true ? 1 : 0;\n      request.R1_Value = ctrl.ruleForm.Value;\n      $.each(ctrl.departmentLst, function (k, val) {\n        var res = val.GroupId !== ctrl.ruleForm.Value;\n        if (!res) {\n          request.R1_ValueName = val.GroupName;\n        }\n        return res;\n      });\n      request.R1_Assigned = \"\";\n      request.R1_AssignedName = \"\";\n      $.each(ctrl.ruleForm.Assigned, function (k, Id) {\n        request.R1_Assigned += Id + \";\";\n        ctrl.data.workers.filter(function (user) {\n          if (user.UserId && user.UserId === Id) {\n            request.R1_AssignedName += user.Username + \",\";\n          }\n        });\n      });\n      ctrl.data.workers.filter(function (user) {\n        if (user.UserId && user.UserId === ctrl.ruleForm.Owner) {\n          request.R1_OwnerName = user.Username;\n        }\n      });\n      if (ctrl.$Utils.isEmpty(ctrl.ruleForm.ActualStartDate)) request.R1_ActualStartDate = ctrl.$Utils.formatDateTime(ctrl.ruleForm.ActualStartDate);\n      if (ctrl.$Utils.isEmpty(ctrl.ruleForm.ActualFinishDate)) request.R1_ActualFinishDate = ctrl.$Utils.formatDateTime(ctrl.ruleForm.ActualFinishDate);\n      ctrl.$Utils.post(request).then(function (data) {\n        ctrl.objectReturn = ctrl.$Lodash.cloneDeep(ctrl.ruleForm);\n        ctrl.objectReturn.Id = data.R1.Data;\n        if (ctrl.$Utils.isEmpty(ctrl.objectReturn, \"autoCals\")) delete ctrl.objectReturn.autoCals;\n        if (ctrl.$Utils.isEmpty(ctrl.objectReturn, \"oldName\")) delete ctrl.objectReturn.oldName;\n        ctrl.data.item = ctrl.$Lodash.cloneDeep(ctrl.objectReturn);\n        ctrl.objectReturn.AssignedName = request.R1_AssignedName;\n        ctrl.objectReturn.OwnerName = request.R1_OwnerName;\n        ctrl.objectReturn.Assigned = request.R1_Assigned;\n        ctrl.objectReturn.Value = request.R1_Value;\n        var arrChanged = ctrl.compareChange(ctrl.objectReturn, ctrl.oldObject);\n        if (ctrl.$Utils.isEmpty(arrChanged) && arrChanged.length > 0) {\n          if (request.R1_RequestTemplate, \"xDynamicData_Setting.Insert\") {\n            ctrl.createHistoryLogs(arrChanged);\n          } else {\n            arrChanged = arrChanged.filter(function (ele) {\n              return ctrl.$Utils.isEmpty(ele.OldDisplayValue);\n            });\n            if (ctrl.$Utils.equals(arrChanged, []) == false) {\n              ctrl.createHistoryLogs(arrChanged);\n            }\n          }\n        }\n        var target = ctrl.$Lodash.cloneDeep(ctrl.ruleForm);\n        target.Id = data.R1.Data;\n        ctrl.saveOrUpdatePermissions(ctrl.ruleForm.oldName !== \"\", target);\n        ctrl.close();\n      });\n    },\n    compareChange: function compareChange(objReturn, objOld) {\n      var ctrl = this;\n      var arrChanged = [];\n      ctrl.objTemp = ctrl.$Lodash.cloneDeep(ctrl.oldObject);\n      $.each(objReturn, function (key, val) {\n        if (ctrl.$Utils.isEmpty(val)) {\n          var valueReturn = val;\n          var caption = \"\";\n          var field = {};\n          $.each(ctrl.data.targetFields, function (k, values) {\n            if (values.Name === key && values.History == \"true\") {\n              caption = values.Caption;\n              field = values;\n            }\n          });\n          var obj = {};\n\n          $.each(objOld, function (key1, value) {\n            if (key == key1 && ctrl.$Utils.equals(value, valueReturn) == false) {\n              obj[key1] = value;\n            }\n          });\n          var changedObject = {\n            ColumnCaption: caption,\n            ColumnName: key,\n            OldDisplayValue: obj[key],\n            OldValue: obj[key],\n            NewDisplayValue: objReturn[key] ? objReturn[key] : valueReturn,\n            NewValue: valueReturn\n          };\n          if (ctrl.$Utils.isEmpty(field)) {\n            switch (field.FieldColumnType) {\n              case \"DateTime\":\n                if (ctrl.$Utils.stringToDate(val).getTime() == ctrl.$Utils.stringToDate(changedObject.OldValue).getTime()) {\n                  changedObject = undefined;\n                }\n                break;\n              case \"Double\":\n                if (!ctrl.$Utils.isEmpty(ctrl.objTemp[key]) && ctrl.$Utils.isEmpty(objReturn[key])) {\n                  changedObject.OldDisplayValue = 0;\n                  changedObject.OldValue = 0;\n                }\n                break;\n              case \"Integer\":\n                if (!ctrl.$Utils.isEmpty(ctrl.objTemp[key]) && ctrl.$Utils.isEmpty(objReturn[key])) {\n                  changedObject.OldDisplayValue = 0;\n                  changedObject.OldValue = 0;\n                }\n                break;\n            }\n          }\n\n          if (changedObject && ctrl.$Utils.isEmpty(caption) && caption != \"\") {\n            arrChanged.push(changedObject);\n          }\n        }\n      });\n      return arrChanged;\n    },\n    createHistoryLogs: function createHistoryLogs(arrChanged) {\n      var ctrl = this;\n      var countHistory = ctrl.$Utils.updateParamsSingleRequest(ctrl.$Lodash.cloneDeep(ctrl.$singleRequest), {\n        RequestTemplate: \"ChangedLogs.Count\",\n        SourceId: ctrl.objectReturn.Id,\n        Code: \"ChangedHistory\"\n      });\n\n      ctrl.$Utils.post(countHistory).then(function (result) {\n        if (ctrl.$Utils.isEmpty(result, \"R1.Data\")) {\n          var insertRequest = ctrl.$Utils.updateParamsSingleRequest(countHistory, {\n            RequestTemplate: \"ChangedLogs.Insert\",\n            Version: parseInt(result.R1.Data) + 1,\n            Changes: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(arrChanged),\n            CreatedByName: ctrl.$Utils.getUserInfo(\"Username\")\n          });\n          ctrl.$Utils.post(insertRequest).then(function (insertResult) {});\n        }\n      });\n    },\n    saveOrUpdatePermissions: function saveOrUpdatePermissions(isUpdate, target) {\n      var ctrl = this;\n\n      var req = ctrl.$Lodash.cloneDeep(ctrl.$singleRequest);\n      if (isUpdate == true) {\n        var paramsSearchLinked = {\n          RequestAction: \"SearchLinked\",\n          RequestClass: \"Addition\",\n          ConditionFields: \"Parent;\",\n          StaticFields: \"Code;Child;Parent;Name;Created;Description\",\n          OrderFields: \"Created DESC\",\n          Parent: target.Id\n        };\n        ctrl.$Utils.post(paramsSearchLinked).then(function (result) {\n          if (result.TotalCount > 0) {\n            var arrLink = result.TotalCount == 1 ? [result.Data.DataDS.Linked] : result.Data.DataDS.Linked;\n            var removeLinks = {\n              RequestClass: \"xBase\",\n              RequestAction: \"Request\",\n              TotalRequests: arrLink.length,\n              RequestTemplate: \"Permission.Remove\"\n            };\n            $.each(arrLink, function (link, key) {\n              removeLinks[\"R\" + (key + 1) + \"_Id\"] = link.Id;\n            });\n            ctrl.savePermission(target, removeLinks);\n          }\n        });\n      } else {\n        ctrl.savePermission(target);\n      }\n    },\n    savePermission: function savePermission(target, removeLinks) {\n      var ctrl = this;\n      if (target.IsPublic == true) {\n        ctrl.$Utils.linkToRoleEveryone([{\n          Id: target.Id,\n          Caption: target.Name\n        }]);\n\n        ctrl.data.getTargets();\n        ctrl.data.getObject();\n      } else {\n        var permissons = [];\n        var leaders = [];\n        var groups = [];\n        groups.push(target.Value);\n        if (groups && groups.length > 0) {\n          var req = {};\n          groups.filter(function (gro, key) {\n            req[\"R\" + ctrl.ix + \"_RequestTemplate\"] = \"OrgnizationList\";\n            req[\"R\" + ctrl.ix + \"_GroupName\"] = \"Leader\";\n            req[\"R\" + ctrl.ix + \"_GroupParent\"] = gro.GroupId;\n            req[\"R\" + ctrl.ix + \"_RequestDataType\"] = \"json\";\n            req[\"R\" + ctrl.ix + \"_GroupType\"] = \"2\";\n            ctrl.ix++;\n          });\n          req.TotalRequests = ctrl.ix - 1;\n          req.RequestClass = \"xBase\";\n          req.RequestAction = \"Request\";\n          ctrl.$Utils.post(req).then(function (data1) {\n            for (var k = 1; k < ctrl.ix; k++) {\n              var ele = ctrl.$Utils.getDataWithRoot(data1, \"R\" + k + \".Data.UserDS.Group\");\n              if (ele[0] != undefined) {\n                if (ele[0].GroupName === \"Leader\") {\n                  leaders = leaders.concat(ele);\n                }\n              }\n            }\n            var strLeaders = \"\";\n            leaders.filter(function (ele, key) {\n              if (ele.GroupParent == groups[0].GroupId) {\n                strLeaders += ele.GroupId + \";\";\n                if (target.TargetType == \"2\" || target.TargetType == \"1\") {\n                  var p = {\n                    Parrent: target.Id,\n                    Code: \"Edit\",\n                    Name: target.Name + \" - Edit\",\n                    Child: ele.GroupId,\n                    ChildTable: \"tblGroup\"\n                  };\n                  permissons.push(p);\n                } else if (target.TargetType == \"3\") {\n                  var p1 = {\n                    Parrent: target.Id,\n                    Code: \"Manage\",\n                    Name: target.Name + \" - Manage\",\n                    Child: ele.GroupId,\n                    ChildTable: \"tblGroup\"\n                  };\n                  permissons.push(p1);\n                }\n              }\n            });\n            if (target.Owner && strLeaders.indexOf(target.Owner) == -1) {\n              var p = {\n                Parrent: target.Id,\n                Code: \"Edit\",\n                Name: target.Name + \" - Edit\",\n                Child: target.Owner,\n                ChildTable: \"tblUser\"\n              };\n              permissons.push(p);\n            }\n            if (target.Assigned) {\n              target.Assigned.filter(function (user, key) {\n                if (user !== \"\" && strLeaders.indexOf(user) == -1) {\n                  var p = {\n                    Parrent: target.Id,\n                    Code: \"Edit\",\n                    Name: target.Name + \" - Edit\",\n                    Child: user,\n                    ChildTable: \"tblUser\"\n                  };\n                  permissons.push(p);\n                }\n              });\n            }\n\n            var p10 = {\n              Parrent: target.Id,\n              Code: \"Manage\",\n              Name: target.Name + \" - Manage\",\n              Child: ctrl.$administrator,\n              ChildTable: \"tblGroup\"\n            };\n            permissons.push(p10);\n            var p11 = {\n              Parrent: target.Id,\n              Code: \"Manage\",\n              Name: target.Name + \" - Manage\",\n              Child: ctrl.$supervisor,\n              ChildTable: \"tblGroup\"\n            };\n            permissons.push(p11);\n\n            var persReadyToInsert = {};\n            var index = 1;\n            permissons.filter(function (p, k) {\n              persReadyToInsert[\"R\" + index + \"_RequestClass\"] = \"xBase\";\n              persReadyToInsert[\"R\" + index + \"_RequestAction\"] = \"LinkUserToObject\";\n              persReadyToInsert[\"R\" + index + \"_ParentTable\"] = \"xObject\";\n              persReadyToInsert[\"R\" + index + \"_RequestTemplate\"] = \"Permission.Insert\";\n              persReadyToInsert[\"R\" + index + \"_Parent\"] = p.Parrent;\n              persReadyToInsert[\"R\" + index + \"_Child\"] = p.Child;\n              persReadyToInsert[\"R\" + index + \"_Code\"] = p.Code;\n              persReadyToInsert[\"R\" + index + \"_Name\"] = p.Name;\n              persReadyToInsert[\"R\" + index + \"_ChildTable\"] = p.ChildTable;\n              index++;\n            });\n            persReadyToInsert.TotalRequests = permissons.length;\n            persReadyToInsert.RequestClass = \"xBase\";\n            persReadyToInsert.RequestAction = \"Request\";\n            if (removeLinks == undefined) {\n              ctrl.$Utils.post(persReadyToInsert).then(function (data3) {\n                ctrl.data.getObject();\n                ctrl.data.getTargets();\n              });\n            } else {\n              ctrl.$Utils.post(removeLinks).then(function (data2) {\n                ctrl.$Utils.post(persReadyToInsert).then(function (data3) {\n                  ctrl.data.getTargets();\n                  ctrl.data.getObject();\n                });\n              });\n            }\n          });\n        }\n      }\n    },\n    changeEditState: function changeEditState() {\n      this.data.disabled = !this.data.disabled;\n    },\n    changeType: function changeType(type) {\n      this.dataCopied.targetLst = this.data.targetLst.filter(function (ele) {\n        return ele != undefined && eval(type) - 1 + \"\" === ele.TargetType;\n      });\n      this.$set(this.dataCopied, \"targetFullLst\", this.data.targetSavedLst.filter(function (ele) {\n        return ele != undefined && eval(type) - 1 + \"\" === ele.TargetType;\n      }));\n    },\n    setParent: function setParent(parent) {\n      var ctrl = this;\n      if (ctrl.ruleForm.TargetType == 3) {\n        $.each(ctrl.departmentLst, function (k, group) {\n          if (ctrl.$Utils.isEmpty(parent) && group.GroupId == parent) {\n            ctrl.ruleForm.Value = group;\n          }\n        });\n      }\n    }\n  },\n  created: function created() {\n    var ctrl = this;\n    if (ctrl.ruleForm.Id) {\n      ctrl.loadHistory(ctrl.ruleForm.Id);\n      ctrl.changeType(ctrl.ruleForm.TargetType);\n      if (ctrl.ruleForm.IsPublic == undefined) {\n        ctrl.ruleForm.IsPublic = true;\n      }\n      $.each(ctrl.data.targetLst, function (k, v) {\n        if (ctrl.ruleForm.Id === v.Id) {\n          ctrl.ruleForm.Permission = v.Permission;\n          return false;\n        }\n      });\n      ctrl.ruleForm.MilestoneVal = new Date(ctrl.ruleForm.ActualStartDate);\n    } else {\n      ctrl.ruleForm.Permission = \"Edit\";\n      if (ctrl.isLeader) {\n        ctrl.ruleForm.TargetType = ctrl.typeLst[2].Id;\n        ctrl.changeType(ctrl.typeLst[2].Id);\n      } else {\n        ctrl.ruleForm.TargetType = ctrl.typeLst[0].Id;\n        ctrl.changeType(ctrl.typeLst[0].Id);\n      }\n      ctrl.ruleForm.IsPublic = true;\n    }\n    var user = JSON.parse(ctrl.$getItemLocalStorage(ctrl.$localStorageConstant.LoggedOnUser));\n    if (user.LoginName !== \"superadmin\") {\n      ctrl.data.workers = ctrl.data.workers.filter(function (el) {\n        return el.LoginName && el.LoginName.indexOf(\"superadmin\") === -1;\n      });\n    }\n  }\n});\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(2)))\n\n/***/ }),\n\n/***/ 1006:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_HistoryGrid_vue__ = __webpack_require__(1009);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_18926a71_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_HistoryGrid_vue__ = __webpack_require__(1010);\nfunction injectStyle (ssrContext) {\n  __webpack_require__(1007)\n}\nvar normalizeComponent = __webpack_require__(0)\n/* script */\n\n/* template */\n\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_HistoryGrid_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_18926a71_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_HistoryGrid_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ 1007:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(1008);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(937)(\"7608b78c\", content, true);\n\n/***/ }),\n\n/***/ 1008:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(936)(true);\n// imports\n\n\n// module\nexports.push([module.i, \"#history-grid th{text-align:center!important}#history-grid td,#history-grid th,#history-grid tr{border:thin solid #d3d3d3}\", \"\", {\"version\":3,\"sources\":[\"/Users/yuukininomae/Sites/vue-crm3/src/components/dynamic/HistoryGrid.vue\"],\"names\":[],\"mappings\":\"AACA,iBACE,2BAA8B,CAE/B,AACD,mDAFE,yBAA6B,CAI9B\",\"file\":\"HistoryGrid.vue\",\"sourcesContent\":[\"\\n#history-grid th {\\n  text-align: center !important;\\n  border: solid thin lightgray;\\n}\\n#history-grid tr, #history-grid td {\\n  border: solid thin lightgray;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 1009:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  props: [\"dtSource\", \"dtHeader\"],\n  methods: {},\n  data: function data() {\n    return {};\n  }\n});\n\n/***/ }),\n\n/***/ 1010:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-card',{staticClass:\"box-card\",attrs:{\"id\":\"history-grid\"}},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"Lịch sử\")])]),_vm._v(\" \"),_c('div',{staticClass:\"el-table__body-wrapper is-scroll-left\"},[_c('table',{staticStyle:{\"width\":\"100%\"}},[_c('thead',{staticClass:\"positive-bg light text-bold\"},[_c('tr',_vm._l((_vm.dtHeader),function(h){return _c('th',[_vm._v(_vm._s(h))])}))]),_vm._v(\" \"),_c('tbody',_vm._l((_vm.dtSource),function(itemLog){return _c('tr',{style:({'background-color': itemLog.type=='body'? '#e4e5e6' : '#fff'})},[(itemLog.type=='head')?_c('td',{staticClass:\"success\",attrs:{\"colspan\":\"3\"}},[_vm._v(\"\\n          v.\"+_vm._s(itemLog.value.Version + '.0 ')),_c('strong',[_vm._v(_vm._s(itemLog.value.CreatedByName))]),_vm._v(\", \"+_vm._s(_vm.$Utils.formatDateTime(itemLog.value.Created,'DD-MM-YYYY HH:mm'))+\"\\n        \")]):_vm._e(),_vm._v(\" \"),(itemLog.type =='body')?_c('td',[_vm._v(_vm._s(itemLog.value.ColumnCaption))]):_vm._e(),_vm._v(\" \"),(itemLog.type =='body')?_c('td',[_vm._v(_vm._s(itemLog.value.OldDisplayValue))]):_vm._e(),_vm._v(\" \"),(itemLog.type =='body')?_c('td',[_vm._v(_vm._s(itemLog.value.NewDisplayValue))]):_vm._e()])}))])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ 1011:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-card',{staticClass:\"box-card\"},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',{staticStyle:{\"float\":\"left\"}},[_vm._v(\"Thông tin mục tiêu\")]),_vm._v(\" \"),_c('div',{staticStyle:{\"float\":\"right\",\"padding\":\"3px 0\"}},[(_vm.data.disabled==false && _vm.ruleForm.Permission && _vm.ruleForm.Permission !=='View' )?_c('el-button',{attrs:{\"icon\":\"fa fa-save\"},on:{\"click\":function($event){_vm.submitForm('ruleForm')}}}):_vm._e(),_vm._v(\" \"),(_vm.data.disabled==true && _vm.ruleForm.Permission && _vm.ruleForm.Permission !=='View' )?_c('el-button',{attrs:{\"icon\":\"el-icon-edit\"},on:{\"click\":_vm.changeEditState}}):_vm._e(),_vm._v(\" \"),(_vm.data.isEditable==true && _vm.data.item.Permission ==undefined )?_c('el-button',{attrs:{\"icon\":\"fa fa-eraser\"},on:{\"click\":function($event){_vm.resetForm('ruleForm')}}}):_vm._e(),_vm._v(\" \"),(_vm.ruleForm.Permission && _vm.ruleForm.Permission ==='Manage')?_c('el-button',{attrs:{\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){_vm.deleteTarget()}}}):_vm._e()],1)]),_vm._v(\" \"),_c('div',[_c('el-form',{ref:\"ruleForm\",attrs:{\"model\":_vm.ruleForm,\"rules\":_vm.rules,\"label-position\":_vm.$isMobileDevice?'top':'right',\"label-width\":\"150px\"}},[_c('el-form-item',{attrs:{\"label\":\"Tên:\",\"prop\":\"Name\"}},[_c('el-input',{attrs:{\"disabled\":_vm.data.disabled},model:{value:(_vm.ruleForm.Name),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Name\", $$v)},expression:\"ruleForm.Name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Hiển thị:\",\"prop\":\"IsPublic\"}},[_c('el-switch',{staticStyle:{\"display\":\"block\"},attrs:{\"disabled\":_vm.data.disabled,\"active-color\":\"#13ce66\",\"inactive-color\":\"#ff4949\",\"active-text\":\"Công khai\",\"inactive-text\":\"Riêng tư\"},model:{value:(_vm.ruleForm.IsPublic),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"IsPublic\", $$v)},expression:\"ruleForm.IsPublic\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"demo-form-inline\",attrs:{\"label\":\"Loại thời gian:\",\"prop\":\"Milestone\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"placeholder\":\"--Chọn--\",\"disabled\":_vm.data.disabled},on:{\"change\":function($event){_vm.ruleForm.MilestoneVal=''}},model:{value:(_vm.ruleForm.Milestone),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Milestone\", $$v)},expression:\"ruleForm.Milestone\"}},[_c('el-option',{attrs:{\"label\":\"Tuần\",\"value\":\"1\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"Tháng\",\"value\":\"2\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"Năm\",\"value\":\"3\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"Tuỳ chọn\",\"value\":\"4\"}})],1),_vm._v(\" \"),(_vm.ruleForm.Milestone==1)?_c('el-date-picker',{attrs:{\"type\":\"week\",\"format\":\"Tuần WW\",\"placeholder\":\"--Chọn tuần--\",\"disabled\":_vm.data.disabled},on:{\"change\":function($event){_vm.changeMilestoneVal($event, 'week')}},model:{value:(_vm.ruleForm.MilestoneVal),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"MilestoneVal\", $$v)},expression:\"ruleForm.MilestoneVal\"}}):_vm._e(),_vm._v(\" \"),(_vm.ruleForm.Milestone==2)?_c('el-date-picker',{attrs:{\"type\":\"month\",\"format\":\"MM\",\"placeholder\":\"--Chọn tháng--\",\"disabled\":_vm.data.disabled},on:{\"change\":function($event){_vm.changeMilestoneVal($event, 'month')}},model:{value:(_vm.ruleForm.MilestoneVal),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"MilestoneVal\", $$v)},expression:\"ruleForm.MilestoneVal\"}}):_vm._e(),_vm._v(\" \"),(_vm.ruleForm.Milestone==3)?_c('el-date-picker',{attrs:{\"type\":\"year\",\"placeholder\":\"--Chọn năm--\",\"disabled\":_vm.data.disabled},on:{\"change\":function($event){_vm.changeMilestoneVal($event, 'year')}},model:{value:(_vm.ruleForm.MilestoneVal),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"MilestoneVal\", $$v)},expression:\"ruleForm.MilestoneVal\"}}):_vm._e()],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"demo-form-inline\",attrs:{\"label\":\"Thời gian:\",\"prop\":\"startEndDate\"}},[_c('el-date-picker',{attrs:{\"format\":\"dd-MM-yyyy\",\"disabled\":_vm.data.disabled,\"type\":\"date\",\"placeholder\":\"Bắt đầu\"},model:{value:(_vm.ruleForm.ActualStartDate),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"ActualStartDate\", $$v)},expression:\"ruleForm.ActualStartDate\"}}),_vm._v(\" \"),_c('el-date-picker',{attrs:{\"format\":\"dd-MM-yyyy\",\"disabled\":_vm.data.disabled,\"type\":\"date\",\"placeholder\":\"Kết thúc\"},model:{value:(_vm.ruleForm.ActualFinishDate),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"ActualFinishDate\", $$v)},expression:\"ruleForm.ActualFinishDate\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Loại mục tiêu:\",\"prop\":\"TargetType\"}},[_c('el-radio-group',{attrs:{\"disabled\":!_vm.data.isEditable},on:{\"change\":function($event){_vm.changeType(_vm.ruleForm.TargetType)}},model:{value:(_vm.ruleForm.TargetType),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"TargetType\", $$v)},expression:\"ruleForm.TargetType\"}},_vm._l((_vm.typeLst),function(t){return _c('el-radio',{key:t.Id,attrs:{\"size\":\"mini\",\"label\":t.Id,\"border\":\"\",\"ng-show\":\"data.disabled?true:(t.Id ===ruleForm.TargetType) \"}},[_vm._v(_vm._s(t.Name))])}))],1),_vm._v(\" \"),(_vm.dataCopied.targetLst.length !=undefined && _vm.ruleForm.TargetType!=='1' )?_c('el-form-item',{attrs:{\"label\":\"Mục tiêu cha:\",\"prop\":\"ParentId\"}},[(_vm.isShowAllTarget || !_vm.data.isEditable)?_c('el-select',{attrs:{\"placeholder\":\"--Chọn--\",\"disabled\":_vm.ruleForm.Id!==undefined},on:{\"change\":function($event){_vm.setParent(_vm.ruleForm.ParentId)}},model:{value:(_vm.ruleForm.ParentId),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"ParentId\", $$v)},expression:\"ruleForm.ParentId\"}},_vm._l((_vm.dataCopied.targetFullLst),function(t){return _c('el-option',{key:t.Id,attrs:{\"label\":t.Name,\"value\":t.Id}})})):_c('el-select',{attrs:{\"placeholder\":\"--Chọn--\",\"disabled\":!_vm.data.isEditable},on:{\"change\":function($event){_vm.setParent(_vm.ruleForm.ParentId)}},model:{value:(_vm.ruleForm.ParentId),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"ParentId\", $$v)},expression:\"ruleForm.ParentId\"}},_vm._l((_vm.dataCopied.targetLst),function(t){return _c('el-option',{key:t.Id,attrs:{\"label\":t.Name,\"value\":t.Id}})})),_vm._v(\"\\n             \\n          \"),(_vm.ruleForm.Id===undefined)?_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"Bộ lọc thời gian sẽ ảnh hưởng tới số lượng mục tiêu cha hiển thị. Để hiển thị tất cả mục tiêu, hãy chọn 'Hiển thị tất cả'\",\"placement\":\"top\"}},[_c('i',{staticClass:\"fa fa-lg fa-info-circle\"})]):_vm._e(),_vm._v(\"\\n             \\n          \"),(_vm.ruleForm.Id===undefined)?_c('el-checkbox',{attrs:{\"label\":\"Hiển thị tất cả\"},model:{value:(_vm.isShowAllTarget),callback:function ($$v) {_vm.isShowAllTarget=$$v},expression:\"isShowAllTarget\"}}):_vm._e()],1):_vm._e(),_vm._v(\" \"),(_vm.data.departmentLst.length >0)?_c('el-form-item',{attrs:{\"label\":\"Thuộc phòng ban:\",\"prop\":\"Value\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"placeholder\":\"--Chọn--\",\"disabled\":_vm.data.disabled},model:{value:(_vm.ruleForm.Value),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Value\", $$v)},expression:\"ruleForm.Value\"}},_vm._l((_vm.data.departmentLst),function(t){return _c('el-option',{key:t.GroupId,attrs:{\"label\":t.GroupName,\"value\":t.GroupId}})}))],1):_vm._e(),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Quản lý:\",\"prop\":\"Owner\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"clearable\":\"\",\"placeholder\":\"--Chọn--\",\"disabled\":_vm.data.disabled},model:{value:(_vm.ruleForm.Owner),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Owner\", $$v)},expression:\"ruleForm.Owner\"}},_vm._l((_vm.data.workers),function(t){return (t.UserId.indexOf(';') == -1 && (_vm.ruleForm.Id || t.Status ==1))?_c('el-option',{key:t.UserId,attrs:{\"label\":t.Username,\"value\":t.UserId}}):_vm._e()}))],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Nhân sự thực hiện:\",\"prop\":\"Assigned\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"multiple\":\"\",\"placeholder\":\"--Chọn--\",\"disabled\":_vm.data.disabled},model:{value:(_vm.ruleForm.Assigned),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Assigned\", $$v)},expression:\"ruleForm.Assigned\"}},_vm._l((_vm.data.workers),function(t){return (_vm.ruleForm.Id || t.Status ==1)?_c('el-option',{key:t.UserId,attrs:{\"label\":t.Username,\"value\":t.UserId}}):_vm._e()}))],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"KPIs kế hoạch:\",\"prop\":\"Plan\"}},[_c('el-input',{attrs:{\"disabled\":_vm.data.disabled},on:{\"change\":function($event){_vm.autoCal()}},model:{value:(_vm.ruleForm.Plan),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Plan\", $$v)},expression:\"ruleForm.Plan\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"KPIs đạt:\",\"prop\":\"Done\"}},[_c('el-input',{attrs:{\"disabled\":_vm.data.disabled},on:{\"change\":function($event){_vm.autoCal()}},model:{value:(_vm.ruleForm.Done),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Done\", $$v)},expression:\"ruleForm.Done\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Đơn vị tính:\",\"prop\":\"Unit\"}},[_c('el-input',{attrs:{\"disabled\":_vm.data.disabled},model:{value:(_vm.ruleForm.Unit),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Unit\", $$v)},expression:\"ruleForm.Unit\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Tính % Hoàn thành:\",\"prop\":\"autoCal\"}},[_c('el-switch',{attrs:{\"disabled\":_vm.data.disabled},on:{\"change\":function($event){_vm.autoCal()}},model:{value:(_vm.ruleForm.autoCal),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"autoCal\", $$v)},expression:\"ruleForm.autoCal\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Tỉ lệ hoành thành:\",\"prop\":\"Progress\"}},[_c('el-input',{attrs:{\"disabled\":_vm.data.disabled},model:{value:(_vm.ruleForm.Progress),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Progress\", $$v)},expression:\"ruleForm.Progress\"}})],1)],1)],1)]),_vm._v(\" \"),(!_vm.data.isEditable)?_c('HistoryGrid',{attrs:{\"dtSource\":_vm.viewHistoryModel,\"dtHeader\":['Mục', 'Giá trị cũ', 'Giá trị mới']}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ 1012:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"tTbl\"}},[_c('div',{staticStyle:{\"flex\":\"1\",\"display\":\"flex\",\"align-items\":\"center\",\"justify-content\":\"space-between\",\"font-size\":\"14px\",\"padding-right\":\"8px\"}},[_c('el-row'),_vm._v(\" \"),(_vm.editableUser && !_vm.$isMobileDevice)?_c('el-tooltip',{attrs:{\"content\":\"Thêm mới mục tiêu\",\"placement\":\"top\"}},[_c('el-button',{attrs:{\"size\":\"mini\",\"icon\":\"fa fa-plus\"},on:{\"click\":function($event){_vm.addNewTarget()}}})],1):_vm._e(),_vm._v(\" \"),(_vm.editableUser && _vm.$isMobileDevice)?_c('el-button',{attrs:{\"size\":\"mini\",\"icon\":\"fa fa-plus\"},on:{\"click\":function($event){_vm.addNewTarget()}}}):_vm._e()],1),_vm._v(\" \"),_c('el-table',{attrs:{\"data\":_vm.dtSrc,\"border\":\"\",\"empty-text\":\"Không có dữ liệu\"}},[_c('el-table-column',{attrs:{\"label\":\"\",\"width\":\"50px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticStyle:{\"text-align\":\"center\",\"cursor\":\"pointer\"},on:{\"click\":function($event){_vm.openTargetDetail(scope.row)}}},[_c('i',{staticClass:\"fa-lg icon-magnifier-add\"})])]}}])}),_vm._v(\" \"),_c('el-table-tree-column',{attrs:{\"prop\":\"Name\",\"label\":\"Tên\",\"levelKey\":\"level\",\"treeKey\":\"Id\",\"parentKey\":\"ParentId\",\"min-width\":\"200px\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"Progress\",\"label\":\"Hoàn thành\",\"show-overflow-tooltip\":true},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-progress',{attrs:{\"text-inside\":true,\"stroke-width\":18,\"percentage\":Math.round(isNaN(scope.row.Progress)?0:scope.row.Progress)}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"TargetType\",\"label\":\"Loại\",\"show-overflow-tooltip\":true},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n        \"+_vm._s(_vm.targetsObj[scope.row.TargetType]?_vm.targetsObj[scope.row.TargetType].Name:'---')+\"\\n      \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"Plan\",\"label\":\"Kế hoạch\",\"show-overflow-tooltip\":true}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"Done\",\"label\":\"Đạt được\",\"show-overflow-tooltip\":true}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"Unit\",\"label\":\"Đơn vị\",\"show-overflow-tooltip\":true}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"Owner\",\"label\":\"Người quản lý\",\"show-overflow-tooltip\":true},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[(_vm.userWithAvatarLst[scope.row.Owner]!=undefined)?_c('img',{staticClass:\"avatar\",staticStyle:{\"margin\":\"8px 10px 0 0\"},attrs:{\"height\":\"35\",\"width\":\"35\",\"title\":_vm.userWithAvatarLst[scope.row.Owner].Username,\"src\":_vm.loadAvatar(_vm.userWithAvatarLst[scope.row.Owner].Avatar)}}):_c('span',[_vm._v(_vm._s(scope.row.OwnerName))])])]}}])})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ 940:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_TargetSetting_vue__ = __webpack_require__(1002);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_4c98b227_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_TargetSetting_vue__ = __webpack_require__(1012);\nfunction injectStyle (ssrContext) {\n  __webpack_require__(1000)\n}\nvar normalizeComponent = __webpack_require__(0)\n/* script */\n\n/* template */\n\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_TargetSetting_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_4c98b227_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_TargetSetting_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ 990:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_TargetDialog_vue__ = __webpack_require__(1005);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_1bb2e27e_hasScoped_true_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_TargetDialog_vue__ = __webpack_require__(1011);\nfunction injectStyle (ssrContext) {\n  __webpack_require__(1003)\n}\nvar normalizeComponent = __webpack_require__(0)\n/* script */\n\n/* template */\n\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1bb2e27e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_TargetDialog_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_1bb2e27e_hasScoped_true_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_TargetDialog_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/11.b398dfa7ba28e2b9110b.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true,\\\"alias\\\":{\\\"../img\\\":\\\"../static/img\\\"}}!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4c98b227\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/sass-loader/lib/loader.js?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./TargetSetting.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"77e39fee\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"minimize\":true,\"sourceMap\":true,\"alias\":{\"../img\":\"../static/img\"}}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-4c98b227\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/static/TargetSetting.vue\n// module id = 1000\n// module chunks = 1 11","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"#tTbl #plusBtn{position:fixed;top:120px;right:30px;z-index:99;cursor:pointer}\", \"\", {\"version\":3,\"sources\":[\"/Users/yuukininomae/Sites/vue-crm3/src/components/static/TargetSetting.vue\"],\"names\":[],\"mappings\":\"AACA,eACE,eAAgB,AAChB,UAAW,AACX,WAAY,AACZ,WAAY,AACZ,cAAgB,CACjB\",\"file\":\"TargetSetting.vue\",\"sourcesContent\":[\"\\n#tTbl #plusBtn {\\n  position: fixed;\\n  top: 120px;\\n  right: 30px;\\n  z-index: 99;\\n  cursor: pointer;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"minimize\":true,\"sourceMap\":true,\"alias\":{\"../img\":\"../static/img\"}}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-4c98b227\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/static/TargetSetting.vue\n// module id = 1001\n// module chunks = 1 11","<template>\n  <div id=\"tTbl\" >\n    <div style=\"flex: 1; display: flex; align-items: center; justify-content: space-between; font-size: 14px; padding-right: 8px;\">\n      <el-row>\n      </el-row>\n      <el-tooltip content=\"Thêm mới mục tiêu\" placement=\"top\" v-if=\"editableUser && !$isMobileDevice\">\n        <el-button size=\"mini\" icon=\"fa fa-plus\" @click=\"addNewTarget()\"></el-button>\n      </el-tooltip>\n      <el-button  v-if=\"editableUser && $isMobileDevice\" size=\"mini\" icon=\"fa fa-plus\" @click=\"addNewTarget()\"></el-button>\n    </div>\n    <el-table :data=\"dtSrc\" border empty-text=\"Không có dữ liệu\">\n      <el-table-column label=\"\" width=\"50px\">\n        <template slot-scope=\"scope\">\n          <div style=\"text-align: center;cursor: pointer\" @click=\"openTargetDetail(scope.row)\">\n            <i class=\"fa-lg icon-magnifier-add\" ></i>\n          </div>\n        </template>\n      </el-table-column>\n      <el-table-tree-column prop=\"Name\" label=\"Tên\" levelKey=\"level\" treeKey=\"Id\" parentKey=\"ParentId\" min-width=\"200px\"></el-table-tree-column>\n      <el-table-column prop=\"Progress\" label=\"Hoàn thành\" :show-overflow-tooltip=\"true\" >\n        <template slot-scope=\"scope\">\n          <el-progress :text-inside=\"true\" :stroke-width=\"18\" :percentage=\"Math.round(isNaN(scope.row.Progress)?0:scope.row.Progress)\"></el-progress>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"TargetType\" label=\"Loại\" :show-overflow-tooltip=\"true\" >\n        <template slot-scope=\"scope\">\n          {{targetsObj[scope.row.TargetType]?targetsObj[scope.row.TargetType].Name:'---'}}\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"Plan\" label=\"Kế hoạch\" :show-overflow-tooltip=\"true\" ></el-table-column>\n      <el-table-column prop=\"Done\" label=\"Đạt được\" :show-overflow-tooltip=\"true\" ></el-table-column>\n      <el-table-column prop=\"Unit\" label=\"Đơn vị\" :show-overflow-tooltip=\"true\" ></el-table-column>\n      <el-table-column prop=\"Owner\" label=\"Người quản lý\" :show-overflow-tooltip=\"true\" >\n        <template slot-scope=\"scope\">\n          <div>\n            <img v-if=\"userWithAvatarLst[scope.row.Owner]!=undefined\" class = 'avatar' style='margin: 8px 10px 0 0;' height='35' width='35' :title=\"userWithAvatarLst[scope.row.Owner].Username\"\n                 :src=\"loadAvatar(userWithAvatarLst[scope.row.Owner].Avatar)\" />\n            <span v-else>{{scope.row.OwnerName}}</span>\n          </div>\n        </template>\n      </el-table-column>\n    </el-table>\n\n\n  </div>\n\n</template>\n\n<script>\n  import Vue from 'vue'\n  import ElTableTreeColumn from  'element-tree-grid/src/index.js';\n  import ElTreeGrid from 'element-tree-grid';\n  import TargetDialog from '@/components/static/TargetDialog'\n  Vue.use(require('vue-moment'));\n  export default {\n    props:[\"targetLst\", \"options\", \"typeLst\", \"workerLst\", \"departmentLst\", \"targetFieldLst\", \"getTargets\", \"getObject\",\n      \"rootId\", \"targetSavedLst\", \"years\", \"months\", \"firstDayOfWeekCfg\"],\n    components:{ElTreeGrid,ElTableTreeColumn},\n    data() {\n      return {\n        dtSrc:[],\n        userWithAvatarLst: [],\n        editableUser: false,\n        weeksOfYear: this.years\n      }\n    },\n    methods: {\n      loadAvatar(avatar){\n       if(avatar == undefined) avatar = 'assets/images/avatars/profile.png';\n       avatar = avatar.replace('profile.jpg', 'profile.png');\n                var strAvatar =\n                  avatar === \"assets/images/avatars/profile.png\"\n                    ? this.$appUri.BaseURL + avatar\n                    : this.$appUri.BaseURL + avatar.replace('/','') + \"&Height=50&Width=50\";\n      return strAvatar;\n     },\n      openTargetDetail(row){\n        var dataToPass = {\n          item: row,\n          workers: this.workerLst,\n          // departments:this.departmentLst,\n          isEditable:false,\n          targetLst:this.targetLst,\n          departmentLst:this.departmentLst,\n          disabled:true,\n          targetFields:JSON.parse(this.targetFieldLst),\n          getTargets:this.getTargets,\n          getObject:this.getObject,\n          targetSavedLst:this.targetSavedLst,\n          weeksOfYear: this.weeksOfYear,\n          months: this.months,\n          firstDayOfWeekCfg: this.firstDayOfWeekCfg,\n        };\n        this.$hub.$emit(\n          \"set-modal-data\",\n          \"\",\n          \"50%\",\n          true,\n          \"center\",\n          TargetDialog,\n          false,\n          \"\",\n          dataToPass,\n          true\n        );\n        this.$hub.$emit(\"open-modal\");\n      },\n      addNewTarget(){\n        if(this.targetFieldLst && this.targetFieldLst.constructor != Array) return;\n        var dataToPass = {item: {},\n          workers: this.workerLst,\n          departments:this.departmentLst,\n          isEditable:true,\n          targetLst:this.targetLst,\n          departmentLst:this.departmentLst,\n          disabled:false,\n          targetFields:JSON.parse(this.targetFieldLst),\n          rootId:this.rootId,\n          getTargets:this.getTargets,\n          getObject:this.getObject,\n          targetSavedLst:this.targetSavedLst,\n          weeksOfYear: this.weeksOfYear,\n          months: this.months,\n          firstDayOfWeekCfg: this.firstDayOfWeekCfg,\n        };\n        this.$hub.$emit(\n          \"set-modal-data\",\n          \"\",\n          \"50%\",\n          true,\n          \"center\",\n          TargetDialog,\n          false,\n          \"\",\n          dataToPass,\n          false\n        );\n        this.$hub.$emit(\"open-modal\");\n      },\n    },\n    watch: {\n      targetLst: function(val){\n          this.dtSrc = this.$Utils.treeify(val, this.options.key, this.options.parentKey, 'level');\n      },\n    },\n    created(){\n      this.userWithAvatarLst = this.$Utils.rotateDementionArr(this.workerLst, 'UserId');\n      this.targetsObj = this.$Utils.rotateDementionArr(this.typeLst, 'Id');\n      this.dtSrc = this.$Utils.treeify(this.targetLst, this.options.key, this.options.parentKey, 'level');\n      var user = JSON.parse(this.$getItemLocalStorage(this.$localStorageConstant.LoggedOnUser));\n      if (this.$isSystemAdmin() || this.$isMantisAdmin()) {\n        this.editableUser = true;\n      } else if (user.GroupRoles) {\n        if (\n          (user.GroupRoles.Leader && user.GroupRoles.Leader.indexOf(user.Project.GroupId) > -1) ||\n          (user.GroupRoles.Director && user.GroupRoles.Director.indexOf(user.Project.GroupId) > -1)\n        ) {\n          this.editableUser = true;\n        }\n      } else {\n        this.editableUser = false;\n      }\n    },\n  };\n</script>\n\n<style lang=\"scss\">\n  #tTbl {\n    #plusBtn {\n      position: fixed;\n      top: 120px;\n      right: 30px;\n      z-index: 99;\n      cursor: pointer;\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/static/TargetSetting.vue","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true,\\\"alias\\\":{\\\"../img\\\":\\\"../static/img\\\"}}!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1bb2e27e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/sass-loader/lib/loader.js?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./TargetDialog.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"5aa07319\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"minimize\":true,\"sourceMap\":true,\"alias\":{\"../img\":\"../static/img\"}}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-1bb2e27e\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/static/TargetDialog.vue\n// module id = 1003\n// module chunks = 1 11","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"@media only screen and (max-width:768px){.el-input[data-v-1bb2e27e],.el-radio[data-v-1bb2e27e],.el-select[data-v-1bb2e27e]{width:100%}.el-radio[data-v-1bb2e27e]{margin-left:0!important}}\", \"\", {\"version\":3,\"sources\":[\"/Users/yuukininomae/Sites/vue-crm3/src/components/static/TargetDialog.vue\"],\"names\":[],\"mappings\":\"AACA,yCAEA,kFAGI,UAAY,CACf,AACD,2BACI,uBAA4B,CAC/B,CACA\",\"file\":\"TargetDialog.vue\",\"sourcesContent\":[\"\\n@media only screen and (max-width: 768px) {\\n  /* For mobile phones: */\\n.el-input[data-v-1bb2e27e],\\n  .el-select[data-v-1bb2e27e],\\n  .el-radio[data-v-1bb2e27e] {\\n    width: 100%;\\n}\\n.el-radio[data-v-1bb2e27e] {\\n    margin-left: 0px !important;\\n}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"minimize\":true,\"sourceMap\":true,\"alias\":{\"../img\":\"../static/img\"}}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-1bb2e27e\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/static/TargetDialog.vue\n// module id = 1004\n// module chunks = 1 11","<template>\n  <div>\n    <el-card class=\"box-card\">\n      <div slot=\"header\" class=\"clearfix\">\n        <span style=\"float: left;\">Thông tin mục tiêu</span>\n        <div style=\"float: right; padding: 3px 0\">\n          <el-button v-if=\"data.disabled==false && ruleForm.Permission && ruleForm.Permission !=='View' \" @click=\"submitForm('ruleForm')\" icon=\"fa fa-save\"/>\n          <el-button v-if=\"data.disabled==true && ruleForm.Permission && ruleForm.Permission !=='View' \" @click=\"changeEditState\" icon=\"el-icon-edit\"/>\n          <el-button v-if=\"data.isEditable==true && data.item.Permission ==undefined \" @click=\"resetForm('ruleForm')\" icon=\"fa fa-eraser\"/>\n          <el-button v-if=\"ruleForm.Permission && ruleForm.Permission ==='Manage'\" @click=\"deleteTarget()\" icon=\"el-icon-delete\"/>\n        </div>\n      </div>\n      <div>\n        <el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" :label-position=\"$isMobileDevice?'top':'right'\" label-width=\"150px\">\n          <el-form-item label=\"Tên:\" prop=\"Name\" >\n            <el-input v-model=\"ruleForm.Name\" :disabled=\"data.disabled\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"Hiển thị:\" prop=\"IsPublic\">\n            <el-switch :disabled=\"data.disabled\" style=\"display: block\" v-model=\"ruleForm.IsPublic\" active-color=\"#13ce66\"\n                       inactive-color=\"#ff4949\" active-text=\"Công khai\" inactive-text=\"Riêng tư\">\n            </el-switch>\n          </el-form-item>\n          <el-form-item label=\"Loại thời gian:\" prop=\"Milestone\" class=\"demo-form-inline\">\n            <el-select v-model=\"ruleForm.Milestone\" filterable placeholder=\"--Chọn--\" :disabled=\"data.disabled\" @change=\"ruleForm.MilestoneVal=''\">\n              <el-option label=\"Tuần\" value=\"1\"></el-option>\n              <el-option label=\"Tháng\" value=\"2\"></el-option>\n              <el-option label=\"Năm\" value=\"3\"></el-option>\n              <el-option label=\"Tuỳ chọn\" value=\"4\"></el-option>\n            </el-select>\n            <el-date-picker v-model=\"ruleForm.MilestoneVal\" type=\"week\" format=\"Tuần WW\" placeholder=\"--Chọn tuần--\" v-if=\"ruleForm.Milestone==1\"\n                            @change=\"changeMilestoneVal($event, 'week')\" :disabled=\"data.disabled\"></el-date-picker>\n\n            <el-date-picker v-model=\"ruleForm.MilestoneVal\" type=\"month\" format=\"MM\" placeholder=\"--Chọn tháng--\" v-if=\"ruleForm.Milestone==2\"\n                            @change=\"changeMilestoneVal($event, 'month')\" :disabled=\"data.disabled\"></el-date-picker>\n            <el-date-picker v-model=\"ruleForm.MilestoneVal\" type=\"year\" placeholder=\"--Chọn năm--\" v-if=\"ruleForm.Milestone==3\"\n                            @change=\"changeMilestoneVal($event, 'year')\" :disabled=\"data.disabled\"></el-date-picker>\n          </el-form-item>\n          <el-form-item label=\"Thời gian:\" prop=\"startEndDate\" class=\"demo-form-inline\">\n            <el-date-picker format = \"dd-MM-yyyy\" :disabled=\"data.disabled \" v-model=\"ruleForm.ActualStartDate\"\n                            type=\"date\" placeholder=\"Bắt đầu\">\n            </el-date-picker>\n            <el-date-picker format = \"dd-MM-yyyy\" :disabled=\"data.disabled\"\n                            v-model=\"ruleForm.ActualFinishDate\" type=\"date\" placeholder=\"Kết thúc\">\n            </el-date-picker>\n          </el-form-item>\n          <el-form-item label=\"Loại mục tiêu:\" prop=\"TargetType\" >\n            <el-radio-group v-model=\"ruleForm.TargetType\" :disabled=\"!data.isEditable\" @change=\"changeType(ruleForm.TargetType)\">\n              <el-radio size=\"mini\" v-for=\"t in typeLst\" :label=\"t.Id\" :key=\"t.Id\" border ng-show=\"data.disabled?true:(t.Id ===ruleForm.TargetType) \">{{t.Name}}</el-radio>\n            </el-radio-group>\n          </el-form-item>\n          <el-form-item label=\"Mục tiêu cha:\" prop=\"ParentId\" v-if=\"dataCopied.targetLst.length !=undefined && ruleForm.TargetType!=='1' \">\n            <el-select v-if=\"isShowAllTarget || !data.isEditable\" v-model=\"ruleForm.ParentId\" placeholder=\"--Chọn--\"  :disabled=\"ruleForm.Id!==undefined\" @change=\"setParent(ruleForm.ParentId)\">\n              <el-option v-for=\"t in dataCopied.targetFullLst\" :key=\"t.Id\" :label=\"t.Name\" :value=\"t.Id\"/>\n            </el-select>\n            <el-select v-else v-model=\"ruleForm.ParentId\" placeholder=\"--Chọn--\"  :disabled=\"!data.isEditable\" @change=\"setParent(ruleForm.ParentId)\">\n              <el-option v-for=\"t in dataCopied.targetLst\" :key=\"t.Id\" :label=\"t.Name\" :value=\"t.Id\"/>\n            </el-select>\n            &nbsp;&nbsp;&nbsp;\n            <el-tooltip v-if=\"ruleForm.Id===undefined\" class=\"item\" effect=\"dark\" content=\"Bộ lọc thời gian sẽ ảnh hưởng tới số lượng mục tiêu cha hiển thị. Để hiển thị tất cả mục tiêu, hãy chọn 'Hiển thị tất cả'\" placement=\"top\">\n              <i class=\"fa fa-lg fa-info-circle\"></i>\n            </el-tooltip>\n            &nbsp;&nbsp;&nbsp;\n            <el-checkbox  v-if=\"ruleForm.Id===undefined\" label=\"Hiển thị tất cả\" v-model=\"isShowAllTarget\"></el-checkbox>\n          </el-form-item>\n          <el-form-item v-if=\"data.departmentLst.length >0\" label=\"Thuộc phòng ban:\" prop=\"Value\">\n            <el-select v-model=\"ruleForm.Value\" filterable placeholder=\"--Chọn--\" :disabled=\"data.disabled\">\n              <el-option v-for=\"t in data.departmentLst\" :key=\"t.GroupId\" :label=\"t.GroupName\" :value=\"t.GroupId\"/>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"Quản lý:\" prop=\"Owner\">\n            <el-select v-model=\"ruleForm.Owner\" filterable clearable placeholder=\"--Chọn--\" :disabled=\"data.disabled\">\n              <el-option v-for=\"t in data.workers\" v-if=\"t.UserId.indexOf(';') == -1 && (ruleForm.Id || t.Status ==1)\" :key=\"t.UserId\" :label=\"t.Username\" :value=\"t.UserId\"/>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"Nhân sự thực hiện:\" prop=\"Assigned\">\n            <el-select v-model=\"ruleForm.Assigned\" filterable multiple placeholder=\"--Chọn--\" :disabled=\"data.disabled\">\n              <el-option v-for=\"t in data.workers\" :key=\"t.UserId\" :label=\"t.Username\" :value=\"t.UserId\" v-if=\"ruleForm.Id || t.Status ==1\" />\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"KPIs kế hoạch:\" prop=\"Plan\">\n            <el-input v-model=\"ruleForm.Plan\" @change=\"autoCal()\" :disabled=\"data.disabled\"/>\n          </el-form-item>\n          <el-form-item label=\"KPIs đạt:\" prop=\"Done\">\n            <el-input v-model=\"ruleForm.Done\" @change=\"autoCal()\" :disabled=\"data.disabled\"/>\n          </el-form-item>\n          <el-form-item label=\"Đơn vị tính:\" prop=\"Unit\">\n            <el-input v-model=\"ruleForm.Unit\" :disabled=\"data.disabled\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"Tính % Hoàn thành:\" prop=\"autoCal\">\n            <el-switch v-model=\"ruleForm.autoCal\" @change=\"autoCal()\" :disabled=\"data.disabled\"/>\n          </el-form-item>\n          <el-form-item label=\"Tỉ lệ hoành thành:\" prop=\"Progress\">\n            <el-input v-model=\"ruleForm.Progress\" :disabled=\"data.disabled\"/>\n          </el-form-item>\n        </el-form>\n      </div>\n    </el-card>\n    <HistoryGrid v-if=\"!data.isEditable\" :dtSource=viewHistoryModel :dtHeader=\"['Mục', 'Giá trị cũ', 'Giá trị mới']\" />\n  </div>\n</template>\n\n<script>\nimport HistoryGrid from \"@/components/dynamic/HistoryGrid\";\nimport Vue from \"vue\";\nVue.use(require(\"vue-moment\"));\nexport default {\n  components: {\n    HistoryGrid\n  },\n  props: [\"data\"],\n  data() {\n    var user = JSON.parse(\n      this.$getItemLocalStorage(this.$localStorageConstant.LoggedOnUser)\n    );\n    var isLeader =\n      !this.$isMantisAdmin() &&\n      !this.$isMantisAdmin() &&\n      user.GroupRoles &&\n      user.GroupRoles.Leader &&\n      user.GroupRoles.Leader.indexOf(user.Project.GroupId) > -1;\n    var ruleForm = {};\n    if (this.data.item.Name != undefined) {\n      ruleForm = this.$Lodash.cloneDeep(this.data.item);\n      if (\n        this.data.item.Assigned != undefined &&\n        !this.$Utils.equals(this.data.item.Assigned, \"\")\n      ) {\n        ruleForm.Assigned = this.data.item.Assigned.split(\";\").filter(item => {\n          return !this.$Utils.equals(item, \"\");\n        });\n      } else {\n        ruleForm.Assigned = [];\n      }\n      ruleForm.autoCal = false;\n      ruleForm.oldName = this.data.item.Name + \"\";\n      ruleForm.IsPublic = ruleForm.IsPublic === \"0\" ? false : true;\n    } else {\n      ruleForm.Name = \"\";\n      ruleForm.Value = \"\";\n      ruleForm.TargetType = \"\";\n      ruleForm.IsPublic = true;\n      ruleForm.ActualStartDate = \"\";\n      ruleForm.ActualFinishDate = \"\";\n      ruleForm.Assigned = [];\n      ruleForm.ParentId = \"\";\n      ruleForm.Owner = \"\";\n      ruleForm.Plan = \"\";\n      ruleForm.Done = \"\";\n      ruleForm.Unit = \"\";\n      ruleForm.Progress = 0;\n      ruleForm.autoCal = true;\n      ruleForm.oldName = \"\";\n      ruleForm.Milestone = \"\";\n      ruleForm.MilestoneVal = {};\n    }\n    return {\n      isShowAllTarget: false,\n      oldObject: this.$Lodash.cloneDeep(ruleForm),\n      typeLst: [\n        {\n          Id: \"1\",\n          Name: \"Mục tiêu công ty\"\n        },\n        {\n          Id: \"2\",\n          Name: \"Mục tiêu phòng ban\"\n        },\n        {\n          Id: \"3\",\n          Name: \"Mục tiêu cá nhân\"\n        }\n      ],\n      ruleForm: ruleForm,\n      isLeader: isLeader,\n      dataCopied: this.$Lodash.cloneDeep(this.data),\n      viewHistoryModel: [],\n      rules: {\n        Name: [\n          { required: true, message: \"Tên bắt buộc phải điền\", trigger: \"blur\" }\n        ],\n        Value: [\n          {\n            required: true,\n            message: \"Phòng ban bắt buộc phải chọn\",\n            trigger: \"change\"\n          }\n        ],\n        ParentId: [\n          {\n            required: true,\n            message: \"Mục tiêu cha bắt buộc phải chọn\",\n            trigger: \"change\"\n          }\n        ]\n      }\n    };\n  },\n  watch: {},\n  methods: {\n    changeMilestoneVal(val, type) {\n      this.ruleForm.ActualStartDate = val;\n      if (type === \"week\")\n        this.ruleForm.ActualFinishDate = Vue.moment(val)\n          .isoWeekday(this.dataCopied.firstDayOfWeekCfg)\n          .endOf(\"isoweek\")._d;\n      else if (type === \"month\")\n        this.ruleForm.ActualFinishDate = Vue.moment(val).endOf(\"month\")._d;\n      else if (type === \"year\")\n        this.ruleForm.ActualFinishDate = Vue.moment(val).endOf(\"year\")._d;\n      this.$forceUpdate();\n    },\n    submitForm(formName) {\n      var ctrl = this;\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          ctrl.checkExits();\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n    autoCal() {\n      if (this.ruleForm.autoCal == true) {\n        var tmp = Math.round(\n          Number(this.ruleForm.Done) / Number(this.ruleForm.Plan) * 100\n        );\n        this.ruleForm.Progress = isNaN(tmp) ? this.ruleForm.Progress : tmp;\n      }\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n    },\n    close() {\n      this.$hub.$emit(\"close-modal\");\n    },\n    deleteTarget() {\n      var ctrl = this;\n      this.$confirm(\"Mục tiêu sẽ bị xóa hoàn toàn. Tiếp tục?\", \"Cảnh báo\", {\n        confirmButtonText: \"Xóa\",\n        cancelButtonText: \"Bỏ qua\",\n        type: \"warning\"\n      })\n        .then(() => {\n          ctrl.recursiveDeleteTarget({\n            Id: ctrl.data.item.Id,\n            Level: ctrl.data.item.Level\n          });\n          ctrl.close();\n          //update tasks\n          var tRequest = this.$Utils.clone(this.$singleRequest);\n          tRequest.R1_RequestTemplate = \"AG_Task_Task.Search\";\n          tRequest.R1_RequestDataGroup = \"DataGroup.danh-sach-cong-viec.04b66\";\n          tRequest.R1_RequestFields = \"Id;Targets;TargetsName;\";\n          for (var i = 1; i <= eval(ctrl.data.item.Level - 5); i++) {\n            tRequest.R1_RequestFields += \"TargetsLevel\" + i + \";\";\n          }\n          tRequest[\"R1_TargetsLevel\" + [ctrl.model.Level - 5]] = ctrl.model.Id;\n          ctrl.$Utils.post(tRequest).then(function(response) {\n            response = ctrl.$Utils.getDataWithRoot(\n              response.R1,\n              \"Data.TasksDS.Task\"\n            );\n            var updateRequest = ctrl.$Lodash.cloneDeep(ctrl.$singleRequest);\n            $.each(response, function(index, value) {\n              var fVal = {};\n              fVal.Id = ctrl.$Lodash.cloneDeep(value.Id);\n              fVal.Targets = \"\";\n              fVal.TargetsName = \"\";\n              fVal.RequestTemplate = \"AG_Task_Task.Update\";\n              fVal.RequestDataGroup = \"DataGroup.danh-sach-cong-viec.04b66\";\n              fVal.RequestFields = \"Id;Targets;TargetsName;\";\n              $.each(value.Targets.split(\";\"), function(key, val) {\n                if (key < eval(ctrl.data.item.Level - 6)) {\n                  fVal.Targets += val + \";\";\n                  fVal[\"TargetsLevel\" + [key + 1]] = val;\n                  fVal.RequestFields += \"TargetsLevel\" + [key + 1] + \";\";\n                }\n              });\n              $.each(value.TargetsName.split(\";\"), function(key, val) {\n                if (key < eval(ctrl.data.item.Level - 6)) {\n                  fVal.TargetsName += val + \";\";\n                }\n              });\n              updateRequest.TotalRequests = index + 1;\n              updateRequest = ctrl.$Utils.updateParamsSingleRequest(\n                updateRequest,\n                fVal,\n                index + 1\n              );\n            });\n            ctrl.$Utils.post(updateRequest);\n          });\n        })\n        .catch(() => {});\n    },\n    recursiveDeleteTarget(data) {\n      var ctrl = this;\n      if (ctrl.$Utils.isEmpty(data)) {\n        var request = ctrl.$Lodash.cloneDeep(ctrl.$singleRequest);\n        request.R1_RequestTemplate = \"Setting.Delete\";\n        request.R1_Id = data.Id;\n        ctrl.$Utils.post(request).then(function(dData) {\n          $.each(ctrl.data.targetLst, function(key, value) {\n            if (data.Id == value.ParentId) {\n              ctrl.recursiveDeleteTarget(value);\n            }\n          });\n          ctrl.data.getTargets();\n          ctrl.data.getObject();\n        });\n      }\n    },\n    loadHistory(id) {\n      var ctrl = this;\n      var request = {\n        RequestAction: \"Request\",\n        RequestClass: \"xBase\",\n        TotalRequests: \"1\",\n        R1_RequestTemplate: \"ChangedLogs\",\n        R1_Code: \"ChangedHistory\",\n        R1_SourceId: id\n      };\n\n      var arrShowField = [];\n      arrShowField = ctrl.data.targetFields.filter(field => {\n        return field.History == \"true\";\n      });\n\n      ctrl.$Utils.post(request).then(function(result) {\n        if (result.success && result.R1.success) {\n          var logData = ctrl.$Utils.getDataWithRoot(\n            result,\n            \"R1.Data.DataDS.Logs\"\n          );\n          /**\n           * tạo vòng lặp để lấy từng bản ghi\n           * Dùng JSON.parse để decode dữ liệu lưu trong lịch sử thay đổi\n           */\n          $.each(logData, function(k, log) {\n            try {\n              ctrl.viewHistoryModel.push({ type: \"head\", value: log });\n              var logChanges = JSON.parse(log.Changes);\n              $.each(logChanges, function(k, change) {\n                if (\n                  arrShowField.length > 0 &&\n                  change.ColumnName !== \"Assigned\" &&\n                  change.ColumnName !== \"Id\"\n                ) {\n                  if (\n                    change.ColumnName === \"ActualStartDate\" ||\n                    change.ColumnName === \"ActualFinishDate\" ||\n                    change.ColumnName === \"Created\"\n                  ) {\n                    var format = \"DD/MM/YYYY\";\n                    var date = ctrl.$Utils.stringToDate(change.OldDisplayValue);\n                    change.OldDisplayValue =\n                      log.Version === \"1\"\n                        ? \"\"\n                        : ctrl.$Utils.formatDateTime(date, format);\n                    date = ctrl.$Utils.stringToDate(change.NewDisplayValue);\n                    change.NewDisplayValue = ctrl.$Utils.formatDateTime(\n                      date,\n                      format\n                    );\n                  }\n                  if (\n                    (change.ColumnName === \"AssignedName\" &&\n                      !change.OldDisplayValue &&\n                      change.NewDisplayValue === \"\") == false\n                  ) {\n                    arrShowField.forEach(function(field) {\n                      var object = { type: \"body\", value: change };\n                      var checkField =\n                        field.DynamicText != undefined &&\n                        field.DynamicText != \"\"\n                          ? field.DynamicText\n                          : field.Name;\n                      if (change.ColumnName == checkField) {\n                        if (change.ColumnName === \"TargetType\") {\n                          ctrl.typeLst.filter(item => {\n                            if (item.Id === change.OldDisplayValue)\n                              change.OldDisplayValue =\n                                log.Version === \"1\" ? \"\" : item.Name;\n                            if (item.Id === change.NewDisplayValue)\n                              change.NewDisplayValue = item.Name;\n                          });\n                        } else if (change.ColumnName === \"IsPublic\") {\n                          change.OldDisplayValue =\n                            log.Version === \"1\"\n                              ? \"\"\n                              : change.OldDisplayValue === \"0\" ||\n                                change.OldDisplayValue == false\n                                ? \"Riêng tư\"\n                                : \"Công khai\";\n                          change.NewDisplayValue =\n                            change.NewDisplayValue === \"0\" ||\n                            change.OldDisplayValue == false\n                              ? \"Riêng tư\"\n                              : \"Công khai\";\n                        }\n                        ctrl.viewHistoryModel.push(object);\n                      }\n                    });\n                  }\n                }\n              });\n            } catch (ex) {\n              console.log(ex);\n            }\n          });\n        }\n      });\n    },\n    checkExits() {\n      var ctrl = this;\n      var request = ctrl.$Lodash.cloneDeep(this.$singleRequest);\n      request.R1_RequestTemplate = \"xDynamicData_Setting.Search\";\n      request.R1_RequestFields = \"Name;ParentId;\";\n      request.R1_Name = ctrl.ruleForm.Name;\n      request.R1_RequestDataGroup = \"DataGroup.muc-tieu.091fb\";\n      request.R1_ParentId = ctrl.ruleForm.Parent\n        ? ctrl.ruleForm.Parent.Id\n        : ctrl.ruleForm.ParentId;\n      ctrl.$Utils.post(request).then(function(data) {\n        var listExitsTar = ctrl.$Utils.getDataWithRoot(\n          data.R1,\n          \"Data.DynamicDS.Setting\"\n        );\n        listExitsTar = listExitsTar.filter(function(el) {\n          return el.Name != ctrl.ruleForm.oldName;\n        });\n        if (listExitsTar.length != 0) {\n          ctrl.$message.error(\"Tên mục tiêu đã có\");\n        } else {\n          ctrl.saveOrUpdate();\n        }\n      });\n    },\n    saveOrUpdate() {\n      var ctrl = this;\n      var request = ctrl.$Lodash.cloneDeep(this.$singleRequest);\n      if (!ctrl.ruleForm.Id) {\n        request.R1_RequestTemplate = \"xDynamicData_Setting.Insert\";\n        request.R1_ReferenceId = ctrl.ruleForm.ParentId\n          ? ctrl.ruleForm.ParentId\n          : ctrl.data.rootId;\n        request.R1_NestedSetType = \"InsertLastChildNode\";\n      } else {\n        request.R1_RequestTemplate = \"xDynamicData_Setting.Update\";\n        request.R1_Id = ctrl.ruleForm.Id;\n      }\n      request.R1_RequestFields =\n        \"Plan;Done;Progress;Unit;Assigned;AssignedName;Owner;OwnerName;TargetType;Id;Index;\" +\n        \"Code;Name;Value;Description;LeftIndex;ParentId;Level;Value;RightIndex;Created;CreatedBy;Modified;IsPublic;ActualStartDate;ActualFinishDate;ValueName;Milestone\";\n      request.R1_RequestDataGroup = \"DataGroup.muc-tieu.091fb\";\n      request.R1_Name = ctrl.ruleForm.Name;\n      request.R1_Plan = ctrl.ruleForm.Plan;\n      request.R1_Done = ctrl.ruleForm.Done;\n      request.R1_Owner = ctrl.ruleForm.Owner;\n      request.R1_TargetType = ctrl.ruleForm.TargetType;\n      request.R1_Milestone = ctrl.ruleForm.Milestone;\n      if (!isNaN(parseFloat(ctrl.ruleForm.Progress + \"\"))) {\n        request.R1_Progress = ctrl.ruleForm.Progress;\n      } else {\n        delete ctrl.ruleForm.Progress;\n      }\n      request.R1_Unit = ctrl.ruleForm.Unit;\n      request.R1_IsPublic = ctrl.ruleForm.IsPublic == true ? 1 : 0;\n      request.R1_Value = ctrl.ruleForm.Value;\n      $.each(ctrl.departmentLst, (k, val) => {\n        var res = val.GroupId !== ctrl.ruleForm.Value;\n        if (!res) {\n          request.R1_ValueName = val.GroupName;\n        }\n        return res;\n      });\n      request.R1_Assigned = \"\";\n      request.R1_AssignedName = \"\";\n      $.each(ctrl.ruleForm.Assigned, function(k, Id) {\n        request.R1_Assigned += Id + \";\";\n        ctrl.data.workers.filter(function(user) {\n          if (user.UserId && user.UserId === Id) {\n            request.R1_AssignedName += user.Username + \",\";\n          }\n        });\n      });\n      ctrl.data.workers.filter(function(user) {\n        if (user.UserId && user.UserId === ctrl.ruleForm.Owner) {\n          request.R1_OwnerName = user.Username;\n        }\n      });\n      if (ctrl.$Utils.isEmpty(ctrl.ruleForm.ActualStartDate))\n        request.R1_ActualStartDate = ctrl.$Utils.formatDateTime(\n          ctrl.ruleForm.ActualStartDate\n        );\n      if (ctrl.$Utils.isEmpty(ctrl.ruleForm.ActualFinishDate))\n        request.R1_ActualFinishDate = ctrl.$Utils.formatDateTime(\n          ctrl.ruleForm.ActualFinishDate\n        );\n      ctrl.$Utils.post(request).then(function(data) {\n        ctrl.objectReturn = ctrl.$Lodash.cloneDeep(ctrl.ruleForm);\n        ctrl.objectReturn.Id = data.R1.Data;\n        if (ctrl.$Utils.isEmpty(ctrl.objectReturn, \"autoCals\"))\n          delete ctrl.objectReturn.autoCals;\n        if (ctrl.$Utils.isEmpty(ctrl.objectReturn, \"oldName\"))\n          delete ctrl.objectReturn.oldName;\n        ctrl.data.item = ctrl.$Lodash.cloneDeep(ctrl.objectReturn);\n        ctrl.objectReturn.AssignedName = request.R1_AssignedName;\n        ctrl.objectReturn.OwnerName = request.R1_OwnerName;\n        ctrl.objectReturn.Assigned = request.R1_Assigned;\n        ctrl.objectReturn.Value = request.R1_Value;\n        var arrChanged = ctrl.compareChange(ctrl.objectReturn, ctrl.oldObject);\n        if (ctrl.$Utils.isEmpty(arrChanged) && arrChanged.length > 0) {\n          if ((request.R1_RequestTemplate, \"xDynamicData_Setting.Insert\")) {\n            ctrl.createHistoryLogs(arrChanged);\n          } else {\n            arrChanged = arrChanged.filter(function(ele) {\n              return ctrl.$Utils.isEmpty(ele.OldDisplayValue);\n            });\n            if (ctrl.$Utils.equals(arrChanged, []) == false) {\n              ctrl.createHistoryLogs(arrChanged);\n            }\n          }\n        }\n        var target = ctrl.$Lodash.cloneDeep(ctrl.ruleForm);\n        target.Id = data.R1.Data;\n        ctrl.saveOrUpdatePermissions(ctrl.ruleForm.oldName !== \"\", target);\n        ctrl.close();\n      });\n    },\n    compareChange(objReturn, objOld) {\n      var ctrl = this;\n      var arrChanged = [];\n      ctrl.objTemp = ctrl.$Lodash.cloneDeep(ctrl.oldObject);\n      $.each(objReturn, function(key, val) {\n        if (ctrl.$Utils.isEmpty(val)) {\n          var valueReturn = val;\n          var caption = \"\";\n          var field = {};\n          $.each(ctrl.data.targetFields, function(k, values) {\n            if (values.Name === key && values.History == \"true\") {\n              caption = values.Caption;\n              field = values;\n            }\n          });\n          var obj = {};\n\n          $.each(objOld, function(key1, value) {\n            if (\n              key == key1 &&\n              ctrl.$Utils.equals(value, valueReturn) == false\n            ) {\n              obj[key1] = value;\n            }\n          });\n          var changedObject = {\n            ColumnCaption: caption,\n            ColumnName: key,\n            OldDisplayValue: obj[key],\n            OldValue: obj[key],\n            NewDisplayValue: objReturn[key] ? objReturn[key] : valueReturn,\n            NewValue: valueReturn\n          };\n          if (ctrl.$Utils.isEmpty(field)) {\n            switch (field.FieldColumnType) {\n              case \"DateTime\":\n                if (\n                  ctrl.$Utils.stringToDate(val).getTime() ==\n                  ctrl.$Utils.stringToDate(changedObject.OldValue).getTime()\n                ) {\n                  changedObject = undefined;\n                }\n                break;\n              case \"Double\":\n                if (\n                  !ctrl.$Utils.isEmpty(ctrl.objTemp[key]) &&\n                  ctrl.$Utils.isEmpty(objReturn[key])\n                ) {\n                  changedObject.OldDisplayValue = 0;\n                  changedObject.OldValue = 0;\n                }\n                break;\n              case \"Integer\":\n                if (\n                  !ctrl.$Utils.isEmpty(ctrl.objTemp[key]) &&\n                  ctrl.$Utils.isEmpty(objReturn[key])\n                ) {\n                  changedObject.OldDisplayValue = 0;\n                  changedObject.OldValue = 0;\n                }\n                break;\n            }\n          }\n\n          if (changedObject && ctrl.$Utils.isEmpty(caption) && caption != \"\") {\n            arrChanged.push(changedObject);\n          }\n        }\n      });\n      return arrChanged;\n    },\n    createHistoryLogs(arrChanged) {\n      var ctrl = this;\n      var countHistory = ctrl.$Utils.updateParamsSingleRequest(\n        ctrl.$Lodash.cloneDeep(ctrl.$singleRequest),\n        {\n          RequestTemplate: \"ChangedLogs.Count\",\n          SourceId: ctrl.objectReturn.Id,\n          Code: \"ChangedHistory\"\n        }\n      );\n      // ctrl.$Utils.showLoading('start');\n      ctrl.$Utils.post(countHistory).then(function(result) {\n        if (ctrl.$Utils.isEmpty(result, \"R1.Data\")) {\n          var insertRequest = ctrl.$Utils.updateParamsSingleRequest(\n            countHistory,\n            {\n              RequestTemplate: \"ChangedLogs.Insert\",\n              Version: parseInt(result.R1.Data) + 1,\n              Changes: JSON.stringify(arrChanged),\n              CreatedByName: ctrl.$Utils.getUserInfo(\"Username\")\n            }\n          );\n          ctrl.$Utils.post(insertRequest).then(function(insertResult) {\n            // ctrl.$Utils.showLoading('stop');\n          });\n        }\n      });\n    },\n    saveOrUpdatePermissions(isUpdate, target) {\n      var ctrl = this;\n      // ctrl.$Utils.showLoading('start');\n      var req = ctrl.$Lodash.cloneDeep(ctrl.$singleRequest);\n      if (isUpdate == true) {\n        var paramsSearchLinked = {\n          RequestAction: \"SearchLinked\",\n          RequestClass: \"Addition\",\n          ConditionFields: \"Parent;\",\n          StaticFields: \"Code;Child;Parent;Name;Created;Description\",\n          OrderFields: \"Created DESC\",\n          Parent: target.Id\n        };\n        ctrl.$Utils.post(paramsSearchLinked).then(function(result) {\n          if (result.TotalCount > 0) {\n            var arrLink =\n              result.TotalCount == 1\n                ? [result.Data.DataDS.Linked]\n                : result.Data.DataDS.Linked;\n            var removeLinks = {\n              RequestClass: \"xBase\",\n              RequestAction: \"Request\",\n              TotalRequests: arrLink.length,\n              RequestTemplate: \"Permission.Remove\"\n            };\n            $.each(arrLink, function(link, key) {\n              removeLinks[\"R\" + (key + 1) + \"_Id\"] = link.Id;\n            });\n            ctrl.savePermission(target, removeLinks);\n          }\n        });\n      } else {\n        ctrl.savePermission(target);\n      }\n    },\n    savePermission(target, removeLinks) {\n      var ctrl = this;\n      if (target.IsPublic == true) {\n        ctrl.$Utils.linkToRoleEveryone([\n          {\n            Id: target.Id,\n            Caption: target.Name\n          }\n        ]);\n        //ntn load target again\n        ctrl.data.getTargets();\n        ctrl.data.getObject();\n      } else {\n        var permissons = [];\n        var leaders = [];\n        var groups = [];\n        groups.push(target.Value);\n        if (groups && groups.length > 0) {\n          var req = {};\n          groups.filter(function(gro, key) {\n            req[\"R\" + ctrl.ix + \"_RequestTemplate\"] = \"OrgnizationList\";\n            req[\"R\" + ctrl.ix + \"_GroupName\"] = \"Leader\";\n            req[\"R\" + ctrl.ix + \"_GroupParent\"] = gro.GroupId;\n            req[\"R\" + ctrl.ix + \"_RequestDataType\"] = \"json\";\n            req[\"R\" + ctrl.ix + \"_GroupType\"] = \"2\";\n            ctrl.ix++;\n          });\n          req.TotalRequests = ctrl.ix - 1;\n          req.RequestClass = \"xBase\";\n          req.RequestAction = \"Request\";\n          ctrl.$Utils.post(req).then(function(data1) {\n            for (var k = 1; k < ctrl.ix; k++) {\n              var ele = ctrl.$Utils.getDataWithRoot(\n                data1,\n                \"R\" + k + \".Data.UserDS.Group\"\n              );\n              if (ele[0] != undefined) {\n                if (ele[0].GroupName === \"Leader\") {\n                  leaders = leaders.concat(ele);\n                }\n              }\n            }\n            var strLeaders = \"\";\n            leaders.filter(function(ele, key) {\n              if (ele.GroupParent == groups[0].GroupId) {\n                strLeaders += ele.GroupId + \";\";\n                if (target.TargetType == \"2\" || target.TargetType == \"1\") {\n                  var p = {\n                    Parrent: target.Id,\n                    Code: \"Edit\",\n                    Name: target.Name + \" - Edit\",\n                    Child: ele.GroupId,\n                    ChildTable: \"tblGroup\"\n                  };\n                  permissons.push(p);\n                } else if (target.TargetType == \"3\") {\n                  var p1 = {\n                    Parrent: target.Id,\n                    Code: \"Manage\",\n                    Name: target.Name + \" - Manage\",\n                    Child: ele.GroupId,\n                    ChildTable: \"tblGroup\"\n                  };\n                  permissons.push(p1);\n                }\n              }\n            });\n            if (target.Owner && strLeaders.indexOf(target.Owner) == -1) {\n              var p = {\n                Parrent: target.Id,\n                Code: \"Edit\",\n                Name: target.Name + \" - Edit\",\n                Child: target.Owner,\n                ChildTable: \"tblUser\"\n              };\n              permissons.push(p);\n            }\n            if (target.Assigned) {\n              target.Assigned.filter(function(user, key) {\n                if (user !== \"\" && strLeaders.indexOf(user) == -1) {\n                  var p = {\n                    Parrent: target.Id,\n                    Code: \"Edit\",\n                    Name: target.Name + \" - Edit\",\n                    Child: user,\n                    ChildTable: \"tblUser\"\n                  };\n                  permissons.push(p);\n                }\n              });\n            }\n            //\n            //\n            var p10 = {\n              Parrent: target.Id,\n              Code: \"Manage\",\n              Name: target.Name + \" - Manage\",\n              Child: ctrl.$administrator,\n              ChildTable: \"tblGroup\"\n            };\n            permissons.push(p10);\n            var p11 = {\n              Parrent: target.Id,\n              Code: \"Manage\",\n              Name: target.Name + \" - Manage\",\n              Child: ctrl.$supervisor,\n              ChildTable: \"tblGroup\"\n            };\n            permissons.push(p11);\n            //\n            //\n            var persReadyToInsert = {};\n            var index = 1;\n            permissons.filter(function(p, k) {\n              persReadyToInsert[\"R\" + index + \"_RequestClass\"] = \"xBase\";\n              persReadyToInsert[\"R\" + index + \"_RequestAction\"] =\n                \"LinkUserToObject\";\n              persReadyToInsert[\"R\" + index + \"_ParentTable\"] = \"xObject\";\n              persReadyToInsert[\"R\" + index + \"_RequestTemplate\"] =\n                \"Permission.Insert\";\n              persReadyToInsert[\"R\" + index + \"_Parent\"] = p.Parrent;\n              persReadyToInsert[\"R\" + index + \"_Child\"] = p.Child;\n              persReadyToInsert[\"R\" + index + \"_Code\"] = p.Code;\n              persReadyToInsert[\"R\" + index + \"_Name\"] = p.Name;\n              persReadyToInsert[\"R\" + index + \"_ChildTable\"] = p.ChildTable;\n              index++;\n            });\n            persReadyToInsert.TotalRequests = permissons.length;\n            persReadyToInsert.RequestClass = \"xBase\";\n            persReadyToInsert.RequestAction = \"Request\";\n            if (removeLinks == undefined) {\n              ctrl.$Utils.post(persReadyToInsert).then(function(data3) {\n                // ntn load target again\n                ctrl.data.getObject();\n                ctrl.data.getTargets();\n              });\n            } else {\n              ctrl.$Utils.post(removeLinks).then(function(data2) {\n                ctrl.$Utils.post(persReadyToInsert).then(function(data3) {\n                  // ntn load target again\n                  ctrl.data.getTargets();\n                  ctrl.data.getObject();\n                });\n              });\n            }\n          });\n        }\n      }\n    },\n    changeEditState() {\n      this.data.disabled = !this.data.disabled;\n    },\n    changeType(type) {\n      this.dataCopied.targetLst = this.data.targetLst.filter(function(ele) {\n        return ele != undefined && eval(type) - 1 + \"\" === ele.TargetType;\n      });\n      this.$set(\n        this.dataCopied,\n        \"targetFullLst\",\n        this.data.targetSavedLst.filter(function(ele) {\n          return ele != undefined && eval(type) - 1 + \"\" === ele.TargetType;\n        })\n      );\n    },\n    setParent(parent) {\n      var ctrl = this;\n      if (ctrl.ruleForm.TargetType == 3) {\n        // ctrl.model.Value = '';\n        $.each(ctrl.departmentLst, function(k, group) {\n          if (ctrl.$Utils.isEmpty(parent) && group.GroupId == parent) {\n            ctrl.ruleForm.Value = group;\n          }\n        });\n      }\n    }\n  },\n  created() {\n    var ctrl = this;\n    if (ctrl.ruleForm.Id) {\n      ctrl.loadHistory(ctrl.ruleForm.Id);\n      ctrl.changeType(ctrl.ruleForm.TargetType);\n      if (ctrl.ruleForm.IsPublic == undefined) {\n        ctrl.ruleForm.IsPublic = true;\n      }\n      $.each(ctrl.data.targetLst, (k, v) => {\n        if (ctrl.ruleForm.Id === v.Id) {\n          ctrl.ruleForm.Permission = v.Permission;\n          return false;\n        }\n      });\n      ctrl.ruleForm.MilestoneVal = new Date(ctrl.ruleForm.ActualStartDate);\n    } else {\n      ctrl.ruleForm.Permission = \"Edit\";\n      if (ctrl.isLeader) {\n        ctrl.ruleForm.TargetType = ctrl.typeLst[2].Id;\n        ctrl.changeType(ctrl.typeLst[2].Id);\n      } else {\n        ctrl.ruleForm.TargetType = ctrl.typeLst[0].Id;\n        ctrl.changeType(ctrl.typeLst[0].Id);\n      }\n      ctrl.ruleForm.IsPublic = true;\n    }\n    var user = JSON.parse(\n      ctrl.$getItemLocalStorage(ctrl.$localStorageConstant.LoggedOnUser)\n    );\n    if (user.LoginName !== \"superadmin\") {\n      ctrl.data.workers = ctrl.data.workers.filter(el => {\n        return el.LoginName && el.LoginName.indexOf(\"superadmin\") === -1;\n      });\n    }\n  }\n};\n</script>\n<style lang=\"scss\" scoped>\n@media only screen and (max-width: 768px) {\n  /* For mobile phones: */\n  .el-input,\n  .el-select,\n  .el-radio {\n    width: 100%;\n  }\n  .el-radio {\n    margin-left: 0px !important;\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/static/TargetDialog.vue","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true,\\\"alias\\\":{\\\"../img\\\":\\\"../static/img\\\"}}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-18926a71\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./HistoryGrid.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./HistoryGrid.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-18926a71\\\",\\\"hasScoped\\\":false,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./HistoryGrid.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/dynamic/HistoryGrid.vue\n// module id = 1006\n// module chunks = 1 11","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true,\\\"alias\\\":{\\\"../img\\\":\\\"../static/img\\\"}}!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-18926a71\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/sass-loader/lib/loader.js?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./HistoryGrid.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"7608b78c\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"minimize\":true,\"sourceMap\":true,\"alias\":{\"../img\":\"../static/img\"}}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-18926a71\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/dynamic/HistoryGrid.vue\n// module id = 1007\n// module chunks = 1 11","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"#history-grid th{text-align:center!important}#history-grid td,#history-grid th,#history-grid tr{border:thin solid #d3d3d3}\", \"\", {\"version\":3,\"sources\":[\"/Users/yuukininomae/Sites/vue-crm3/src/components/dynamic/HistoryGrid.vue\"],\"names\":[],\"mappings\":\"AACA,iBACE,2BAA8B,CAE/B,AACD,mDAFE,yBAA6B,CAI9B\",\"file\":\"HistoryGrid.vue\",\"sourcesContent\":[\"\\n#history-grid th {\\n  text-align: center !important;\\n  border: solid thin lightgray;\\n}\\n#history-grid tr, #history-grid td {\\n  border: solid thin lightgray;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"minimize\":true,\"sourceMap\":true,\"alias\":{\"../img\":\"../static/img\"}}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-18926a71\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/dynamic/HistoryGrid.vue\n// module id = 1008\n// module chunks = 1 11","<template>\n  <el-card id=\"history-grid\" class=\"box-card\">\n    <div slot=\"header\" class=\"clearfix\">\n      <span>Lịch sử</span>\n    </div>\n    <div class=\"el-table__body-wrapper is-scroll-left\">\n      <table style=\"width: 100%\">\n        <thead class=\"positive-bg light text-bold\">\n        <tr>\n          <th v-for=\"h in dtHeader\">{{h}}</th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr v-for=\"itemLog in dtSource\" :style=\"{'background-color': itemLog.type=='body'? '#e4e5e6' : '#fff'}\">\n          <td v-if=\"itemLog.type=='head'\" class=\"success\" colspan=\"3\">\n            v.{{itemLog.value.Version + '.0 '}}<strong>{{itemLog.value.CreatedByName}}</strong>, {{$Utils.formatDateTime(itemLog.value.Created,'DD-MM-YYYY HH:mm')}}\n          </td>\n          <td v-if=\"itemLog.type =='body'\" >{{itemLog.value.ColumnCaption}}</td>\n          <td v-if=\"itemLog.type =='body'\">{{itemLog.value.OldDisplayValue}}</td>\n          <td v-if=\"itemLog.type =='body'\">{{itemLog.value.NewDisplayValue}}</td>\n        </tr>\n        </tbody>\n      </table>\n    </div>\n  </el-card>\n</template>\n<script>\n  export default {\n    props: [\"dtSource\",\"dtHeader\"],\n    methods: {\n    },\n    data() {\n      return {\n      };\n    }\n  }\n</script>\n<style lang=\"scss\">\n  #history-grid {\n    th {\n      text-align: center !important;\n      border: solid thin lightgray;\n    }\n    tr, td {\n      border : solid thin lightgray;\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/dynamic/HistoryGrid.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-card',{staticClass:\"box-card\",attrs:{\"id\":\"history-grid\"}},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"Lịch sử\")])]),_vm._v(\" \"),_c('div',{staticClass:\"el-table__body-wrapper is-scroll-left\"},[_c('table',{staticStyle:{\"width\":\"100%\"}},[_c('thead',{staticClass:\"positive-bg light text-bold\"},[_c('tr',_vm._l((_vm.dtHeader),function(h){return _c('th',[_vm._v(_vm._s(h))])}))]),_vm._v(\" \"),_c('tbody',_vm._l((_vm.dtSource),function(itemLog){return _c('tr',{style:({'background-color': itemLog.type=='body'? '#e4e5e6' : '#fff'})},[(itemLog.type=='head')?_c('td',{staticClass:\"success\",attrs:{\"colspan\":\"3\"}},[_vm._v(\"\\n          v.\"+_vm._s(itemLog.value.Version + '.0 ')),_c('strong',[_vm._v(_vm._s(itemLog.value.CreatedByName))]),_vm._v(\", \"+_vm._s(_vm.$Utils.formatDateTime(itemLog.value.Created,'DD-MM-YYYY HH:mm'))+\"\\n        \")]):_vm._e(),_vm._v(\" \"),(itemLog.type =='body')?_c('td',[_vm._v(_vm._s(itemLog.value.ColumnCaption))]):_vm._e(),_vm._v(\" \"),(itemLog.type =='body')?_c('td',[_vm._v(_vm._s(itemLog.value.OldDisplayValue))]):_vm._e(),_vm._v(\" \"),(itemLog.type =='body')?_c('td',[_vm._v(_vm._s(itemLog.value.NewDisplayValue))]):_vm._e()])}))])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-18926a71\",\"hasScoped\":false,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/dynamic/HistoryGrid.vue\n// module id = 1010\n// module chunks = 1 11","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-card',{staticClass:\"box-card\"},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',{staticStyle:{\"float\":\"left\"}},[_vm._v(\"Thông tin mục tiêu\")]),_vm._v(\" \"),_c('div',{staticStyle:{\"float\":\"right\",\"padding\":\"3px 0\"}},[(_vm.data.disabled==false && _vm.ruleForm.Permission && _vm.ruleForm.Permission !=='View' )?_c('el-button',{attrs:{\"icon\":\"fa fa-save\"},on:{\"click\":function($event){_vm.submitForm('ruleForm')}}}):_vm._e(),_vm._v(\" \"),(_vm.data.disabled==true && _vm.ruleForm.Permission && _vm.ruleForm.Permission !=='View' )?_c('el-button',{attrs:{\"icon\":\"el-icon-edit\"},on:{\"click\":_vm.changeEditState}}):_vm._e(),_vm._v(\" \"),(_vm.data.isEditable==true && _vm.data.item.Permission ==undefined )?_c('el-button',{attrs:{\"icon\":\"fa fa-eraser\"},on:{\"click\":function($event){_vm.resetForm('ruleForm')}}}):_vm._e(),_vm._v(\" \"),(_vm.ruleForm.Permission && _vm.ruleForm.Permission ==='Manage')?_c('el-button',{attrs:{\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){_vm.deleteTarget()}}}):_vm._e()],1)]),_vm._v(\" \"),_c('div',[_c('el-form',{ref:\"ruleForm\",attrs:{\"model\":_vm.ruleForm,\"rules\":_vm.rules,\"label-position\":_vm.$isMobileDevice?'top':'right',\"label-width\":\"150px\"}},[_c('el-form-item',{attrs:{\"label\":\"Tên:\",\"prop\":\"Name\"}},[_c('el-input',{attrs:{\"disabled\":_vm.data.disabled},model:{value:(_vm.ruleForm.Name),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Name\", $$v)},expression:\"ruleForm.Name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Hiển thị:\",\"prop\":\"IsPublic\"}},[_c('el-switch',{staticStyle:{\"display\":\"block\"},attrs:{\"disabled\":_vm.data.disabled,\"active-color\":\"#13ce66\",\"inactive-color\":\"#ff4949\",\"active-text\":\"Công khai\",\"inactive-text\":\"Riêng tư\"},model:{value:(_vm.ruleForm.IsPublic),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"IsPublic\", $$v)},expression:\"ruleForm.IsPublic\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"demo-form-inline\",attrs:{\"label\":\"Loại thời gian:\",\"prop\":\"Milestone\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"placeholder\":\"--Chọn--\",\"disabled\":_vm.data.disabled},on:{\"change\":function($event){_vm.ruleForm.MilestoneVal=''}},model:{value:(_vm.ruleForm.Milestone),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Milestone\", $$v)},expression:\"ruleForm.Milestone\"}},[_c('el-option',{attrs:{\"label\":\"Tuần\",\"value\":\"1\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"Tháng\",\"value\":\"2\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"Năm\",\"value\":\"3\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"Tuỳ chọn\",\"value\":\"4\"}})],1),_vm._v(\" \"),(_vm.ruleForm.Milestone==1)?_c('el-date-picker',{attrs:{\"type\":\"week\",\"format\":\"Tuần WW\",\"placeholder\":\"--Chọn tuần--\",\"disabled\":_vm.data.disabled},on:{\"change\":function($event){_vm.changeMilestoneVal($event, 'week')}},model:{value:(_vm.ruleForm.MilestoneVal),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"MilestoneVal\", $$v)},expression:\"ruleForm.MilestoneVal\"}}):_vm._e(),_vm._v(\" \"),(_vm.ruleForm.Milestone==2)?_c('el-date-picker',{attrs:{\"type\":\"month\",\"format\":\"MM\",\"placeholder\":\"--Chọn tháng--\",\"disabled\":_vm.data.disabled},on:{\"change\":function($event){_vm.changeMilestoneVal($event, 'month')}},model:{value:(_vm.ruleForm.MilestoneVal),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"MilestoneVal\", $$v)},expression:\"ruleForm.MilestoneVal\"}}):_vm._e(),_vm._v(\" \"),(_vm.ruleForm.Milestone==3)?_c('el-date-picker',{attrs:{\"type\":\"year\",\"placeholder\":\"--Chọn năm--\",\"disabled\":_vm.data.disabled},on:{\"change\":function($event){_vm.changeMilestoneVal($event, 'year')}},model:{value:(_vm.ruleForm.MilestoneVal),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"MilestoneVal\", $$v)},expression:\"ruleForm.MilestoneVal\"}}):_vm._e()],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"demo-form-inline\",attrs:{\"label\":\"Thời gian:\",\"prop\":\"startEndDate\"}},[_c('el-date-picker',{attrs:{\"format\":\"dd-MM-yyyy\",\"disabled\":_vm.data.disabled,\"type\":\"date\",\"placeholder\":\"Bắt đầu\"},model:{value:(_vm.ruleForm.ActualStartDate),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"ActualStartDate\", $$v)},expression:\"ruleForm.ActualStartDate\"}}),_vm._v(\" \"),_c('el-date-picker',{attrs:{\"format\":\"dd-MM-yyyy\",\"disabled\":_vm.data.disabled,\"type\":\"date\",\"placeholder\":\"Kết thúc\"},model:{value:(_vm.ruleForm.ActualFinishDate),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"ActualFinishDate\", $$v)},expression:\"ruleForm.ActualFinishDate\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Loại mục tiêu:\",\"prop\":\"TargetType\"}},[_c('el-radio-group',{attrs:{\"disabled\":!_vm.data.isEditable},on:{\"change\":function($event){_vm.changeType(_vm.ruleForm.TargetType)}},model:{value:(_vm.ruleForm.TargetType),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"TargetType\", $$v)},expression:\"ruleForm.TargetType\"}},_vm._l((_vm.typeLst),function(t){return _c('el-radio',{key:t.Id,attrs:{\"size\":\"mini\",\"label\":t.Id,\"border\":\"\",\"ng-show\":\"data.disabled?true:(t.Id ===ruleForm.TargetType) \"}},[_vm._v(_vm._s(t.Name))])}))],1),_vm._v(\" \"),(_vm.dataCopied.targetLst.length !=undefined && _vm.ruleForm.TargetType!=='1' )?_c('el-form-item',{attrs:{\"label\":\"Mục tiêu cha:\",\"prop\":\"ParentId\"}},[(_vm.isShowAllTarget || !_vm.data.isEditable)?_c('el-select',{attrs:{\"placeholder\":\"--Chọn--\",\"disabled\":_vm.ruleForm.Id!==undefined},on:{\"change\":function($event){_vm.setParent(_vm.ruleForm.ParentId)}},model:{value:(_vm.ruleForm.ParentId),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"ParentId\", $$v)},expression:\"ruleForm.ParentId\"}},_vm._l((_vm.dataCopied.targetFullLst),function(t){return _c('el-option',{key:t.Id,attrs:{\"label\":t.Name,\"value\":t.Id}})})):_c('el-select',{attrs:{\"placeholder\":\"--Chọn--\",\"disabled\":!_vm.data.isEditable},on:{\"change\":function($event){_vm.setParent(_vm.ruleForm.ParentId)}},model:{value:(_vm.ruleForm.ParentId),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"ParentId\", $$v)},expression:\"ruleForm.ParentId\"}},_vm._l((_vm.dataCopied.targetLst),function(t){return _c('el-option',{key:t.Id,attrs:{\"label\":t.Name,\"value\":t.Id}})})),_vm._v(\"\\n             \\n          \"),(_vm.ruleForm.Id===undefined)?_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"Bộ lọc thời gian sẽ ảnh hưởng tới số lượng mục tiêu cha hiển thị. Để hiển thị tất cả mục tiêu, hãy chọn 'Hiển thị tất cả'\",\"placement\":\"top\"}},[_c('i',{staticClass:\"fa fa-lg fa-info-circle\"})]):_vm._e(),_vm._v(\"\\n             \\n          \"),(_vm.ruleForm.Id===undefined)?_c('el-checkbox',{attrs:{\"label\":\"Hiển thị tất cả\"},model:{value:(_vm.isShowAllTarget),callback:function ($$v) {_vm.isShowAllTarget=$$v},expression:\"isShowAllTarget\"}}):_vm._e()],1):_vm._e(),_vm._v(\" \"),(_vm.data.departmentLst.length >0)?_c('el-form-item',{attrs:{\"label\":\"Thuộc phòng ban:\",\"prop\":\"Value\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"placeholder\":\"--Chọn--\",\"disabled\":_vm.data.disabled},model:{value:(_vm.ruleForm.Value),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Value\", $$v)},expression:\"ruleForm.Value\"}},_vm._l((_vm.data.departmentLst),function(t){return _c('el-option',{key:t.GroupId,attrs:{\"label\":t.GroupName,\"value\":t.GroupId}})}))],1):_vm._e(),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Quản lý:\",\"prop\":\"Owner\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"clearable\":\"\",\"placeholder\":\"--Chọn--\",\"disabled\":_vm.data.disabled},model:{value:(_vm.ruleForm.Owner),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Owner\", $$v)},expression:\"ruleForm.Owner\"}},_vm._l((_vm.data.workers),function(t){return (t.UserId.indexOf(';') == -1 && (_vm.ruleForm.Id || t.Status ==1))?_c('el-option',{key:t.UserId,attrs:{\"label\":t.Username,\"value\":t.UserId}}):_vm._e()}))],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Nhân sự thực hiện:\",\"prop\":\"Assigned\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"multiple\":\"\",\"placeholder\":\"--Chọn--\",\"disabled\":_vm.data.disabled},model:{value:(_vm.ruleForm.Assigned),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Assigned\", $$v)},expression:\"ruleForm.Assigned\"}},_vm._l((_vm.data.workers),function(t){return (_vm.ruleForm.Id || t.Status ==1)?_c('el-option',{key:t.UserId,attrs:{\"label\":t.Username,\"value\":t.UserId}}):_vm._e()}))],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"KPIs kế hoạch:\",\"prop\":\"Plan\"}},[_c('el-input',{attrs:{\"disabled\":_vm.data.disabled},on:{\"change\":function($event){_vm.autoCal()}},model:{value:(_vm.ruleForm.Plan),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Plan\", $$v)},expression:\"ruleForm.Plan\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"KPIs đạt:\",\"prop\":\"Done\"}},[_c('el-input',{attrs:{\"disabled\":_vm.data.disabled},on:{\"change\":function($event){_vm.autoCal()}},model:{value:(_vm.ruleForm.Done),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Done\", $$v)},expression:\"ruleForm.Done\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Đơn vị tính:\",\"prop\":\"Unit\"}},[_c('el-input',{attrs:{\"disabled\":_vm.data.disabled},model:{value:(_vm.ruleForm.Unit),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Unit\", $$v)},expression:\"ruleForm.Unit\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Tính % Hoàn thành:\",\"prop\":\"autoCal\"}},[_c('el-switch',{attrs:{\"disabled\":_vm.data.disabled},on:{\"change\":function($event){_vm.autoCal()}},model:{value:(_vm.ruleForm.autoCal),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"autoCal\", $$v)},expression:\"ruleForm.autoCal\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Tỉ lệ hoành thành:\",\"prop\":\"Progress\"}},[_c('el-input',{attrs:{\"disabled\":_vm.data.disabled},model:{value:(_vm.ruleForm.Progress),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Progress\", $$v)},expression:\"ruleForm.Progress\"}})],1)],1)],1)]),_vm._v(\" \"),(!_vm.data.isEditable)?_c('HistoryGrid',{attrs:{\"dtSource\":_vm.viewHistoryModel,\"dtHeader\":['Mục', 'Giá trị cũ', 'Giá trị mới']}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1bb2e27e\",\"hasScoped\":true,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/static/TargetDialog.vue\n// module id = 1011\n// module chunks = 1 11","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"tTbl\"}},[_c('div',{staticStyle:{\"flex\":\"1\",\"display\":\"flex\",\"align-items\":\"center\",\"justify-content\":\"space-between\",\"font-size\":\"14px\",\"padding-right\":\"8px\"}},[_c('el-row'),_vm._v(\" \"),(_vm.editableUser && !_vm.$isMobileDevice)?_c('el-tooltip',{attrs:{\"content\":\"Thêm mới mục tiêu\",\"placement\":\"top\"}},[_c('el-button',{attrs:{\"size\":\"mini\",\"icon\":\"fa fa-plus\"},on:{\"click\":function($event){_vm.addNewTarget()}}})],1):_vm._e(),_vm._v(\" \"),(_vm.editableUser && _vm.$isMobileDevice)?_c('el-button',{attrs:{\"size\":\"mini\",\"icon\":\"fa fa-plus\"},on:{\"click\":function($event){_vm.addNewTarget()}}}):_vm._e()],1),_vm._v(\" \"),_c('el-table',{attrs:{\"data\":_vm.dtSrc,\"border\":\"\",\"empty-text\":\"Không có dữ liệu\"}},[_c('el-table-column',{attrs:{\"label\":\"\",\"width\":\"50px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticStyle:{\"text-align\":\"center\",\"cursor\":\"pointer\"},on:{\"click\":function($event){_vm.openTargetDetail(scope.row)}}},[_c('i',{staticClass:\"fa-lg icon-magnifier-add\"})])]}}])}),_vm._v(\" \"),_c('el-table-tree-column',{attrs:{\"prop\":\"Name\",\"label\":\"Tên\",\"levelKey\":\"level\",\"treeKey\":\"Id\",\"parentKey\":\"ParentId\",\"min-width\":\"200px\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"Progress\",\"label\":\"Hoàn thành\",\"show-overflow-tooltip\":true},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-progress',{attrs:{\"text-inside\":true,\"stroke-width\":18,\"percentage\":Math.round(isNaN(scope.row.Progress)?0:scope.row.Progress)}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"TargetType\",\"label\":\"Loại\",\"show-overflow-tooltip\":true},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n        \"+_vm._s(_vm.targetsObj[scope.row.TargetType]?_vm.targetsObj[scope.row.TargetType].Name:'---')+\"\\n      \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"Plan\",\"label\":\"Kế hoạch\",\"show-overflow-tooltip\":true}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"Done\",\"label\":\"Đạt được\",\"show-overflow-tooltip\":true}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"Unit\",\"label\":\"Đơn vị\",\"show-overflow-tooltip\":true}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"Owner\",\"label\":\"Người quản lý\",\"show-overflow-tooltip\":true},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[(_vm.userWithAvatarLst[scope.row.Owner]!=undefined)?_c('img',{staticClass:\"avatar\",staticStyle:{\"margin\":\"8px 10px 0 0\"},attrs:{\"height\":\"35\",\"width\":\"35\",\"title\":_vm.userWithAvatarLst[scope.row.Owner].Username,\"src\":_vm.loadAvatar(_vm.userWithAvatarLst[scope.row.Owner].Avatar)}}):_c('span',[_vm._v(_vm._s(scope.row.OwnerName))])])]}}])})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4c98b227\",\"hasScoped\":false,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/static/TargetSetting.vue\n// module id = 1012\n// module chunks = 1 11","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true,\\\"alias\\\":{\\\"../img\\\":\\\"../static/img\\\"}}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4c98b227\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./TargetSetting.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./TargetSetting.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4c98b227\\\",\\\"hasScoped\\\":false,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./TargetSetting.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/static/TargetSetting.vue\n// module id = 940\n// module chunks = 1 11","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true,\\\"alias\\\":{\\\"../img\\\":\\\"../static/img\\\"}}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1bb2e27e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./TargetDialog.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./TargetDialog.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1bb2e27e\\\",\\\"hasScoped\\\":true,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./TargetDialog.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1bb2e27e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/static/TargetDialog.vue\n// module id = 990\n// module chunks = 1 11"],"sourceRoot":""}
{"version":3,"sources":["webpack:///static/js/11.9af1c197f21bcae1e0de.js","webpack:///src/components/static/TargetDialog.vue","webpack:///./src/components/dynamic/HistoryGrid.vue","webpack:///./src/components/dynamic/HistoryGrid.vue?b5a6","webpack:///./src/components/dynamic/HistoryGrid.vue?7c61","webpack:///src/components/dynamic/HistoryGrid.vue","webpack:///./src/components/dynamic/HistoryGrid.vue?09df","webpack:///./src/components/static/TargetDialog.vue?4359","webpack:///./src/components/static/TargetSetting.vue?38d4","webpack:///./src/components/static/TargetSetting.vue","webpack:///./src/components/static/TargetDialog.vue","webpack:///./src/components/static/TargetSetting.vue?0db9","webpack:///./src/components/static/TargetSetting.vue?d55a","webpack:///src/components/static/TargetSetting.vue","webpack:///./src/components/static/TargetDialog.vue?35b7","webpack:///./src/components/static/TargetDialog.vue?b2bc"],"names":["webpackJsonp","1000","module","__webpack_exports__","__webpack_require__","$","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default","n","__WEBPACK_IMPORTED_MODULE_1__components_dynamic_HistoryGrid__","__WEBPACK_IMPORTED_MODULE_2_vue__","use","components","HistoryGrid","props","data","_this","this","user","JSON","parse","$getItemLocalStorage","$localStorageConstant","LoggedOnUser","isLeader","$isMantisAdmin","GroupRoles","Leader","indexOf","Project","GroupId","ruleForm","undefined","item","Name","$Lodash","cloneDeep","Assigned","$Utils","equals","split","filter","autoCal","oldName","IsPublic","Value","TargetType","ActualStartDate","ActualFinishDate","ParentId","Owner","Plan","Done","Unit","Progress","Milestone","MilestoneVal","isShowAllTarget","oldObject","typeLst","Id","dataCopied","viewHistoryModel","rules","required","message","trigger","watch","methods","changeMilestoneVal","val","type","moment","isoWeekday","firstDayOfWeekCfg","endOf","_d","$forceUpdate","submitForm","formName","ctrl","$refs","validate","valid","console","log","checkExits","tmp","Math","round","Number","isNaN","resetForm","resetFields","close","$hub","$emit","deleteTarget","_this2","$confirm","confirmButtonText","cancelButtonText","then","recursiveDeleteTarget","Level","tRequest","clone","$singleRequest","R1_RequestTemplate","R1_RequestDataGroup","R1_RequestFields","i","eval","model","post","response","getDataWithRoot","R1","updateRequest","each","index","value","fVal","Targets","TargetsName","RequestTemplate","RequestDataGroup","RequestFields","key","TotalRequests","updateParamsSingleRequest","catch","isEmpty","request","R1_Id","dData","targetLst","getTargets","getObject","loadHistory","id","RequestAction","RequestClass","R1_Code","R1_SourceId","arrShowField","targetFields","field","History","result","success","logData","k","push","logChanges","Changes","change","length","ColumnName","date","stringToDate","OldDisplayValue","Version","formatDateTime","NewDisplayValue","forEach","object","checkField","DynamicText","ex","R1_Name","R1_ParentId","Parent","listExitsTar","el","$message","error","saveOrUpdate","R1_ReferenceId","rootId","R1_NestedSetType","R1_Plan","R1_Done","R1_Owner","R1_TargetType","R1_Milestone","parseFloat","R1_Progress","R1_Unit","R1_IsPublic","R1_Value","departmentLst","res","R1_ValueName","GroupName","R1_Assigned","R1_AssignedName","workers","UserId","Username","R1_OwnerName","R1_ActualStartDate","R1_ActualFinishDate","objectReturn","Data","autoCals","AssignedName","OwnerName","arrChanged","compareChange","createHistoryLogs","target","saveOrUpdatePermissions","objReturn","objOld","objTemp","valueReturn","caption","values","Caption","obj","key1","changedObject","ColumnCaption","OldValue","NewValue","FieldColumnType","getTime","countHistory","SourceId","Code","insertRequest","parseInt","CreatedByName","getUserInfo","insertResult","isUpdate","paramsSearchLinked","ConditionFields","StaticFields","OrderFields","TotalCount","arrLink","DataDS","Linked","removeLinks","link","savePermission","linkToRoleEveryone","permissons","leaders","groups","req","gro","ix","data1","ele","concat","strLeaders","GroupParent","p","Parrent","Child","ChildTable","p1","p10","$administrator","p11","$supervisor","persReadyToInsert","data3","data2","changeEditState","disabled","changeType","$set","targetSavedLst","setParent","parent","group","created","v","Permission","Date","LoginName","call","1001","injectStyle","ssrContext","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_HistoryGrid_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_7d170cdc_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_HistoryGrid_vue__","normalizeComponent","__vue_styles__","Component","1002","exports","content","locals","1003","version","sources","names","mappings","file","sourcesContent","sourceRoot","1004","1005","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","slot","_v","staticStyle","width","_l","h","_s","itemLog","style","background-color","colspan","Created","_e","staticRenderFns","esExports","1006","float","padding","icon","on","click","$event","isEditable","ref","label-position","$isMobileDevice","label-width","label","prop","callback","$$v","expression","display","active-color","inactive-color","active-text","inactive-text","filterable","placeholder","format","t","size","border","ng-show","effect","placement","clearable","Status","multiple","dtSource","dtHeader","1007","flex","align-items","justify-content","font-size","padding-right","editableUser","addNewTarget","dtSrc","empty-text","scopedSlots","_u","fn","scope","text-align","cursor","openTargetDetail","row","levelKey","treeKey","parentKey","min-width","show-overflow-tooltip","text-inside","stroke-width","percentage","targetsObj","userWithAvatarLst","margin","height","title","src","loadAvatar","Avatar","935","Object","defineProperty","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_TargetSetting_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_800ef1b4_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_TargetSetting_vue__","985","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_TargetDialog_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_c9eec43c_hasScoped_true_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_TargetDialog_vue__","995","996","997","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1_element_tree_grid_src_index_js__","__WEBPACK_IMPORTED_MODULE_2_element_tree_grid__","__WEBPACK_IMPORTED_MODULE_2_element_tree_grid___default","__WEBPACK_IMPORTED_MODULE_3__components_static_TargetDialog__","ElTreeGrid","a","ElTableTreeColumn","weeksOfYear","years","avatar","replace","$appUri","BaseURL","dataToPass","workerLst","targetFieldLst","months","constructor","Array","departments","treeify","options","rotateDementionArr","$isSystemAdmin","Director","998","999"],"mappings":"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","file":"static/js/11.9af1c197f21bcae1e0de.js","sourcesContent":["webpackJsonp([11],{\n\n/***/ 1000:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_dynamic_HistoryGrid__ = __webpack_require__(1001);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_vue__ = __webpack_require__(3);\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_2_vue__[\"default\"].use(__webpack_require__(40));\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  components: {\n    HistoryGrid: __WEBPACK_IMPORTED_MODULE_1__components_dynamic_HistoryGrid__[\"a\" /* default */]\n  },\n  props: [\"data\"],\n  data: function data() {\n    var _this = this;\n\n    var user = JSON.parse(this.$getItemLocalStorage(this.$localStorageConstant.LoggedOnUser));\n    var isLeader = !this.$isMantisAdmin() && !this.$isMantisAdmin() && user.GroupRoles && user.GroupRoles.Leader && user.GroupRoles.Leader.indexOf(user.Project.GroupId) > -1;\n    var ruleForm = {};\n    if (this.data.item.Name != undefined) {\n      ruleForm = this.$Lodash.cloneDeep(this.data.item);\n      if (this.data.item.Assigned != undefined && !this.$Utils.equals(this.data.item.Assigned, \"\")) {\n        ruleForm.Assigned = this.data.item.Assigned.split(\";\").filter(function (item) {\n          return !_this.$Utils.equals(item, \"\");\n        });\n      } else {\n        ruleForm.Assigned = [];\n      }\n      ruleForm.autoCal = false;\n      ruleForm.oldName = this.data.item.Name + \"\";\n      ruleForm.IsPublic = ruleForm.IsPublic === \"0\" ? false : true;\n    } else {\n      ruleForm.Name = \"\";\n      ruleForm.Value = \"\";\n      ruleForm.TargetType = \"\";\n      ruleForm.IsPublic = true;\n      ruleForm.ActualStartDate = \"\";\n      ruleForm.ActualFinishDate = \"\";\n      ruleForm.Assigned = [];\n      ruleForm.ParentId = \"\";\n      ruleForm.Owner = \"\";\n      ruleForm.Plan = \"\";\n      ruleForm.Done = \"\";\n      ruleForm.Unit = \"\";\n      ruleForm.Progress = 0;\n      ruleForm.autoCal = true;\n      ruleForm.oldName = \"\";\n      ruleForm.Milestone = \"\";\n      ruleForm.MilestoneVal = {};\n    }\n    return {\n      isShowAllTarget: false,\n      oldObject: this.$Lodash.cloneDeep(ruleForm),\n      typeLst: [{\n        Id: \"1\",\n        Name: \"Mục tiêu công ty\"\n      }, {\n        Id: \"2\",\n        Name: \"Mục tiêu phòng ban\"\n      }, {\n        Id: \"3\",\n        Name: \"Mục tiêu cá nhân\"\n      }],\n      ruleForm: ruleForm,\n      isLeader: isLeader,\n      dataCopied: this.$Lodash.cloneDeep(this.data),\n      viewHistoryModel: [],\n      rules: {\n        Name: [{ required: true, message: \"Tên bắt buộc phải điền\", trigger: \"blur\" }],\n        Value: [{\n          required: true,\n          message: \"Phòng ban bắt buộc phải chọn\",\n          trigger: \"change\"\n        }],\n        ParentId: [{\n          required: true,\n          message: \"Mục tiêu cha bắt buộc phải chọn\",\n          trigger: \"change\"\n        }]\n      }\n    };\n  },\n\n  watch: {},\n  methods: {\n    changeMilestoneVal: function changeMilestoneVal(val, type) {\n      this.ruleForm.ActualStartDate = val;\n      if (type === \"week\") this.ruleForm.ActualFinishDate = __WEBPACK_IMPORTED_MODULE_2_vue__[\"default\"].moment(val).isoWeekday(this.dataCopied.firstDayOfWeekCfg).endOf(\"isoweek\")._d;else if (type === \"month\") this.ruleForm.ActualFinishDate = __WEBPACK_IMPORTED_MODULE_2_vue__[\"default\"].moment(val).endOf(\"month\")._d;else if (type === \"year\") this.ruleForm.ActualFinishDate = __WEBPACK_IMPORTED_MODULE_2_vue__[\"default\"].moment(val).endOf(\"year\")._d;\n      this.$forceUpdate();\n    },\n    submitForm: function submitForm(formName) {\n      var ctrl = this;\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          ctrl.checkExits();\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n    autoCal: function autoCal() {\n      if (this.ruleForm.autoCal == true) {\n        var tmp = Math.round(Number(this.ruleForm.Done) / Number(this.ruleForm.Plan) * 100);\n        this.ruleForm.Progress = isNaN(tmp) ? this.ruleForm.Progress : tmp;\n      }\n    },\n    resetForm: function resetForm(formName) {\n      this.$refs[formName].resetFields();\n    },\n    close: function close() {\n      this.$hub.$emit(\"close-modal\");\n    },\n    deleteTarget: function deleteTarget() {\n      var _this2 = this;\n\n      var ctrl = this;\n      this.$confirm(\"Mục tiêu sẽ bị xóa hoàn toàn. Tiếp tục?\", \"Cảnh báo\", {\n        confirmButtonText: \"Xóa\",\n        cancelButtonText: \"Bỏ qua\",\n        type: \"warning\"\n      }).then(function () {\n        ctrl.recursiveDeleteTarget({\n          Id: ctrl.data.item.Id,\n          Level: ctrl.data.item.Level\n        });\n        ctrl.close();\n\n        var tRequest = _this2.$Utils.clone(_this2.$singleRequest);\n        tRequest.R1_RequestTemplate = \"AG_Task_Task.Search\";\n        tRequest.R1_RequestDataGroup = \"DataGroup.danh-sach-cong-viec.04b66\";\n        tRequest.R1_RequestFields = \"Id;Targets;TargetsName;\";\n        for (var i = 1; i <= eval(ctrl.data.item.Level - 5); i++) {\n          tRequest.R1_RequestFields += \"TargetsLevel\" + i + \";\";\n        }\n        tRequest[\"R1_TargetsLevel\" + [ctrl.model.Level - 5]] = ctrl.model.Id;\n        ctrl.$Utils.post(tRequest).then(function (response) {\n          response = ctrl.$Utils.getDataWithRoot(response.R1, \"Data.TasksDS.Task\");\n          var updateRequest = ctrl.$Lodash.cloneDeep(ctrl.$singleRequest);\n          $.each(response, function (index, value) {\n            var fVal = {};\n            fVal.Id = ctrl.$Lodash.cloneDeep(value.Id);\n            fVal.Targets = \"\";\n            fVal.TargetsName = \"\";\n            fVal.RequestTemplate = \"AG_Task_Task.Update\";\n            fVal.RequestDataGroup = \"DataGroup.danh-sach-cong-viec.04b66\";\n            fVal.RequestFields = \"Id;Targets;TargetsName;\";\n            $.each(value.Targets.split(\";\"), function (key, val) {\n              if (key < eval(ctrl.data.item.Level - 6)) {\n                fVal.Targets += val + \";\";\n                fVal[\"TargetsLevel\" + [key + 1]] = val;\n                fVal.RequestFields += \"TargetsLevel\" + [key + 1] + \";\";\n              }\n            });\n            $.each(value.TargetsName.split(\";\"), function (key, val) {\n              if (key < eval(ctrl.data.item.Level - 6)) {\n                fVal.TargetsName += val + \";\";\n              }\n            });\n            updateRequest.TotalRequests = index + 1;\n            updateRequest = ctrl.$Utils.updateParamsSingleRequest(updateRequest, fVal, index + 1);\n          });\n          ctrl.$Utils.post(updateRequest);\n        });\n      }).catch(function () {});\n    },\n    recursiveDeleteTarget: function recursiveDeleteTarget(data) {\n      var ctrl = this;\n      if (ctrl.$Utils.isEmpty(data)) {\n        var request = ctrl.$Lodash.cloneDeep(ctrl.$singleRequest);\n        request.R1_RequestTemplate = \"Setting.Delete\";\n        request.R1_Id = data.Id;\n        ctrl.$Utils.post(request).then(function (dData) {\n          $.each(ctrl.data.targetLst, function (key, value) {\n            if (data.Id == value.ParentId) {\n              ctrl.recursiveDeleteTarget(value);\n            }\n          });\n          ctrl.data.getTargets();\n          ctrl.data.getObject();\n        });\n      }\n    },\n    loadHistory: function loadHistory(id) {\n      var ctrl = this;\n      var request = {\n        RequestAction: \"Request\",\n        RequestClass: \"xBase\",\n        TotalRequests: \"1\",\n        R1_RequestTemplate: \"ChangedLogs\",\n        R1_Code: \"ChangedHistory\",\n        R1_SourceId: id\n      };\n\n      var arrShowField = [];\n      arrShowField = ctrl.data.targetFields.filter(function (field) {\n        return field.History == \"true\";\n      });\n\n      ctrl.$Utils.post(request).then(function (result) {\n        if (result.success && result.R1.success) {\n          var logData = ctrl.$Utils.getDataWithRoot(result, \"R1.Data.DataDS.Logs\");\n\n          $.each(logData, function (k, log) {\n            try {\n              ctrl.viewHistoryModel.push({ type: \"head\", value: log });\n              var logChanges = JSON.parse(log.Changes);\n              $.each(logChanges, function (k, change) {\n                if (arrShowField.length > 0 && change.ColumnName !== \"Assigned\" && change.ColumnName !== \"Id\") {\n                  if (change.ColumnName === \"ActualStartDate\" || change.ColumnName === \"ActualFinishDate\" || change.ColumnName === \"Created\") {\n                    var format = \"DD/MM/YYYY\";\n                    var date = ctrl.$Utils.stringToDate(change.OldDisplayValue);\n                    change.OldDisplayValue = log.Version === \"1\" ? \"\" : ctrl.$Utils.formatDateTime(date, format);\n                    date = ctrl.$Utils.stringToDate(change.NewDisplayValue);\n                    change.NewDisplayValue = ctrl.$Utils.formatDateTime(date, format);\n                  }\n                  if ((change.ColumnName === \"AssignedName\" && !change.OldDisplayValue && change.NewDisplayValue === \"\") == false) {\n                    arrShowField.forEach(function (field) {\n                      var object = { type: \"body\", value: change };\n                      var checkField = field.DynamicText != undefined && field.DynamicText != \"\" ? field.DynamicText : field.Name;\n                      if (change.ColumnName == checkField) {\n                        if (change.ColumnName === \"TargetType\") {\n                          ctrl.typeLst.filter(function (item) {\n                            if (item.Id === change.OldDisplayValue) change.OldDisplayValue = log.Version === \"1\" ? \"\" : item.Name;\n                            if (item.Id === change.NewDisplayValue) change.NewDisplayValue = item.Name;\n                          });\n                        } else if (change.ColumnName === \"IsPublic\") {\n                          change.OldDisplayValue = log.Version === \"1\" ? \"\" : change.OldDisplayValue === \"0\" || change.OldDisplayValue == false ? \"Riêng tư\" : \"Công khai\";\n                          change.NewDisplayValue = change.NewDisplayValue === \"0\" || change.OldDisplayValue == false ? \"Riêng tư\" : \"Công khai\";\n                        }\n                        ctrl.viewHistoryModel.push(object);\n                      }\n                    });\n                  }\n                }\n              });\n            } catch (ex) {\n              console.log(ex);\n            }\n          });\n        }\n      });\n    },\n    checkExits: function checkExits() {\n      var ctrl = this;\n      var request = ctrl.$Lodash.cloneDeep(this.$singleRequest);\n      request.R1_RequestTemplate = \"xDynamicData_Setting.Search\";\n      request.R1_RequestFields = \"Name;ParentId;\";\n      request.R1_Name = ctrl.ruleForm.Name;\n      request.R1_RequestDataGroup = \"DataGroup.muc-tieu.091fb\";\n      request.R1_ParentId = ctrl.ruleForm.Parent ? ctrl.ruleForm.Parent.Id : ctrl.ruleForm.ParentId;\n      ctrl.$Utils.post(request).then(function (data) {\n        var listExitsTar = ctrl.$Utils.getDataWithRoot(data.R1, \"Data.DynamicDS.Setting\");\n        listExitsTar = listExitsTar.filter(function (el) {\n          return el.Name != ctrl.ruleForm.oldName;\n        });\n        if (listExitsTar.length != 0) {\n          ctrl.$message.error(\"Tên mục tiêu đã có\");\n        } else {\n          ctrl.saveOrUpdate();\n        }\n      });\n    },\n    saveOrUpdate: function saveOrUpdate() {\n      var ctrl = this;\n      var request = ctrl.$Lodash.cloneDeep(this.$singleRequest);\n      if (!ctrl.ruleForm.Id) {\n        request.R1_RequestTemplate = \"xDynamicData_Setting.Insert\";\n        request.R1_ReferenceId = ctrl.ruleForm.ParentId ? ctrl.ruleForm.ParentId : ctrl.data.rootId;\n        request.R1_NestedSetType = \"InsertLastChildNode\";\n      } else {\n        request.R1_RequestTemplate = \"xDynamicData_Setting.Update\";\n        request.R1_Id = ctrl.ruleForm.Id;\n      }\n      request.R1_RequestFields = \"Plan;Done;Progress;Unit;Assigned;AssignedName;Owner;OwnerName;TargetType;Id;Index;\" + \"Code;Name;Value;Description;LeftIndex;ParentId;Level;Value;RightIndex;Created;CreatedBy;Modified;IsPublic;ActualStartDate;ActualFinishDate;ValueName;Milestone\";\n      request.R1_RequestDataGroup = \"DataGroup.muc-tieu.091fb\";\n      request.R1_Name = ctrl.ruleForm.Name;\n      request.R1_Plan = ctrl.ruleForm.Plan;\n      request.R1_Done = ctrl.ruleForm.Done;\n      request.R1_Owner = ctrl.ruleForm.Owner;\n      request.R1_TargetType = ctrl.ruleForm.TargetType;\n      request.R1_Milestone = ctrl.ruleForm.Milestone;\n      if (!isNaN(parseFloat(ctrl.ruleForm.Progress + \"\"))) {\n        request.R1_Progress = ctrl.ruleForm.Progress;\n      } else {\n        delete ctrl.ruleForm.Progress;\n      }\n      request.R1_Unit = ctrl.ruleForm.Unit;\n      request.R1_IsPublic = ctrl.ruleForm.IsPublic == true ? 1 : 0;\n      request.R1_Value = ctrl.ruleForm.Value;\n      $.each(ctrl.departmentLst, function (k, val) {\n        var res = val.GroupId !== ctrl.ruleForm.Value;\n        if (!res) {\n          request.R1_ValueName = val.GroupName;\n        }\n        return res;\n      });\n      request.R1_Assigned = \"\";\n      request.R1_AssignedName = \"\";\n      $.each(ctrl.ruleForm.Assigned, function (k, Id) {\n        request.R1_Assigned += Id + \";\";\n        ctrl.data.workers.filter(function (user) {\n          if (user.UserId && user.UserId === Id) {\n            request.R1_AssignedName += user.Username + \",\";\n          }\n        });\n      });\n      ctrl.data.workers.filter(function (user) {\n        if (user.UserId && user.UserId === ctrl.ruleForm.Owner) {\n          request.R1_OwnerName = user.Username;\n        }\n      });\n      if (ctrl.$Utils.isEmpty(ctrl.ruleForm.ActualStartDate)) request.R1_ActualStartDate = ctrl.$Utils.formatDateTime(ctrl.ruleForm.ActualStartDate);\n      if (ctrl.$Utils.isEmpty(ctrl.ruleForm.ActualFinishDate)) request.R1_ActualFinishDate = ctrl.$Utils.formatDateTime(ctrl.ruleForm.ActualFinishDate);\n      ctrl.$Utils.post(request).then(function (data) {\n        ctrl.objectReturn = ctrl.$Lodash.cloneDeep(ctrl.ruleForm);\n        ctrl.objectReturn.Id = data.R1.Data;\n        if (ctrl.$Utils.isEmpty(ctrl.objectReturn, \"autoCals\")) delete ctrl.objectReturn.autoCals;\n        if (ctrl.$Utils.isEmpty(ctrl.objectReturn, \"oldName\")) delete ctrl.objectReturn.oldName;\n        ctrl.data.item = ctrl.$Lodash.cloneDeep(ctrl.objectReturn);\n        ctrl.objectReturn.AssignedName = request.R1_AssignedName;\n        ctrl.objectReturn.OwnerName = request.R1_OwnerName;\n        ctrl.objectReturn.Assigned = request.R1_Assigned;\n        ctrl.objectReturn.Value = request.R1_Value;\n        var arrChanged = ctrl.compareChange(ctrl.objectReturn, ctrl.oldObject);\n        if (ctrl.$Utils.isEmpty(arrChanged) && arrChanged.length > 0) {\n          if (request.R1_RequestTemplate, \"xDynamicData_Setting.Insert\") {\n            ctrl.createHistoryLogs(arrChanged);\n          } else {\n            arrChanged = arrChanged.filter(function (ele) {\n              return ctrl.$Utils.isEmpty(ele.OldDisplayValue);\n            });\n            if (ctrl.$Utils.equals(arrChanged, []) == false) {\n              ctrl.createHistoryLogs(arrChanged);\n            }\n          }\n        }\n        var target = ctrl.$Lodash.cloneDeep(ctrl.ruleForm);\n        target.Id = data.R1.Data;\n        ctrl.saveOrUpdatePermissions(ctrl.ruleForm.oldName !== \"\", target);\n        ctrl.close();\n      });\n    },\n    compareChange: function compareChange(objReturn, objOld) {\n      var ctrl = this;\n      var arrChanged = [];\n      ctrl.objTemp = ctrl.$Lodash.cloneDeep(ctrl.oldObject);\n      $.each(objReturn, function (key, val) {\n        if (ctrl.$Utils.isEmpty(val)) {\n          var valueReturn = val;\n          var caption = \"\";\n          var field = {};\n          $.each(ctrl.data.targetFields, function (k, values) {\n            if (values.Name === key && values.History == \"true\") {\n              caption = values.Caption;\n              field = values;\n            }\n          });\n          var obj = {};\n\n          $.each(objOld, function (key1, value) {\n            if (key == key1 && ctrl.$Utils.equals(value, valueReturn) == false) {\n              obj[key1] = value;\n            }\n          });\n          var changedObject = {\n            ColumnCaption: caption,\n            ColumnName: key,\n            OldDisplayValue: obj[key],\n            OldValue: obj[key],\n            NewDisplayValue: objReturn[key] ? objReturn[key] : valueReturn,\n            NewValue: valueReturn\n          };\n          if (ctrl.$Utils.isEmpty(field)) {\n            switch (field.FieldColumnType) {\n              case \"DateTime\":\n                if (ctrl.$Utils.stringToDate(val).getTime() == ctrl.$Utils.stringToDate(changedObject.OldValue).getTime()) {\n                  changedObject = undefined;\n                }\n                break;\n              case \"Double\":\n                if (!ctrl.$Utils.isEmpty(ctrl.objTemp[key]) && ctrl.$Utils.isEmpty(objReturn[key])) {\n                  changedObject.OldDisplayValue = 0;\n                  changedObject.OldValue = 0;\n                }\n                break;\n              case \"Integer\":\n                if (!ctrl.$Utils.isEmpty(ctrl.objTemp[key]) && ctrl.$Utils.isEmpty(objReturn[key])) {\n                  changedObject.OldDisplayValue = 0;\n                  changedObject.OldValue = 0;\n                }\n                break;\n            }\n          }\n\n          if (changedObject && ctrl.$Utils.isEmpty(caption) && caption != \"\") {\n            arrChanged.push(changedObject);\n          }\n        }\n      });\n      return arrChanged;\n    },\n    createHistoryLogs: function createHistoryLogs(arrChanged) {\n      var ctrl = this;\n      var countHistory = ctrl.$Utils.updateParamsSingleRequest(ctrl.$Lodash.cloneDeep(ctrl.$singleRequest), {\n        RequestTemplate: \"ChangedLogs.Count\",\n        SourceId: ctrl.objectReturn.Id,\n        Code: \"ChangedHistory\"\n      });\n\n      ctrl.$Utils.post(countHistory).then(function (result) {\n        if (ctrl.$Utils.isEmpty(result, \"R1.Data\")) {\n          var insertRequest = ctrl.$Utils.updateParamsSingleRequest(countHistory, {\n            RequestTemplate: \"ChangedLogs.Insert\",\n            Version: parseInt(result.R1.Data) + 1,\n            Changes: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(arrChanged),\n            CreatedByName: ctrl.$Utils.getUserInfo(\"Username\")\n          });\n          ctrl.$Utils.post(insertRequest).then(function (insertResult) {});\n        }\n      });\n    },\n    saveOrUpdatePermissions: function saveOrUpdatePermissions(isUpdate, target) {\n      var ctrl = this;\n\n      var req = ctrl.$Lodash.cloneDeep(ctrl.$singleRequest);\n      if (isUpdate == true) {\n        var paramsSearchLinked = {\n          RequestAction: \"SearchLinked\",\n          RequestClass: \"Addition\",\n          ConditionFields: \"Parent;\",\n          StaticFields: \"Code;Child;Parent;Name;Created;Description\",\n          OrderFields: \"Created DESC\",\n          Parent: target.Id\n        };\n        ctrl.$Utils.post(paramsSearchLinked).then(function (result) {\n          if (result.TotalCount > 0) {\n            var arrLink = result.TotalCount == 1 ? [result.Data.DataDS.Linked] : result.Data.DataDS.Linked;\n            var removeLinks = {\n              RequestClass: \"xBase\",\n              RequestAction: \"Request\",\n              TotalRequests: arrLink.length,\n              RequestTemplate: \"Permission.Remove\"\n            };\n            $.each(arrLink, function (link, key) {\n              removeLinks[\"R\" + (key + 1) + \"_Id\"] = link.Id;\n            });\n            ctrl.savePermission(target, removeLinks);\n          }\n        });\n      } else {\n        ctrl.savePermission(target);\n      }\n    },\n    savePermission: function savePermission(target, removeLinks) {\n      var ctrl = this;\n      if (target.IsPublic == true) {\n        ctrl.$Utils.linkToRoleEveryone([{\n          Id: target.Id,\n          Caption: target.Name\n        }]);\n\n        ctrl.data.getTargets();\n        ctrl.data.getObject();\n      } else {\n        var permissons = [];\n        var leaders = [];\n        var groups = [];\n        groups.push(target.Value);\n        if (groups && groups.length > 0) {\n          var req = {};\n          groups.filter(function (gro, key) {\n            req[\"R\" + ctrl.ix + \"_RequestTemplate\"] = \"OrgnizationList\";\n            req[\"R\" + ctrl.ix + \"_GroupName\"] = \"Leader\";\n            req[\"R\" + ctrl.ix + \"_GroupParent\"] = gro.GroupId;\n            req[\"R\" + ctrl.ix + \"_RequestDataType\"] = \"json\";\n            req[\"R\" + ctrl.ix + \"_GroupType\"] = \"2\";\n            ctrl.ix++;\n          });\n          req.TotalRequests = ctrl.ix - 1;\n          req.RequestClass = \"xBase\";\n          req.RequestAction = \"Request\";\n          ctrl.$Utils.post(req).then(function (data1) {\n            for (var k = 1; k < ctrl.ix; k++) {\n              var ele = ctrl.$Utils.getDataWithRoot(data1, \"R\" + k + \".Data.UserDS.Group\");\n              if (ele[0] != undefined) {\n                if (ele[0].GroupName === \"Leader\") {\n                  leaders = leaders.concat(ele);\n                }\n              }\n            }\n            var strLeaders = \"\";\n            leaders.filter(function (ele, key) {\n              if (ele.GroupParent == groups[0].GroupId) {\n                strLeaders += ele.GroupId + \";\";\n                if (target.TargetType == \"2\" || target.TargetType == \"1\") {\n                  var p = {\n                    Parrent: target.Id,\n                    Code: \"Edit\",\n                    Name: target.Name + \" - Edit\",\n                    Child: ele.GroupId,\n                    ChildTable: \"tblGroup\"\n                  };\n                  permissons.push(p);\n                } else if (target.TargetType == \"3\") {\n                  var p1 = {\n                    Parrent: target.Id,\n                    Code: \"Manage\",\n                    Name: target.Name + \" - Manage\",\n                    Child: ele.GroupId,\n                    ChildTable: \"tblGroup\"\n                  };\n                  permissons.push(p1);\n                }\n              }\n            });\n            if (target.Owner && strLeaders.indexOf(target.Owner) == -1) {\n              var p = {\n                Parrent: target.Id,\n                Code: \"Edit\",\n                Name: target.Name + \" - Edit\",\n                Child: target.Owner,\n                ChildTable: \"tblUser\"\n              };\n              permissons.push(p);\n            }\n            if (target.Assigned) {\n              target.Assigned.filter(function (user, key) {\n                if (user !== \"\" && strLeaders.indexOf(user) == -1) {\n                  var p = {\n                    Parrent: target.Id,\n                    Code: \"Edit\",\n                    Name: target.Name + \" - Edit\",\n                    Child: user,\n                    ChildTable: \"tblUser\"\n                  };\n                  permissons.push(p);\n                }\n              });\n            }\n\n            var p10 = {\n              Parrent: target.Id,\n              Code: \"Manage\",\n              Name: target.Name + \" - Manage\",\n              Child: ctrl.$administrator,\n              ChildTable: \"tblGroup\"\n            };\n            permissons.push(p10);\n            var p11 = {\n              Parrent: target.Id,\n              Code: \"Manage\",\n              Name: target.Name + \" - Manage\",\n              Child: ctrl.$supervisor,\n              ChildTable: \"tblGroup\"\n            };\n            permissons.push(p11);\n\n            var persReadyToInsert = {};\n            var index = 1;\n            permissons.filter(function (p, k) {\n              persReadyToInsert[\"R\" + index + \"_RequestClass\"] = \"xBase\";\n              persReadyToInsert[\"R\" + index + \"_RequestAction\"] = \"LinkUserToObject\";\n              persReadyToInsert[\"R\" + index + \"_ParentTable\"] = \"xObject\";\n              persReadyToInsert[\"R\" + index + \"_RequestTemplate\"] = \"Permission.Insert\";\n              persReadyToInsert[\"R\" + index + \"_Parent\"] = p.Parrent;\n              persReadyToInsert[\"R\" + index + \"_Child\"] = p.Child;\n              persReadyToInsert[\"R\" + index + \"_Code\"] = p.Code;\n              persReadyToInsert[\"R\" + index + \"_Name\"] = p.Name;\n              persReadyToInsert[\"R\" + index + \"_ChildTable\"] = p.ChildTable;\n              index++;\n            });\n            persReadyToInsert.TotalRequests = permissons.length;\n            persReadyToInsert.RequestClass = \"xBase\";\n            persReadyToInsert.RequestAction = \"Request\";\n            if (removeLinks == undefined) {\n              ctrl.$Utils.post(persReadyToInsert).then(function (data3) {\n                ctrl.data.getObject();\n                ctrl.data.getTargets();\n              });\n            } else {\n              ctrl.$Utils.post(removeLinks).then(function (data2) {\n                ctrl.$Utils.post(persReadyToInsert).then(function (data3) {\n                  ctrl.data.getTargets();\n                  ctrl.data.getObject();\n                });\n              });\n            }\n          });\n        }\n      }\n    },\n    changeEditState: function changeEditState() {\n      this.data.disabled = !this.data.disabled;\n    },\n    changeType: function changeType(type) {\n      this.dataCopied.targetLst = this.data.targetLst.filter(function (ele) {\n        return ele != undefined && eval(type) - 1 + \"\" === ele.TargetType;\n      });\n      this.$set(this.dataCopied, \"targetFullLst\", this.data.targetSavedLst.filter(function (ele) {\n        return ele != undefined && eval(type) - 1 + \"\" === ele.TargetType;\n      }));\n    },\n    setParent: function setParent(parent) {\n      var ctrl = this;\n      if (ctrl.ruleForm.TargetType == 3) {\n        $.each(ctrl.departmentLst, function (k, group) {\n          if (ctrl.$Utils.isEmpty(parent) && group.GroupId == parent) {\n            ctrl.ruleForm.Value = group;\n          }\n        });\n      }\n    }\n  },\n  created: function created() {\n    var ctrl = this;\n    if (ctrl.ruleForm.Id) {\n      ctrl.loadHistory(ctrl.ruleForm.Id);\n      ctrl.changeType(ctrl.ruleForm.TargetType);\n      if (ctrl.ruleForm.IsPublic == undefined) {\n        ctrl.ruleForm.IsPublic = true;\n      }\n      $.each(ctrl.data.targetLst, function (k, v) {\n        if (ctrl.ruleForm.Id === v.Id) {\n          ctrl.ruleForm.Permission = v.Permission;\n          return false;\n        }\n      });\n      ctrl.ruleForm.MilestoneVal = new Date(ctrl.ruleForm.ActualStartDate);\n    } else {\n      ctrl.ruleForm.Permission = \"Edit\";\n      if (ctrl.isLeader) {\n        ctrl.ruleForm.TargetType = ctrl.typeLst[2].Id;\n        ctrl.changeType(ctrl.typeLst[2].Id);\n      } else {\n        ctrl.ruleForm.TargetType = ctrl.typeLst[0].Id;\n        ctrl.changeType(ctrl.typeLst[0].Id);\n      }\n      ctrl.ruleForm.IsPublic = true;\n    }\n    var user = JSON.parse(ctrl.$getItemLocalStorage(ctrl.$localStorageConstant.LoggedOnUser));\n    if (user.LoginName !== \"superadmin\") {\n      ctrl.data.workers = ctrl.data.workers.filter(function (el) {\n        return el.LoginName && el.LoginName.indexOf(\"superadmin\") === -1;\n      });\n    }\n  }\n});\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(2)))\n\n/***/ }),\n\n/***/ 1001:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_HistoryGrid_vue__ = __webpack_require__(1004);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_7d170cdc_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_HistoryGrid_vue__ = __webpack_require__(1005);\nfunction injectStyle (ssrContext) {\n  __webpack_require__(1002)\n}\nvar normalizeComponent = __webpack_require__(0)\n/* script */\n\n/* template */\n\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_HistoryGrid_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_7d170cdc_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_HistoryGrid_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ 1002:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(1003);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(932)(\"71e2cbac\", content, true);\n\n/***/ }),\n\n/***/ 1003:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(931)(true);\n// imports\n\n\n// module\nexports.push([module.i, \"#history-grid th{text-align:center!important}#history-grid td,#history-grid th,#history-grid tr{border:thin solid #d3d3d3}\", \"\", {\"version\":3,\"sources\":[\"/Users/yuukininomae/Sites/vue-crm2/src/components/dynamic/HistoryGrid.vue\"],\"names\":[],\"mappings\":\"AACA,iBACE,2BAA8B,CAE/B,AACD,mDAFE,yBAA6B,CAI9B\",\"file\":\"HistoryGrid.vue\",\"sourcesContent\":[\"\\n#history-grid th {\\n  text-align: center !important;\\n  border: solid thin lightgray;\\n}\\n#history-grid tr, #history-grid td {\\n  border: solid thin lightgray;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 1004:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  props: [\"dtSource\", \"dtHeader\"],\n  methods: {},\n  data: function data() {\n    return {};\n  }\n});\n\n/***/ }),\n\n/***/ 1005:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-card',{staticClass:\"box-card\",attrs:{\"id\":\"history-grid\"}},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"Lịch sử\")])]),_vm._v(\" \"),_c('div',{staticClass:\"el-table__body-wrapper is-scroll-left\"},[_c('table',{staticStyle:{\"width\":\"100%\"}},[_c('thead',{staticClass:\"positive-bg light text-bold\"},[_c('tr',_vm._l((_vm.dtHeader),function(h){return _c('th',[_vm._v(_vm._s(h))])}))]),_vm._v(\" \"),_c('tbody',_vm._l((_vm.dtSource),function(itemLog){return _c('tr',{style:({'background-color': itemLog.type=='body'? '#e4e5e6' : '#fff'})},[(itemLog.type=='head')?_c('td',{staticClass:\"success\",attrs:{\"colspan\":\"3\"}},[_vm._v(\"\\n          v.\"+_vm._s(itemLog.value.Version + '.0 ')),_c('strong',[_vm._v(_vm._s(itemLog.value.CreatedByName))]),_vm._v(\", \"+_vm._s(_vm.$Utils.formatDateTime(itemLog.value.Created,'DD-MM-YYYY HH:mm'))+\"\\n        \")]):_vm._e(),_vm._v(\" \"),(itemLog.type =='body')?_c('td',[_vm._v(_vm._s(itemLog.value.ColumnCaption))]):_vm._e(),_vm._v(\" \"),(itemLog.type =='body')?_c('td',[_vm._v(_vm._s(itemLog.value.OldDisplayValue))]):_vm._e(),_vm._v(\" \"),(itemLog.type =='body')?_c('td',[_vm._v(_vm._s(itemLog.value.NewDisplayValue))]):_vm._e()])}))])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ 1006:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-card',{staticClass:\"box-card\"},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',{staticStyle:{\"float\":\"left\"}},[_vm._v(\"Thông tin mục tiêu\")]),_vm._v(\" \"),_c('div',{staticStyle:{\"float\":\"right\",\"padding\":\"3px 0\"}},[(_vm.data.disabled==false && _vm.ruleForm.Permission && _vm.ruleForm.Permission !=='View' )?_c('el-button',{attrs:{\"icon\":\"fa fa-save\"},on:{\"click\":function($event){_vm.submitForm('ruleForm')}}}):_vm._e(),_vm._v(\" \"),(_vm.data.disabled==true && _vm.ruleForm.Permission && _vm.ruleForm.Permission !=='View' )?_c('el-button',{attrs:{\"icon\":\"el-icon-edit\"},on:{\"click\":_vm.changeEditState}}):_vm._e(),_vm._v(\" \"),(_vm.data.isEditable==true && _vm.data.item.Permission ==undefined )?_c('el-button',{attrs:{\"icon\":\"fa fa-eraser\"},on:{\"click\":function($event){_vm.resetForm('ruleForm')}}}):_vm._e(),_vm._v(\" \"),(_vm.ruleForm.Permission && _vm.ruleForm.Permission ==='Manage')?_c('el-button',{attrs:{\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){_vm.deleteTarget()}}}):_vm._e()],1)]),_vm._v(\" \"),_c('div',[_c('el-form',{ref:\"ruleForm\",attrs:{\"model\":_vm.ruleForm,\"rules\":_vm.rules,\"label-position\":_vm.$isMobileDevice?'top':'right',\"label-width\":\"150px\"}},[_c('el-form-item',{attrs:{\"label\":\"Tên:\",\"prop\":\"Name\"}},[_c('el-input',{attrs:{\"disabled\":_vm.data.disabled},model:{value:(_vm.ruleForm.Name),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Name\", $$v)},expression:\"ruleForm.Name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Hiển thị:\",\"prop\":\"IsPublic\"}},[_c('el-switch',{staticStyle:{\"display\":\"block\"},attrs:{\"disabled\":_vm.data.disabled,\"active-color\":\"#13ce66\",\"inactive-color\":\"#ff4949\",\"active-text\":\"Công khai\",\"inactive-text\":\"Riêng tư\"},model:{value:(_vm.ruleForm.IsPublic),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"IsPublic\", $$v)},expression:\"ruleForm.IsPublic\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"demo-form-inline\",attrs:{\"label\":\"Loại thời gian:\",\"prop\":\"Milestone\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"placeholder\":\"--Chọn--\",\"disabled\":_vm.data.disabled},on:{\"change\":function($event){_vm.ruleForm.MilestoneVal=''}},model:{value:(_vm.ruleForm.Milestone),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Milestone\", $$v)},expression:\"ruleForm.Milestone\"}},[_c('el-option',{attrs:{\"label\":\"Tuần\",\"value\":\"1\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"Tháng\",\"value\":\"2\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"Năm\",\"value\":\"3\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"Tuỳ chọn\",\"value\":\"4\"}})],1),_vm._v(\" \"),(_vm.ruleForm.Milestone==1)?_c('el-date-picker',{attrs:{\"type\":\"week\",\"format\":\"Tuần WW\",\"placeholder\":\"--Chọn tuần--\",\"disabled\":_vm.data.disabled},on:{\"change\":function($event){_vm.changeMilestoneVal($event, 'week')}},model:{value:(_vm.ruleForm.MilestoneVal),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"MilestoneVal\", $$v)},expression:\"ruleForm.MilestoneVal\"}}):_vm._e(),_vm._v(\" \"),(_vm.ruleForm.Milestone==2)?_c('el-date-picker',{attrs:{\"type\":\"month\",\"format\":\"MM\",\"placeholder\":\"--Chọn tháng--\",\"disabled\":_vm.data.disabled},on:{\"change\":function($event){_vm.changeMilestoneVal($event, 'month')}},model:{value:(_vm.ruleForm.MilestoneVal),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"MilestoneVal\", $$v)},expression:\"ruleForm.MilestoneVal\"}}):_vm._e(),_vm._v(\" \"),(_vm.ruleForm.Milestone==3)?_c('el-date-picker',{attrs:{\"type\":\"year\",\"placeholder\":\"--Chọn năm--\",\"disabled\":_vm.data.disabled},on:{\"change\":function($event){_vm.changeMilestoneVal($event, 'year')}},model:{value:(_vm.ruleForm.MilestoneVal),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"MilestoneVal\", $$v)},expression:\"ruleForm.MilestoneVal\"}}):_vm._e()],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"demo-form-inline\",attrs:{\"label\":\"Thời gian:\",\"prop\":\"startEndDate\"}},[_c('el-date-picker',{attrs:{\"format\":\"dd-MM-yyyy\",\"disabled\":_vm.data.disabled,\"type\":\"date\",\"placeholder\":\"Bắt đầu\"},model:{value:(_vm.ruleForm.ActualStartDate),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"ActualStartDate\", $$v)},expression:\"ruleForm.ActualStartDate\"}}),_vm._v(\" \"),_c('el-date-picker',{attrs:{\"format\":\"dd-MM-yyyy\",\"disabled\":_vm.data.disabled,\"type\":\"date\",\"placeholder\":\"Kết thúc\"},model:{value:(_vm.ruleForm.ActualFinishDate),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"ActualFinishDate\", $$v)},expression:\"ruleForm.ActualFinishDate\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Loại mục tiêu:\",\"prop\":\"TargetType\"}},[_c('el-radio-group',{attrs:{\"disabled\":!_vm.data.isEditable},on:{\"change\":function($event){_vm.changeType(_vm.ruleForm.TargetType)}},model:{value:(_vm.ruleForm.TargetType),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"TargetType\", $$v)},expression:\"ruleForm.TargetType\"}},_vm._l((_vm.typeLst),function(t){return _c('el-radio',{key:t.Id,attrs:{\"size\":\"mini\",\"label\":t.Id,\"border\":\"\",\"ng-show\":\"data.disabled?true:(t.Id ===ruleForm.TargetType) \"}},[_vm._v(_vm._s(t.Name))])}))],1),_vm._v(\" \"),(_vm.dataCopied.targetLst.length !=undefined && _vm.ruleForm.TargetType!=='1' )?_c('el-form-item',{attrs:{\"label\":\"Mục tiêu cha:\",\"prop\":\"ParentId\"}},[(_vm.isShowAllTarget || !_vm.data.isEditable)?_c('el-select',{attrs:{\"placeholder\":\"--Chọn--\",\"disabled\":_vm.ruleForm.Id!==undefined},on:{\"change\":function($event){_vm.setParent(_vm.ruleForm.ParentId)}},model:{value:(_vm.ruleForm.ParentId),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"ParentId\", $$v)},expression:\"ruleForm.ParentId\"}},_vm._l((_vm.dataCopied.targetFullLst),function(t){return _c('el-option',{key:t.Id,attrs:{\"label\":t.Name,\"value\":t.Id}})})):_c('el-select',{attrs:{\"placeholder\":\"--Chọn--\",\"disabled\":!_vm.data.isEditable},on:{\"change\":function($event){_vm.setParent(_vm.ruleForm.ParentId)}},model:{value:(_vm.ruleForm.ParentId),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"ParentId\", $$v)},expression:\"ruleForm.ParentId\"}},_vm._l((_vm.dataCopied.targetLst),function(t){return _c('el-option',{key:t.Id,attrs:{\"label\":t.Name,\"value\":t.Id}})})),_vm._v(\"\\n             \\n          \"),(_vm.ruleForm.Id===undefined)?_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"Bộ lọc thời gian sẽ ảnh hưởng tới số lượng mục tiêu cha hiển thị. Để hiển thị tất cả mục tiêu, hãy chọn 'Hiển thị tất cả'\",\"placement\":\"top\"}},[_c('i',{staticClass:\"fa fa-lg fa-info-circle\"})]):_vm._e(),_vm._v(\"\\n             \\n          \"),(_vm.ruleForm.Id===undefined)?_c('el-checkbox',{attrs:{\"label\":\"Hiển thị tất cả\"},model:{value:(_vm.isShowAllTarget),callback:function ($$v) {_vm.isShowAllTarget=$$v},expression:\"isShowAllTarget\"}}):_vm._e()],1):_vm._e(),_vm._v(\" \"),(_vm.data.departmentLst.length >0)?_c('el-form-item',{attrs:{\"label\":\"Thuộc phòng ban:\",\"prop\":\"Value\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"placeholder\":\"--Chọn--\",\"disabled\":_vm.data.disabled},model:{value:(_vm.ruleForm.Value),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Value\", $$v)},expression:\"ruleForm.Value\"}},_vm._l((_vm.data.departmentLst),function(t){return _c('el-option',{key:t.GroupId,attrs:{\"label\":t.GroupName,\"value\":t.GroupId}})}))],1):_vm._e(),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Quản lý:\",\"prop\":\"Owner\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"clearable\":\"\",\"placeholder\":\"--Chọn--\",\"disabled\":_vm.data.disabled},model:{value:(_vm.ruleForm.Owner),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Owner\", $$v)},expression:\"ruleForm.Owner\"}},_vm._l((_vm.data.workers),function(t){return (t.UserId.indexOf(';') == -1 && (_vm.ruleForm.Id || t.Status ==1))?_c('el-option',{key:t.UserId,attrs:{\"label\":t.Username,\"value\":t.UserId}}):_vm._e()}))],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Nhân sự thực hiện:\",\"prop\":\"Assigned\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"multiple\":\"\",\"placeholder\":\"--Chọn--\",\"disabled\":_vm.data.disabled},model:{value:(_vm.ruleForm.Assigned),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Assigned\", $$v)},expression:\"ruleForm.Assigned\"}},_vm._l((_vm.data.workers),function(t){return (_vm.ruleForm.Id || t.Status ==1)?_c('el-option',{key:t.UserId,attrs:{\"label\":t.Username,\"value\":t.UserId}}):_vm._e()}))],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"KPIs kế hoạch:\",\"prop\":\"Plan\"}},[_c('el-input',{attrs:{\"disabled\":_vm.data.disabled},on:{\"change\":function($event){_vm.autoCal()}},model:{value:(_vm.ruleForm.Plan),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Plan\", $$v)},expression:\"ruleForm.Plan\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"KPIs đạt:\",\"prop\":\"Done\"}},[_c('el-input',{attrs:{\"disabled\":_vm.data.disabled},on:{\"change\":function($event){_vm.autoCal()}},model:{value:(_vm.ruleForm.Done),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Done\", $$v)},expression:\"ruleForm.Done\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Đơn vị tính:\",\"prop\":\"Unit\"}},[_c('el-input',{attrs:{\"disabled\":_vm.data.disabled},model:{value:(_vm.ruleForm.Unit),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Unit\", $$v)},expression:\"ruleForm.Unit\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Tính % Hoàn thành:\",\"prop\":\"autoCal\"}},[_c('el-switch',{attrs:{\"disabled\":_vm.data.disabled},on:{\"change\":function($event){_vm.autoCal()}},model:{value:(_vm.ruleForm.autoCal),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"autoCal\", $$v)},expression:\"ruleForm.autoCal\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Tỉ lệ hoành thành:\",\"prop\":\"Progress\"}},[_c('el-input',{attrs:{\"disabled\":_vm.data.disabled},model:{value:(_vm.ruleForm.Progress),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Progress\", $$v)},expression:\"ruleForm.Progress\"}})],1)],1)],1)]),_vm._v(\" \"),(!_vm.data.isEditable)?_c('HistoryGrid',{attrs:{\"dtSource\":_vm.viewHistoryModel,\"dtHeader\":['Mục', 'Giá trị cũ', 'Giá trị mới']}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ 1007:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"tTbl\"}},[_c('div',{staticStyle:{\"flex\":\"1\",\"display\":\"flex\",\"align-items\":\"center\",\"justify-content\":\"space-between\",\"font-size\":\"14px\",\"padding-right\":\"8px\"}},[_c('el-row'),_vm._v(\" \"),(_vm.editableUser && !_vm.$isMobileDevice)?_c('el-tooltip',{attrs:{\"content\":\"Thêm mới mục tiêu\",\"placement\":\"top\"}},[_c('el-button',{attrs:{\"size\":\"mini\",\"icon\":\"fa fa-plus\"},on:{\"click\":function($event){_vm.addNewTarget()}}})],1):_vm._e(),_vm._v(\" \"),(_vm.editableUser && _vm.$isMobileDevice)?_c('el-button',{attrs:{\"size\":\"mini\",\"icon\":\"fa fa-plus\"},on:{\"click\":function($event){_vm.addNewTarget()}}}):_vm._e()],1),_vm._v(\" \"),_c('el-table',{attrs:{\"data\":_vm.dtSrc,\"border\":\"\",\"empty-text\":\"Không có dữ liệu\"}},[_c('el-table-column',{attrs:{\"label\":\"\",\"width\":\"50px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticStyle:{\"text-align\":\"center\",\"cursor\":\"pointer\"},on:{\"click\":function($event){_vm.openTargetDetail(scope.row)}}},[_c('i',{staticClass:\"fa-lg icon-magnifier-add\"})])]}}])}),_vm._v(\" \"),_c('el-table-tree-column',{attrs:{\"prop\":\"Name\",\"label\":\"Tên\",\"levelKey\":\"level\",\"treeKey\":\"Id\",\"parentKey\":\"ParentId\",\"min-width\":\"200px\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"Progress\",\"label\":\"Hoàn thành\",\"show-overflow-tooltip\":true},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-progress',{attrs:{\"text-inside\":true,\"stroke-width\":18,\"percentage\":Math.round(isNaN(scope.row.Progress)?0:scope.row.Progress)}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"TargetType\",\"label\":\"Loại\",\"show-overflow-tooltip\":true},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n        \"+_vm._s(_vm.targetsObj[scope.row.TargetType]?_vm.targetsObj[scope.row.TargetType].Name:'---')+\"\\n      \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"Plan\",\"label\":\"Kế hoạch\",\"show-overflow-tooltip\":true}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"Done\",\"label\":\"Đạt được\",\"show-overflow-tooltip\":true}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"Unit\",\"label\":\"Đơn vị\",\"show-overflow-tooltip\":true}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"Owner\",\"label\":\"Người quản lý\",\"show-overflow-tooltip\":true},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[(_vm.userWithAvatarLst[scope.row.Owner]!=undefined)?_c('img',{staticClass:\"avatar\",staticStyle:{\"margin\":\"8px 10px 0 0\"},attrs:{\"height\":\"35\",\"width\":\"35\",\"title\":_vm.userWithAvatarLst[scope.row.Owner].Username,\"src\":_vm.loadAvatar(_vm.userWithAvatarLst[scope.row.Owner].Avatar)}}):_c('span',[_vm._v(_vm._s(scope.row.OwnerName))])])]}}])})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ 935:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_TargetSetting_vue__ = __webpack_require__(997);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_800ef1b4_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_TargetSetting_vue__ = __webpack_require__(1007);\nfunction injectStyle (ssrContext) {\n  __webpack_require__(995)\n}\nvar normalizeComponent = __webpack_require__(0)\n/* script */\n\n/* template */\n\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_TargetSetting_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_800ef1b4_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_TargetSetting_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ 985:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_TargetDialog_vue__ = __webpack_require__(1000);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_c9eec43c_hasScoped_true_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_TargetDialog_vue__ = __webpack_require__(1006);\nfunction injectStyle (ssrContext) {\n  __webpack_require__(998)\n}\nvar normalizeComponent = __webpack_require__(0)\n/* script */\n\n/* template */\n\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-c9eec43c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_TargetDialog_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_c9eec43c_hasScoped_true_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_TargetDialog_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ 995:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(996);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(932)(\"3cb0f242\", content, true);\n\n/***/ }),\n\n/***/ 996:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(931)(true);\n// imports\n\n\n// module\nexports.push([module.i, \"#tTbl #plusBtn{position:fixed;top:120px;right:30px;z-index:99;cursor:pointer}\", \"\", {\"version\":3,\"sources\":[\"/Users/yuukininomae/Sites/vue-crm2/src/components/static/TargetSetting.vue\"],\"names\":[],\"mappings\":\"AACA,eACE,eAAgB,AAChB,UAAW,AACX,WAAY,AACZ,WAAY,AACZ,cAAgB,CACjB\",\"file\":\"TargetSetting.vue\",\"sourcesContent\":[\"\\n#tTbl #plusBtn {\\n  position: fixed;\\n  top: 120px;\\n  right: 30px;\\n  z-index: 99;\\n  cursor: pointer;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 997:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_element_tree_grid_src_index_js__ = __webpack_require__(280);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_element_tree_grid__ = __webpack_require__(30);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_element_tree_grid___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_element_tree_grid__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__components_static_TargetDialog__ = __webpack_require__(985);\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].use(__webpack_require__(40));\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  props: [\"targetLst\", \"options\", \"typeLst\", \"workerLst\", \"departmentLst\", \"targetFieldLst\", \"getTargets\", \"getObject\", \"rootId\", \"targetSavedLst\", \"years\", \"months\", \"firstDayOfWeekCfg\"],\n  components: { ElTreeGrid: __WEBPACK_IMPORTED_MODULE_2_element_tree_grid___default.a, ElTableTreeColumn: __WEBPACK_IMPORTED_MODULE_1_element_tree_grid_src_index_js__[\"a\" /* default */] },\n  data: function data() {\n    return {\n      dtSrc: [],\n      userWithAvatarLst: [],\n      editableUser: false,\n      weeksOfYear: this.years\n    };\n  },\n\n  methods: {\n    loadAvatar: function loadAvatar(avatar) {\n      if (avatar == undefined) avatar = 'assets/images/avatars/profile.png';\n      avatar = avatar.replace('profile.jpg', 'profile.png');\n      var strAvatar = avatar === \"assets/images/avatars/profile.png\" ? this.$appUri.BaseURL + avatar : this.$appUri.BaseURL + avatar.replace('/', '') + \"&Height=50&Width=50\";\n      return strAvatar;\n    },\n    openTargetDetail: function openTargetDetail(row) {\n      var dataToPass = {\n        item: row,\n        workers: this.workerLst,\n\n        isEditable: false,\n        targetLst: this.targetLst,\n        departmentLst: this.departmentLst,\n        disabled: true,\n        targetFields: JSON.parse(this.targetFieldLst),\n        getTargets: this.getTargets,\n        getObject: this.getObject,\n        targetSavedLst: this.targetSavedLst,\n        weeksOfYear: this.weeksOfYear,\n        months: this.months,\n        firstDayOfWeekCfg: this.firstDayOfWeekCfg\n      };\n      this.$hub.$emit(\"set-modal-data\", \"\", \"50%\", true, \"center\", __WEBPACK_IMPORTED_MODULE_3__components_static_TargetDialog__[\"a\" /* default */], false, \"\", dataToPass, true);\n      this.$hub.$emit(\"open-modal\");\n    },\n    addNewTarget: function addNewTarget() {\n      if (this.targetFieldLst && this.targetFieldLst.constructor != Array) return;\n      var dataToPass = { item: {},\n        workers: this.workerLst,\n        departments: this.departmentLst,\n        isEditable: true,\n        targetLst: this.targetLst,\n        departmentLst: this.departmentLst,\n        disabled: false,\n        targetFields: JSON.parse(this.targetFieldLst),\n        rootId: this.rootId,\n        getTargets: this.getTargets,\n        getObject: this.getObject,\n        targetSavedLst: this.targetSavedLst,\n        weeksOfYear: this.weeksOfYear,\n        months: this.months,\n        firstDayOfWeekCfg: this.firstDayOfWeekCfg\n      };\n      this.$hub.$emit(\"set-modal-data\", \"\", \"50%\", true, \"center\", __WEBPACK_IMPORTED_MODULE_3__components_static_TargetDialog__[\"a\" /* default */], false, \"\", dataToPass, false);\n      this.$hub.$emit(\"open-modal\");\n    }\n  },\n  watch: {\n    targetLst: function targetLst(val) {\n      this.dtSrc = this.$Utils.treeify(val, this.options.key, this.options.parentKey, 'level');\n    }\n  },\n  created: function created() {\n    this.userWithAvatarLst = this.$Utils.rotateDementionArr(this.workerLst, 'UserId');\n    this.targetsObj = this.$Utils.rotateDementionArr(this.typeLst, 'Id');\n    this.dtSrc = this.$Utils.treeify(this.targetLst, this.options.key, this.options.parentKey, 'level');\n    var user = JSON.parse(this.$getItemLocalStorage(this.$localStorageConstant.LoggedOnUser));\n    if (this.$isSystemAdmin() || this.$isMantisAdmin()) {\n      this.editableUser = true;\n    } else if (user.GroupRoles) {\n      if (user.GroupRoles.Leader && user.GroupRoles.Leader.indexOf(user.Project.GroupId) > -1 || user.GroupRoles.Director && user.GroupRoles.Director.indexOf(user.Project.GroupId) > -1) {\n        this.editableUser = true;\n      }\n    } else {\n      this.editableUser = false;\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 998:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(999);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(932)(\"1031833e\", content, true);\n\n/***/ }),\n\n/***/ 999:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(931)(true);\n// imports\n\n\n// module\nexports.push([module.i, \"@media only screen and (max-width:768px){.el-input[data-v-c9eec43c],.el-radio[data-v-c9eec43c],.el-select[data-v-c9eec43c]{width:100%}.el-radio[data-v-c9eec43c]{margin-left:0!important}}\", \"\", {\"version\":3,\"sources\":[\"/Users/yuukininomae/Sites/vue-crm2/src/components/static/TargetDialog.vue\"],\"names\":[],\"mappings\":\"AACA,yCAEA,kFAGI,UAAY,CACf,AACD,2BACI,uBAA4B,CAC/B,CACA\",\"file\":\"TargetDialog.vue\",\"sourcesContent\":[\"\\n@media only screen and (max-width: 768px) {\\n  /* For mobile phones: */\\n.el-input[data-v-c9eec43c],\\n  .el-select[data-v-c9eec43c],\\n  .el-radio[data-v-c9eec43c] {\\n    width: 100%;\\n}\\n.el-radio[data-v-c9eec43c] {\\n    margin-left: 0px !important;\\n}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/11.9af1c197f21bcae1e0de.js","<template>\n  <div>\n    <el-card class=\"box-card\">\n      <div slot=\"header\" class=\"clearfix\">\n        <span style=\"float: left;\">Thông tin mục tiêu</span>\n        <div style=\"float: right; padding: 3px 0\">\n          <el-button v-if=\"data.disabled==false && ruleForm.Permission && ruleForm.Permission !=='View' \" @click=\"submitForm('ruleForm')\" icon=\"fa fa-save\"/>\n          <el-button v-if=\"data.disabled==true && ruleForm.Permission && ruleForm.Permission !=='View' \" @click=\"changeEditState\" icon=\"el-icon-edit\"/>\n          <el-button v-if=\"data.isEditable==true && data.item.Permission ==undefined \" @click=\"resetForm('ruleForm')\" icon=\"fa fa-eraser\"/>\n          <el-button v-if=\"ruleForm.Permission && ruleForm.Permission ==='Manage'\" @click=\"deleteTarget()\" icon=\"el-icon-delete\"/>\n        </div>\n      </div>\n      <div>\n        <el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" :label-position=\"$isMobileDevice?'top':'right'\" label-width=\"150px\">\n          <el-form-item label=\"Tên:\" prop=\"Name\" >\n            <el-input v-model=\"ruleForm.Name\" :disabled=\"data.disabled\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"Hiển thị:\" prop=\"IsPublic\">\n            <el-switch :disabled=\"data.disabled\" style=\"display: block\" v-model=\"ruleForm.IsPublic\" active-color=\"#13ce66\"\n                       inactive-color=\"#ff4949\" active-text=\"Công khai\" inactive-text=\"Riêng tư\">\n            </el-switch>\n          </el-form-item>\n          <el-form-item label=\"Loại thời gian:\" prop=\"Milestone\" class=\"demo-form-inline\">\n            <el-select v-model=\"ruleForm.Milestone\" filterable placeholder=\"--Chọn--\" :disabled=\"data.disabled\" @change=\"ruleForm.MilestoneVal=''\">\n              <el-option label=\"Tuần\" value=\"1\"></el-option>\n              <el-option label=\"Tháng\" value=\"2\"></el-option>\n              <el-option label=\"Năm\" value=\"3\"></el-option>\n              <el-option label=\"Tuỳ chọn\" value=\"4\"></el-option>\n            </el-select>\n            <el-date-picker v-model=\"ruleForm.MilestoneVal\" type=\"week\" format=\"Tuần WW\" placeholder=\"--Chọn tuần--\" v-if=\"ruleForm.Milestone==1\"\n                            @change=\"changeMilestoneVal($event, 'week')\" :disabled=\"data.disabled\"></el-date-picker>\n\n            <el-date-picker v-model=\"ruleForm.MilestoneVal\" type=\"month\" format=\"MM\" placeholder=\"--Chọn tháng--\" v-if=\"ruleForm.Milestone==2\"\n                            @change=\"changeMilestoneVal($event, 'month')\" :disabled=\"data.disabled\"></el-date-picker>\n            <el-date-picker v-model=\"ruleForm.MilestoneVal\" type=\"year\" placeholder=\"--Chọn năm--\" v-if=\"ruleForm.Milestone==3\"\n                            @change=\"changeMilestoneVal($event, 'year')\" :disabled=\"data.disabled\"></el-date-picker>\n          </el-form-item>\n          <el-form-item label=\"Thời gian:\" prop=\"startEndDate\" class=\"demo-form-inline\">\n            <el-date-picker format = \"dd-MM-yyyy\" :disabled=\"data.disabled \" v-model=\"ruleForm.ActualStartDate\"\n                            type=\"date\" placeholder=\"Bắt đầu\">\n            </el-date-picker>\n            <el-date-picker format = \"dd-MM-yyyy\" :disabled=\"data.disabled\"\n                            v-model=\"ruleForm.ActualFinishDate\" type=\"date\" placeholder=\"Kết thúc\">\n            </el-date-picker>\n          </el-form-item>\n          <el-form-item label=\"Loại mục tiêu:\" prop=\"TargetType\" >\n            <el-radio-group v-model=\"ruleForm.TargetType\" :disabled=\"!data.isEditable\" @change=\"changeType(ruleForm.TargetType)\">\n              <el-radio size=\"mini\" v-for=\"t in typeLst\" :label=\"t.Id\" :key=\"t.Id\" border ng-show=\"data.disabled?true:(t.Id ===ruleForm.TargetType) \">{{t.Name}}</el-radio>\n            </el-radio-group>\n          </el-form-item>\n          <el-form-item label=\"Mục tiêu cha:\" prop=\"ParentId\" v-if=\"dataCopied.targetLst.length !=undefined && ruleForm.TargetType!=='1' \">\n            <el-select v-if=\"isShowAllTarget || !data.isEditable\" v-model=\"ruleForm.ParentId\" placeholder=\"--Chọn--\"  :disabled=\"ruleForm.Id!==undefined\" @change=\"setParent(ruleForm.ParentId)\">\n              <el-option v-for=\"t in dataCopied.targetFullLst\" :key=\"t.Id\" :label=\"t.Name\" :value=\"t.Id\"/>\n            </el-select>\n            <el-select v-else v-model=\"ruleForm.ParentId\" placeholder=\"--Chọn--\"  :disabled=\"!data.isEditable\" @change=\"setParent(ruleForm.ParentId)\">\n              <el-option v-for=\"t in dataCopied.targetLst\" :key=\"t.Id\" :label=\"t.Name\" :value=\"t.Id\"/>\n            </el-select>\n            &nbsp;&nbsp;&nbsp;\n            <el-tooltip v-if=\"ruleForm.Id===undefined\" class=\"item\" effect=\"dark\" content=\"Bộ lọc thời gian sẽ ảnh hưởng tới số lượng mục tiêu cha hiển thị. Để hiển thị tất cả mục tiêu, hãy chọn 'Hiển thị tất cả'\" placement=\"top\">\n              <i class=\"fa fa-lg fa-info-circle\"></i>\n            </el-tooltip>\n            &nbsp;&nbsp;&nbsp;\n            <el-checkbox  v-if=\"ruleForm.Id===undefined\" label=\"Hiển thị tất cả\" v-model=\"isShowAllTarget\"></el-checkbox>\n          </el-form-item>\n          <el-form-item v-if=\"data.departmentLst.length >0\" label=\"Thuộc phòng ban:\" prop=\"Value\">\n            <el-select v-model=\"ruleForm.Value\" filterable placeholder=\"--Chọn--\" :disabled=\"data.disabled\">\n              <el-option v-for=\"t in data.departmentLst\" :key=\"t.GroupId\" :label=\"t.GroupName\" :value=\"t.GroupId\"/>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"Quản lý:\" prop=\"Owner\">\n            <el-select v-model=\"ruleForm.Owner\" filterable clearable placeholder=\"--Chọn--\" :disabled=\"data.disabled\">\n              <el-option v-for=\"t in data.workers\" v-if=\"t.UserId.indexOf(';') == -1 && (ruleForm.Id || t.Status ==1)\" :key=\"t.UserId\" :label=\"t.Username\" :value=\"t.UserId\"/>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"Nhân sự thực hiện:\" prop=\"Assigned\">\n            <el-select v-model=\"ruleForm.Assigned\" filterable multiple placeholder=\"--Chọn--\" :disabled=\"data.disabled\">\n              <el-option v-for=\"t in data.workers\" :key=\"t.UserId\" :label=\"t.Username\" :value=\"t.UserId\" v-if=\"ruleForm.Id || t.Status ==1\" />\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"KPIs kế hoạch:\" prop=\"Plan\">\n            <el-input v-model=\"ruleForm.Plan\" @change=\"autoCal()\" :disabled=\"data.disabled\"/>\n          </el-form-item>\n          <el-form-item label=\"KPIs đạt:\" prop=\"Done\">\n            <el-input v-model=\"ruleForm.Done\" @change=\"autoCal()\" :disabled=\"data.disabled\"/>\n          </el-form-item>\n          <el-form-item label=\"Đơn vị tính:\" prop=\"Unit\">\n            <el-input v-model=\"ruleForm.Unit\" :disabled=\"data.disabled\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"Tính % Hoàn thành:\" prop=\"autoCal\">\n            <el-switch v-model=\"ruleForm.autoCal\" @change=\"autoCal()\" :disabled=\"data.disabled\"/>\n          </el-form-item>\n          <el-form-item label=\"Tỉ lệ hoành thành:\" prop=\"Progress\">\n            <el-input v-model=\"ruleForm.Progress\" :disabled=\"data.disabled\"/>\n          </el-form-item>\n        </el-form>\n      </div>\n    </el-card>\n    <HistoryGrid v-if=\"!data.isEditable\" :dtSource=viewHistoryModel :dtHeader=\"['Mục', 'Giá trị cũ', 'Giá trị mới']\" />\n  </div>\n</template>\n\n<script>\nimport HistoryGrid from \"@/components/dynamic/HistoryGrid\";\nimport Vue from \"vue\";\nVue.use(require(\"vue-moment\"));\nexport default {\n  components: {\n    HistoryGrid\n  },\n  props: [\"data\"],\n  data() {\n    var user = JSON.parse(\n      this.$getItemLocalStorage(this.$localStorageConstant.LoggedOnUser)\n    );\n    var isLeader =\n      !this.$isMantisAdmin() &&\n      !this.$isMantisAdmin() &&\n      user.GroupRoles &&\n      user.GroupRoles.Leader &&\n      user.GroupRoles.Leader.indexOf(user.Project.GroupId) > -1;\n    var ruleForm = {};\n    if (this.data.item.Name != undefined) {\n      ruleForm = this.$Lodash.cloneDeep(this.data.item);\n      if (\n        this.data.item.Assigned != undefined &&\n        !this.$Utils.equals(this.data.item.Assigned, \"\")\n      ) {\n        ruleForm.Assigned = this.data.item.Assigned.split(\";\").filter(item => {\n          return !this.$Utils.equals(item, \"\");\n        });\n      } else {\n        ruleForm.Assigned = [];\n      }\n      ruleForm.autoCal = false;\n      ruleForm.oldName = this.data.item.Name + \"\";\n      ruleForm.IsPublic = ruleForm.IsPublic === \"0\" ? false : true;\n    } else {\n      ruleForm.Name = \"\";\n      ruleForm.Value = \"\";\n      ruleForm.TargetType = \"\";\n      ruleForm.IsPublic = true;\n      ruleForm.ActualStartDate = \"\";\n      ruleForm.ActualFinishDate = \"\";\n      ruleForm.Assigned = [];\n      ruleForm.ParentId = \"\";\n      ruleForm.Owner = \"\";\n      ruleForm.Plan = \"\";\n      ruleForm.Done = \"\";\n      ruleForm.Unit = \"\";\n      ruleForm.Progress = 0;\n      ruleForm.autoCal = true;\n      ruleForm.oldName = \"\";\n      ruleForm.Milestone = \"\";\n      ruleForm.MilestoneVal = {};\n    }\n    return {\n      isShowAllTarget: false,\n      oldObject: this.$Lodash.cloneDeep(ruleForm),\n      typeLst: [\n        {\n          Id: \"1\",\n          Name: \"Mục tiêu công ty\"\n        },\n        {\n          Id: \"2\",\n          Name: \"Mục tiêu phòng ban\"\n        },\n        {\n          Id: \"3\",\n          Name: \"Mục tiêu cá nhân\"\n        }\n      ],\n      ruleForm: ruleForm,\n      isLeader: isLeader,\n      dataCopied: this.$Lodash.cloneDeep(this.data),\n      viewHistoryModel: [],\n      rules: {\n        Name: [\n          { required: true, message: \"Tên bắt buộc phải điền\", trigger: \"blur\" }\n        ],\n        Value: [\n          {\n            required: true,\n            message: \"Phòng ban bắt buộc phải chọn\",\n            trigger: \"change\"\n          }\n        ],\n        ParentId: [\n          {\n            required: true,\n            message: \"Mục tiêu cha bắt buộc phải chọn\",\n            trigger: \"change\"\n          }\n        ]\n      }\n    };\n  },\n  watch: {},\n  methods: {\n    changeMilestoneVal(val, type) {\n      this.ruleForm.ActualStartDate = val;\n      if (type === \"week\")\n        this.ruleForm.ActualFinishDate = Vue.moment(val)\n          .isoWeekday(this.dataCopied.firstDayOfWeekCfg)\n          .endOf(\"isoweek\")._d;\n      else if (type === \"month\")\n        this.ruleForm.ActualFinishDate = Vue.moment(val).endOf(\"month\")._d;\n      else if (type === \"year\")\n        this.ruleForm.ActualFinishDate = Vue.moment(val).endOf(\"year\")._d;\n      this.$forceUpdate();\n    },\n    submitForm(formName) {\n      var ctrl = this;\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          ctrl.checkExits();\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n    autoCal() {\n      if (this.ruleForm.autoCal == true) {\n        var tmp = Math.round(\n          Number(this.ruleForm.Done) / Number(this.ruleForm.Plan) * 100\n        );\n        this.ruleForm.Progress = isNaN(tmp) ? this.ruleForm.Progress : tmp;\n      }\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n    },\n    close() {\n      this.$hub.$emit(\"close-modal\");\n    },\n    deleteTarget() {\n      var ctrl = this;\n      this.$confirm(\"Mục tiêu sẽ bị xóa hoàn toàn. Tiếp tục?\", \"Cảnh báo\", {\n        confirmButtonText: \"Xóa\",\n        cancelButtonText: \"Bỏ qua\",\n        type: \"warning\"\n      })\n        .then(() => {\n          ctrl.recursiveDeleteTarget({\n            Id: ctrl.data.item.Id,\n            Level: ctrl.data.item.Level\n          });\n          ctrl.close();\n          //update tasks\n          var tRequest = this.$Utils.clone(this.$singleRequest);\n          tRequest.R1_RequestTemplate = \"AG_Task_Task.Search\";\n          tRequest.R1_RequestDataGroup = \"DataGroup.danh-sach-cong-viec.04b66\";\n          tRequest.R1_RequestFields = \"Id;Targets;TargetsName;\";\n          for (var i = 1; i <= eval(ctrl.data.item.Level - 5); i++) {\n            tRequest.R1_RequestFields += \"TargetsLevel\" + i + \";\";\n          }\n          tRequest[\"R1_TargetsLevel\" + [ctrl.model.Level - 5]] = ctrl.model.Id;\n          ctrl.$Utils.post(tRequest).then(function(response) {\n            response = ctrl.$Utils.getDataWithRoot(\n              response.R1,\n              \"Data.TasksDS.Task\"\n            );\n            var updateRequest = ctrl.$Lodash.cloneDeep(ctrl.$singleRequest);\n            $.each(response, function(index, value) {\n              var fVal = {};\n              fVal.Id = ctrl.$Lodash.cloneDeep(value.Id);\n              fVal.Targets = \"\";\n              fVal.TargetsName = \"\";\n              fVal.RequestTemplate = \"AG_Task_Task.Update\";\n              fVal.RequestDataGroup = \"DataGroup.danh-sach-cong-viec.04b66\";\n              fVal.RequestFields = \"Id;Targets;TargetsName;\";\n              $.each(value.Targets.split(\";\"), function(key, val) {\n                if (key < eval(ctrl.data.item.Level - 6)) {\n                  fVal.Targets += val + \";\";\n                  fVal[\"TargetsLevel\" + [key + 1]] = val;\n                  fVal.RequestFields += \"TargetsLevel\" + [key + 1] + \";\";\n                }\n              });\n              $.each(value.TargetsName.split(\";\"), function(key, val) {\n                if (key < eval(ctrl.data.item.Level - 6)) {\n                  fVal.TargetsName += val + \";\";\n                }\n              });\n              updateRequest.TotalRequests = index + 1;\n              updateRequest = ctrl.$Utils.updateParamsSingleRequest(\n                updateRequest,\n                fVal,\n                index + 1\n              );\n            });\n            ctrl.$Utils.post(updateRequest);\n          });\n        })\n        .catch(() => {});\n    },\n    recursiveDeleteTarget(data) {\n      var ctrl = this;\n      if (ctrl.$Utils.isEmpty(data)) {\n        var request = ctrl.$Lodash.cloneDeep(ctrl.$singleRequest);\n        request.R1_RequestTemplate = \"Setting.Delete\";\n        request.R1_Id = data.Id;\n        ctrl.$Utils.post(request).then(function(dData) {\n          $.each(ctrl.data.targetLst, function(key, value) {\n            if (data.Id == value.ParentId) {\n              ctrl.recursiveDeleteTarget(value);\n            }\n          });\n          ctrl.data.getTargets();\n          ctrl.data.getObject();\n        });\n      }\n    },\n    loadHistory(id) {\n      var ctrl = this;\n      var request = {\n        RequestAction: \"Request\",\n        RequestClass: \"xBase\",\n        TotalRequests: \"1\",\n        R1_RequestTemplate: \"ChangedLogs\",\n        R1_Code: \"ChangedHistory\",\n        R1_SourceId: id\n      };\n\n      var arrShowField = [];\n      arrShowField = ctrl.data.targetFields.filter(field => {\n        return field.History == \"true\";\n      });\n\n      ctrl.$Utils.post(request).then(function(result) {\n        if (result.success && result.R1.success) {\n          var logData = ctrl.$Utils.getDataWithRoot(\n            result,\n            \"R1.Data.DataDS.Logs\"\n          );\n          /**\n           * tạo vòng lặp để lấy từng bản ghi\n           * Dùng JSON.parse để decode dữ liệu lưu trong lịch sử thay đổi\n           */\n          $.each(logData, function(k, log) {\n            try {\n              ctrl.viewHistoryModel.push({ type: \"head\", value: log });\n              var logChanges = JSON.parse(log.Changes);\n              $.each(logChanges, function(k, change) {\n                if (\n                  arrShowField.length > 0 &&\n                  change.ColumnName !== \"Assigned\" &&\n                  change.ColumnName !== \"Id\"\n                ) {\n                  if (\n                    change.ColumnName === \"ActualStartDate\" ||\n                    change.ColumnName === \"ActualFinishDate\" ||\n                    change.ColumnName === \"Created\"\n                  ) {\n                    var format = \"DD/MM/YYYY\";\n                    var date = ctrl.$Utils.stringToDate(change.OldDisplayValue);\n                    change.OldDisplayValue =\n                      log.Version === \"1\"\n                        ? \"\"\n                        : ctrl.$Utils.formatDateTime(date, format);\n                    date = ctrl.$Utils.stringToDate(change.NewDisplayValue);\n                    change.NewDisplayValue = ctrl.$Utils.formatDateTime(\n                      date,\n                      format\n                    );\n                  }\n                  if (\n                    (change.ColumnName === \"AssignedName\" &&\n                      !change.OldDisplayValue &&\n                      change.NewDisplayValue === \"\") == false\n                  ) {\n                    arrShowField.forEach(function(field) {\n                      var object = { type: \"body\", value: change };\n                      var checkField =\n                        field.DynamicText != undefined &&\n                        field.DynamicText != \"\"\n                          ? field.DynamicText\n                          : field.Name;\n                      if (change.ColumnName == checkField) {\n                        if (change.ColumnName === \"TargetType\") {\n                          ctrl.typeLst.filter(item => {\n                            if (item.Id === change.OldDisplayValue)\n                              change.OldDisplayValue =\n                                log.Version === \"1\" ? \"\" : item.Name;\n                            if (item.Id === change.NewDisplayValue)\n                              change.NewDisplayValue = item.Name;\n                          });\n                        } else if (change.ColumnName === \"IsPublic\") {\n                          change.OldDisplayValue =\n                            log.Version === \"1\"\n                              ? \"\"\n                              : change.OldDisplayValue === \"0\" ||\n                                change.OldDisplayValue == false\n                                ? \"Riêng tư\"\n                                : \"Công khai\";\n                          change.NewDisplayValue =\n                            change.NewDisplayValue === \"0\" ||\n                            change.OldDisplayValue == false\n                              ? \"Riêng tư\"\n                              : \"Công khai\";\n                        }\n                        ctrl.viewHistoryModel.push(object);\n                      }\n                    });\n                  }\n                }\n              });\n            } catch (ex) {\n              console.log(ex);\n            }\n          });\n        }\n      });\n    },\n    checkExits() {\n      var ctrl = this;\n      var request = ctrl.$Lodash.cloneDeep(this.$singleRequest);\n      request.R1_RequestTemplate = \"xDynamicData_Setting.Search\";\n      request.R1_RequestFields = \"Name;ParentId;\";\n      request.R1_Name = ctrl.ruleForm.Name;\n      request.R1_RequestDataGroup = \"DataGroup.muc-tieu.091fb\";\n      request.R1_ParentId = ctrl.ruleForm.Parent\n        ? ctrl.ruleForm.Parent.Id\n        : ctrl.ruleForm.ParentId;\n      ctrl.$Utils.post(request).then(function(data) {\n        var listExitsTar = ctrl.$Utils.getDataWithRoot(\n          data.R1,\n          \"Data.DynamicDS.Setting\"\n        );\n        listExitsTar = listExitsTar.filter(function(el) {\n          return el.Name != ctrl.ruleForm.oldName;\n        });\n        if (listExitsTar.length != 0) {\n          ctrl.$message.error(\"Tên mục tiêu đã có\");\n        } else {\n          ctrl.saveOrUpdate();\n        }\n      });\n    },\n    saveOrUpdate() {\n      var ctrl = this;\n      var request = ctrl.$Lodash.cloneDeep(this.$singleRequest);\n      if (!ctrl.ruleForm.Id) {\n        request.R1_RequestTemplate = \"xDynamicData_Setting.Insert\";\n        request.R1_ReferenceId = ctrl.ruleForm.ParentId\n          ? ctrl.ruleForm.ParentId\n          : ctrl.data.rootId;\n        request.R1_NestedSetType = \"InsertLastChildNode\";\n      } else {\n        request.R1_RequestTemplate = \"xDynamicData_Setting.Update\";\n        request.R1_Id = ctrl.ruleForm.Id;\n      }\n      request.R1_RequestFields =\n        \"Plan;Done;Progress;Unit;Assigned;AssignedName;Owner;OwnerName;TargetType;Id;Index;\" +\n        \"Code;Name;Value;Description;LeftIndex;ParentId;Level;Value;RightIndex;Created;CreatedBy;Modified;IsPublic;ActualStartDate;ActualFinishDate;ValueName;Milestone\";\n      request.R1_RequestDataGroup = \"DataGroup.muc-tieu.091fb\";\n      request.R1_Name = ctrl.ruleForm.Name;\n      request.R1_Plan = ctrl.ruleForm.Plan;\n      request.R1_Done = ctrl.ruleForm.Done;\n      request.R1_Owner = ctrl.ruleForm.Owner;\n      request.R1_TargetType = ctrl.ruleForm.TargetType;\n      request.R1_Milestone = ctrl.ruleForm.Milestone;\n      if (!isNaN(parseFloat(ctrl.ruleForm.Progress + \"\"))) {\n        request.R1_Progress = ctrl.ruleForm.Progress;\n      } else {\n        delete ctrl.ruleForm.Progress;\n      }\n      request.R1_Unit = ctrl.ruleForm.Unit;\n      request.R1_IsPublic = ctrl.ruleForm.IsPublic == true ? 1 : 0;\n      request.R1_Value = ctrl.ruleForm.Value;\n      $.each(ctrl.departmentLst, (k, val) => {\n        var res = val.GroupId !== ctrl.ruleForm.Value;\n        if (!res) {\n          request.R1_ValueName = val.GroupName;\n        }\n        return res;\n      });\n      request.R1_Assigned = \"\";\n      request.R1_AssignedName = \"\";\n      $.each(ctrl.ruleForm.Assigned, function(k, Id) {\n        request.R1_Assigned += Id + \";\";\n        ctrl.data.workers.filter(function(user) {\n          if (user.UserId && user.UserId === Id) {\n            request.R1_AssignedName += user.Username + \",\";\n          }\n        });\n      });\n      ctrl.data.workers.filter(function(user) {\n        if (user.UserId && user.UserId === ctrl.ruleForm.Owner) {\n          request.R1_OwnerName = user.Username;\n        }\n      });\n      if (ctrl.$Utils.isEmpty(ctrl.ruleForm.ActualStartDate))\n        request.R1_ActualStartDate = ctrl.$Utils.formatDateTime(\n          ctrl.ruleForm.ActualStartDate\n        );\n      if (ctrl.$Utils.isEmpty(ctrl.ruleForm.ActualFinishDate))\n        request.R1_ActualFinishDate = ctrl.$Utils.formatDateTime(\n          ctrl.ruleForm.ActualFinishDate\n        );\n      ctrl.$Utils.post(request).then(function(data) {\n        ctrl.objectReturn = ctrl.$Lodash.cloneDeep(ctrl.ruleForm);\n        ctrl.objectReturn.Id = data.R1.Data;\n        if (ctrl.$Utils.isEmpty(ctrl.objectReturn, \"autoCals\"))\n          delete ctrl.objectReturn.autoCals;\n        if (ctrl.$Utils.isEmpty(ctrl.objectReturn, \"oldName\"))\n          delete ctrl.objectReturn.oldName;\n        ctrl.data.item = ctrl.$Lodash.cloneDeep(ctrl.objectReturn);\n        ctrl.objectReturn.AssignedName = request.R1_AssignedName;\n        ctrl.objectReturn.OwnerName = request.R1_OwnerName;\n        ctrl.objectReturn.Assigned = request.R1_Assigned;\n        ctrl.objectReturn.Value = request.R1_Value;\n        var arrChanged = ctrl.compareChange(ctrl.objectReturn, ctrl.oldObject);\n        if (ctrl.$Utils.isEmpty(arrChanged) && arrChanged.length > 0) {\n          if ((request.R1_RequestTemplate, \"xDynamicData_Setting.Insert\")) {\n            ctrl.createHistoryLogs(arrChanged);\n          } else {\n            arrChanged = arrChanged.filter(function(ele) {\n              return ctrl.$Utils.isEmpty(ele.OldDisplayValue);\n            });\n            if (ctrl.$Utils.equals(arrChanged, []) == false) {\n              ctrl.createHistoryLogs(arrChanged);\n            }\n          }\n        }\n        var target = ctrl.$Lodash.cloneDeep(ctrl.ruleForm);\n        target.Id = data.R1.Data;\n        ctrl.saveOrUpdatePermissions(ctrl.ruleForm.oldName !== \"\", target);\n        ctrl.close();\n      });\n    },\n    compareChange(objReturn, objOld) {\n      var ctrl = this;\n      var arrChanged = [];\n      ctrl.objTemp = ctrl.$Lodash.cloneDeep(ctrl.oldObject);\n      $.each(objReturn, function(key, val) {\n        if (ctrl.$Utils.isEmpty(val)) {\n          var valueReturn = val;\n          var caption = \"\";\n          var field = {};\n          $.each(ctrl.data.targetFields, function(k, values) {\n            if (values.Name === key && values.History == \"true\") {\n              caption = values.Caption;\n              field = values;\n            }\n          });\n          var obj = {};\n\n          $.each(objOld, function(key1, value) {\n            if (\n              key == key1 &&\n              ctrl.$Utils.equals(value, valueReturn) == false\n            ) {\n              obj[key1] = value;\n            }\n          });\n          var changedObject = {\n            ColumnCaption: caption,\n            ColumnName: key,\n            OldDisplayValue: obj[key],\n            OldValue: obj[key],\n            NewDisplayValue: objReturn[key] ? objReturn[key] : valueReturn,\n            NewValue: valueReturn\n          };\n          if (ctrl.$Utils.isEmpty(field)) {\n            switch (field.FieldColumnType) {\n              case \"DateTime\":\n                if (\n                  ctrl.$Utils.stringToDate(val).getTime() ==\n                  ctrl.$Utils.stringToDate(changedObject.OldValue).getTime()\n                ) {\n                  changedObject = undefined;\n                }\n                break;\n              case \"Double\":\n                if (\n                  !ctrl.$Utils.isEmpty(ctrl.objTemp[key]) &&\n                  ctrl.$Utils.isEmpty(objReturn[key])\n                ) {\n                  changedObject.OldDisplayValue = 0;\n                  changedObject.OldValue = 0;\n                }\n                break;\n              case \"Integer\":\n                if (\n                  !ctrl.$Utils.isEmpty(ctrl.objTemp[key]) &&\n                  ctrl.$Utils.isEmpty(objReturn[key])\n                ) {\n                  changedObject.OldDisplayValue = 0;\n                  changedObject.OldValue = 0;\n                }\n                break;\n            }\n          }\n\n          if (changedObject && ctrl.$Utils.isEmpty(caption) && caption != \"\") {\n            arrChanged.push(changedObject);\n          }\n        }\n      });\n      return arrChanged;\n    },\n    createHistoryLogs(arrChanged) {\n      var ctrl = this;\n      var countHistory = ctrl.$Utils.updateParamsSingleRequest(\n        ctrl.$Lodash.cloneDeep(ctrl.$singleRequest),\n        {\n          RequestTemplate: \"ChangedLogs.Count\",\n          SourceId: ctrl.objectReturn.Id,\n          Code: \"ChangedHistory\"\n        }\n      );\n      // ctrl.$Utils.showLoading('start');\n      ctrl.$Utils.post(countHistory).then(function(result) {\n        if (ctrl.$Utils.isEmpty(result, \"R1.Data\")) {\n          var insertRequest = ctrl.$Utils.updateParamsSingleRequest(\n            countHistory,\n            {\n              RequestTemplate: \"ChangedLogs.Insert\",\n              Version: parseInt(result.R1.Data) + 1,\n              Changes: JSON.stringify(arrChanged),\n              CreatedByName: ctrl.$Utils.getUserInfo(\"Username\")\n            }\n          );\n          ctrl.$Utils.post(insertRequest).then(function(insertResult) {\n            // ctrl.$Utils.showLoading('stop');\n          });\n        }\n      });\n    },\n    saveOrUpdatePermissions(isUpdate, target) {\n      var ctrl = this;\n      // ctrl.$Utils.showLoading('start');\n      var req = ctrl.$Lodash.cloneDeep(ctrl.$singleRequest);\n      if (isUpdate == true) {\n        var paramsSearchLinked = {\n          RequestAction: \"SearchLinked\",\n          RequestClass: \"Addition\",\n          ConditionFields: \"Parent;\",\n          StaticFields: \"Code;Child;Parent;Name;Created;Description\",\n          OrderFields: \"Created DESC\",\n          Parent: target.Id\n        };\n        ctrl.$Utils.post(paramsSearchLinked).then(function(result) {\n          if (result.TotalCount > 0) {\n            var arrLink =\n              result.TotalCount == 1\n                ? [result.Data.DataDS.Linked]\n                : result.Data.DataDS.Linked;\n            var removeLinks = {\n              RequestClass: \"xBase\",\n              RequestAction: \"Request\",\n              TotalRequests: arrLink.length,\n              RequestTemplate: \"Permission.Remove\"\n            };\n            $.each(arrLink, function(link, key) {\n              removeLinks[\"R\" + (key + 1) + \"_Id\"] = link.Id;\n            });\n            ctrl.savePermission(target, removeLinks);\n          }\n        });\n      } else {\n        ctrl.savePermission(target);\n      }\n    },\n    savePermission(target, removeLinks) {\n      var ctrl = this;\n      if (target.IsPublic == true) {\n        ctrl.$Utils.linkToRoleEveryone([\n          {\n            Id: target.Id,\n            Caption: target.Name\n          }\n        ]);\n        //ntn load target again\n        ctrl.data.getTargets();\n        ctrl.data.getObject();\n      } else {\n        var permissons = [];\n        var leaders = [];\n        var groups = [];\n        groups.push(target.Value);\n        if (groups && groups.length > 0) {\n          var req = {};\n          groups.filter(function(gro, key) {\n            req[\"R\" + ctrl.ix + \"_RequestTemplate\"] = \"OrgnizationList\";\n            req[\"R\" + ctrl.ix + \"_GroupName\"] = \"Leader\";\n            req[\"R\" + ctrl.ix + \"_GroupParent\"] = gro.GroupId;\n            req[\"R\" + ctrl.ix + \"_RequestDataType\"] = \"json\";\n            req[\"R\" + ctrl.ix + \"_GroupType\"] = \"2\";\n            ctrl.ix++;\n          });\n          req.TotalRequests = ctrl.ix - 1;\n          req.RequestClass = \"xBase\";\n          req.RequestAction = \"Request\";\n          ctrl.$Utils.post(req).then(function(data1) {\n            for (var k = 1; k < ctrl.ix; k++) {\n              var ele = ctrl.$Utils.getDataWithRoot(\n                data1,\n                \"R\" + k + \".Data.UserDS.Group\"\n              );\n              if (ele[0] != undefined) {\n                if (ele[0].GroupName === \"Leader\") {\n                  leaders = leaders.concat(ele);\n                }\n              }\n            }\n            var strLeaders = \"\";\n            leaders.filter(function(ele, key) {\n              if (ele.GroupParent == groups[0].GroupId) {\n                strLeaders += ele.GroupId + \";\";\n                if (target.TargetType == \"2\" || target.TargetType == \"1\") {\n                  var p = {\n                    Parrent: target.Id,\n                    Code: \"Edit\",\n                    Name: target.Name + \" - Edit\",\n                    Child: ele.GroupId,\n                    ChildTable: \"tblGroup\"\n                  };\n                  permissons.push(p);\n                } else if (target.TargetType == \"3\") {\n                  var p1 = {\n                    Parrent: target.Id,\n                    Code: \"Manage\",\n                    Name: target.Name + \" - Manage\",\n                    Child: ele.GroupId,\n                    ChildTable: \"tblGroup\"\n                  };\n                  permissons.push(p1);\n                }\n              }\n            });\n            if (target.Owner && strLeaders.indexOf(target.Owner) == -1) {\n              var p = {\n                Parrent: target.Id,\n                Code: \"Edit\",\n                Name: target.Name + \" - Edit\",\n                Child: target.Owner,\n                ChildTable: \"tblUser\"\n              };\n              permissons.push(p);\n            }\n            if (target.Assigned) {\n              target.Assigned.filter(function(user, key) {\n                if (user !== \"\" && strLeaders.indexOf(user) == -1) {\n                  var p = {\n                    Parrent: target.Id,\n                    Code: \"Edit\",\n                    Name: target.Name + \" - Edit\",\n                    Child: user,\n                    ChildTable: \"tblUser\"\n                  };\n                  permissons.push(p);\n                }\n              });\n            }\n            //\n            //\n            var p10 = {\n              Parrent: target.Id,\n              Code: \"Manage\",\n              Name: target.Name + \" - Manage\",\n              Child: ctrl.$administrator,\n              ChildTable: \"tblGroup\"\n            };\n            permissons.push(p10);\n            var p11 = {\n              Parrent: target.Id,\n              Code: \"Manage\",\n              Name: target.Name + \" - Manage\",\n              Child: ctrl.$supervisor,\n              ChildTable: \"tblGroup\"\n            };\n            permissons.push(p11);\n            //\n            //\n            var persReadyToInsert = {};\n            var index = 1;\n            permissons.filter(function(p, k) {\n              persReadyToInsert[\"R\" + index + \"_RequestClass\"] = \"xBase\";\n              persReadyToInsert[\"R\" + index + \"_RequestAction\"] =\n                \"LinkUserToObject\";\n              persReadyToInsert[\"R\" + index + \"_ParentTable\"] = \"xObject\";\n              persReadyToInsert[\"R\" + index + \"_RequestTemplate\"] =\n                \"Permission.Insert\";\n              persReadyToInsert[\"R\" + index + \"_Parent\"] = p.Parrent;\n              persReadyToInsert[\"R\" + index + \"_Child\"] = p.Child;\n              persReadyToInsert[\"R\" + index + \"_Code\"] = p.Code;\n              persReadyToInsert[\"R\" + index + \"_Name\"] = p.Name;\n              persReadyToInsert[\"R\" + index + \"_ChildTable\"] = p.ChildTable;\n              index++;\n            });\n            persReadyToInsert.TotalRequests = permissons.length;\n            persReadyToInsert.RequestClass = \"xBase\";\n            persReadyToInsert.RequestAction = \"Request\";\n            if (removeLinks == undefined) {\n              ctrl.$Utils.post(persReadyToInsert).then(function(data3) {\n                // ntn load target again\n                ctrl.data.getObject();\n                ctrl.data.getTargets();\n              });\n            } else {\n              ctrl.$Utils.post(removeLinks).then(function(data2) {\n                ctrl.$Utils.post(persReadyToInsert).then(function(data3) {\n                  // ntn load target again\n                  ctrl.data.getTargets();\n                  ctrl.data.getObject();\n                });\n              });\n            }\n          });\n        }\n      }\n    },\n    changeEditState() {\n      this.data.disabled = !this.data.disabled;\n    },\n    changeType(type) {\n      this.dataCopied.targetLst = this.data.targetLst.filter(function(ele) {\n        return ele != undefined && eval(type) - 1 + \"\" === ele.TargetType;\n      });\n      this.$set(\n        this.dataCopied,\n        \"targetFullLst\",\n        this.data.targetSavedLst.filter(function(ele) {\n          return ele != undefined && eval(type) - 1 + \"\" === ele.TargetType;\n        })\n      );\n    },\n    setParent(parent) {\n      var ctrl = this;\n      if (ctrl.ruleForm.TargetType == 3) {\n        // ctrl.model.Value = '';\n        $.each(ctrl.departmentLst, function(k, group) {\n          if (ctrl.$Utils.isEmpty(parent) && group.GroupId == parent) {\n            ctrl.ruleForm.Value = group;\n          }\n        });\n      }\n    }\n  },\n  created() {\n    var ctrl = this;\n    if (ctrl.ruleForm.Id) {\n      ctrl.loadHistory(ctrl.ruleForm.Id);\n      ctrl.changeType(ctrl.ruleForm.TargetType);\n      if (ctrl.ruleForm.IsPublic == undefined) {\n        ctrl.ruleForm.IsPublic = true;\n      }\n      $.each(ctrl.data.targetLst, (k, v) => {\n        if (ctrl.ruleForm.Id === v.Id) {\n          ctrl.ruleForm.Permission = v.Permission;\n          return false;\n        }\n      });\n      ctrl.ruleForm.MilestoneVal = new Date(ctrl.ruleForm.ActualStartDate);\n    } else {\n      ctrl.ruleForm.Permission = \"Edit\";\n      if (ctrl.isLeader) {\n        ctrl.ruleForm.TargetType = ctrl.typeLst[2].Id;\n        ctrl.changeType(ctrl.typeLst[2].Id);\n      } else {\n        ctrl.ruleForm.TargetType = ctrl.typeLst[0].Id;\n        ctrl.changeType(ctrl.typeLst[0].Id);\n      }\n      ctrl.ruleForm.IsPublic = true;\n    }\n    var user = JSON.parse(\n      ctrl.$getItemLocalStorage(ctrl.$localStorageConstant.LoggedOnUser)\n    );\n    if (user.LoginName !== \"superadmin\") {\n      ctrl.data.workers = ctrl.data.workers.filter(el => {\n        return el.LoginName && el.LoginName.indexOf(\"superadmin\") === -1;\n      });\n    }\n  }\n};\n</script>\n<style lang=\"scss\" scoped>\n@media only screen and (max-width: 768px) {\n  /* For mobile phones: */\n  .el-input,\n  .el-select,\n  .el-radio {\n    width: 100%;\n  }\n  .el-radio {\n    margin-left: 0px !important;\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/static/TargetDialog.vue","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true,\\\"alias\\\":{\\\"../img\\\":\\\"../static/img\\\"}}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7d170cdc\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./HistoryGrid.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./HistoryGrid.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7d170cdc\\\",\\\"hasScoped\\\":false,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./HistoryGrid.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/dynamic/HistoryGrid.vue\n// module id = 1001\n// module chunks = 1 11","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true,\\\"alias\\\":{\\\"../img\\\":\\\"../static/img\\\"}}!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7d170cdc\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/sass-loader/lib/loader.js?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./HistoryGrid.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"71e2cbac\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"minimize\":true,\"sourceMap\":true,\"alias\":{\"../img\":\"../static/img\"}}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-7d170cdc\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/dynamic/HistoryGrid.vue\n// module id = 1002\n// module chunks = 1 11","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"#history-grid th{text-align:center!important}#history-grid td,#history-grid th,#history-grid tr{border:thin solid #d3d3d3}\", \"\", {\"version\":3,\"sources\":[\"/Users/yuukininomae/Sites/vue-crm2/src/components/dynamic/HistoryGrid.vue\"],\"names\":[],\"mappings\":\"AACA,iBACE,2BAA8B,CAE/B,AACD,mDAFE,yBAA6B,CAI9B\",\"file\":\"HistoryGrid.vue\",\"sourcesContent\":[\"\\n#history-grid th {\\n  text-align: center !important;\\n  border: solid thin lightgray;\\n}\\n#history-grid tr, #history-grid td {\\n  border: solid thin lightgray;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"minimize\":true,\"sourceMap\":true,\"alias\":{\"../img\":\"../static/img\"}}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-7d170cdc\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/dynamic/HistoryGrid.vue\n// module id = 1003\n// module chunks = 1 11","<template>\n  <el-card id=\"history-grid\" class=\"box-card\">\n    <div slot=\"header\" class=\"clearfix\">\n      <span>Lịch sử</span>\n    </div>\n    <div class=\"el-table__body-wrapper is-scroll-left\">\n      <table style=\"width: 100%\">\n        <thead class=\"positive-bg light text-bold\">\n        <tr>\n          <th v-for=\"h in dtHeader\">{{h}}</th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr v-for=\"itemLog in dtSource\" :style=\"{'background-color': itemLog.type=='body'? '#e4e5e6' : '#fff'}\">\n          <td v-if=\"itemLog.type=='head'\" class=\"success\" colspan=\"3\">\n            v.{{itemLog.value.Version + '.0 '}}<strong>{{itemLog.value.CreatedByName}}</strong>, {{$Utils.formatDateTime(itemLog.value.Created,'DD-MM-YYYY HH:mm')}}\n          </td>\n          <td v-if=\"itemLog.type =='body'\" >{{itemLog.value.ColumnCaption}}</td>\n          <td v-if=\"itemLog.type =='body'\">{{itemLog.value.OldDisplayValue}}</td>\n          <td v-if=\"itemLog.type =='body'\">{{itemLog.value.NewDisplayValue}}</td>\n        </tr>\n        </tbody>\n      </table>\n    </div>\n  </el-card>\n</template>\n<script>\n  export default {\n    props: [\"dtSource\",\"dtHeader\"],\n    methods: {\n    },\n    data() {\n      return {\n      };\n    }\n  }\n</script>\n<style lang=\"scss\">\n  #history-grid {\n    th {\n      text-align: center !important;\n      border: solid thin lightgray;\n    }\n    tr, td {\n      border : solid thin lightgray;\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/dynamic/HistoryGrid.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-card',{staticClass:\"box-card\",attrs:{\"id\":\"history-grid\"}},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"Lịch sử\")])]),_vm._v(\" \"),_c('div',{staticClass:\"el-table__body-wrapper is-scroll-left\"},[_c('table',{staticStyle:{\"width\":\"100%\"}},[_c('thead',{staticClass:\"positive-bg light text-bold\"},[_c('tr',_vm._l((_vm.dtHeader),function(h){return _c('th',[_vm._v(_vm._s(h))])}))]),_vm._v(\" \"),_c('tbody',_vm._l((_vm.dtSource),function(itemLog){return _c('tr',{style:({'background-color': itemLog.type=='body'? '#e4e5e6' : '#fff'})},[(itemLog.type=='head')?_c('td',{staticClass:\"success\",attrs:{\"colspan\":\"3\"}},[_vm._v(\"\\n          v.\"+_vm._s(itemLog.value.Version + '.0 ')),_c('strong',[_vm._v(_vm._s(itemLog.value.CreatedByName))]),_vm._v(\", \"+_vm._s(_vm.$Utils.formatDateTime(itemLog.value.Created,'DD-MM-YYYY HH:mm'))+\"\\n        \")]):_vm._e(),_vm._v(\" \"),(itemLog.type =='body')?_c('td',[_vm._v(_vm._s(itemLog.value.ColumnCaption))]):_vm._e(),_vm._v(\" \"),(itemLog.type =='body')?_c('td',[_vm._v(_vm._s(itemLog.value.OldDisplayValue))]):_vm._e(),_vm._v(\" \"),(itemLog.type =='body')?_c('td',[_vm._v(_vm._s(itemLog.value.NewDisplayValue))]):_vm._e()])}))])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7d170cdc\",\"hasScoped\":false,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/dynamic/HistoryGrid.vue\n// module id = 1005\n// module chunks = 1 11","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-card',{staticClass:\"box-card\"},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',{staticStyle:{\"float\":\"left\"}},[_vm._v(\"Thông tin mục tiêu\")]),_vm._v(\" \"),_c('div',{staticStyle:{\"float\":\"right\",\"padding\":\"3px 0\"}},[(_vm.data.disabled==false && _vm.ruleForm.Permission && _vm.ruleForm.Permission !=='View' )?_c('el-button',{attrs:{\"icon\":\"fa fa-save\"},on:{\"click\":function($event){_vm.submitForm('ruleForm')}}}):_vm._e(),_vm._v(\" \"),(_vm.data.disabled==true && _vm.ruleForm.Permission && _vm.ruleForm.Permission !=='View' )?_c('el-button',{attrs:{\"icon\":\"el-icon-edit\"},on:{\"click\":_vm.changeEditState}}):_vm._e(),_vm._v(\" \"),(_vm.data.isEditable==true && _vm.data.item.Permission ==undefined )?_c('el-button',{attrs:{\"icon\":\"fa fa-eraser\"},on:{\"click\":function($event){_vm.resetForm('ruleForm')}}}):_vm._e(),_vm._v(\" \"),(_vm.ruleForm.Permission && _vm.ruleForm.Permission ==='Manage')?_c('el-button',{attrs:{\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){_vm.deleteTarget()}}}):_vm._e()],1)]),_vm._v(\" \"),_c('div',[_c('el-form',{ref:\"ruleForm\",attrs:{\"model\":_vm.ruleForm,\"rules\":_vm.rules,\"label-position\":_vm.$isMobileDevice?'top':'right',\"label-width\":\"150px\"}},[_c('el-form-item',{attrs:{\"label\":\"Tên:\",\"prop\":\"Name\"}},[_c('el-input',{attrs:{\"disabled\":_vm.data.disabled},model:{value:(_vm.ruleForm.Name),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Name\", $$v)},expression:\"ruleForm.Name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Hiển thị:\",\"prop\":\"IsPublic\"}},[_c('el-switch',{staticStyle:{\"display\":\"block\"},attrs:{\"disabled\":_vm.data.disabled,\"active-color\":\"#13ce66\",\"inactive-color\":\"#ff4949\",\"active-text\":\"Công khai\",\"inactive-text\":\"Riêng tư\"},model:{value:(_vm.ruleForm.IsPublic),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"IsPublic\", $$v)},expression:\"ruleForm.IsPublic\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"demo-form-inline\",attrs:{\"label\":\"Loại thời gian:\",\"prop\":\"Milestone\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"placeholder\":\"--Chọn--\",\"disabled\":_vm.data.disabled},on:{\"change\":function($event){_vm.ruleForm.MilestoneVal=''}},model:{value:(_vm.ruleForm.Milestone),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Milestone\", $$v)},expression:\"ruleForm.Milestone\"}},[_c('el-option',{attrs:{\"label\":\"Tuần\",\"value\":\"1\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"Tháng\",\"value\":\"2\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"Năm\",\"value\":\"3\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"Tuỳ chọn\",\"value\":\"4\"}})],1),_vm._v(\" \"),(_vm.ruleForm.Milestone==1)?_c('el-date-picker',{attrs:{\"type\":\"week\",\"format\":\"Tuần WW\",\"placeholder\":\"--Chọn tuần--\",\"disabled\":_vm.data.disabled},on:{\"change\":function($event){_vm.changeMilestoneVal($event, 'week')}},model:{value:(_vm.ruleForm.MilestoneVal),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"MilestoneVal\", $$v)},expression:\"ruleForm.MilestoneVal\"}}):_vm._e(),_vm._v(\" \"),(_vm.ruleForm.Milestone==2)?_c('el-date-picker',{attrs:{\"type\":\"month\",\"format\":\"MM\",\"placeholder\":\"--Chọn tháng--\",\"disabled\":_vm.data.disabled},on:{\"change\":function($event){_vm.changeMilestoneVal($event, 'month')}},model:{value:(_vm.ruleForm.MilestoneVal),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"MilestoneVal\", $$v)},expression:\"ruleForm.MilestoneVal\"}}):_vm._e(),_vm._v(\" \"),(_vm.ruleForm.Milestone==3)?_c('el-date-picker',{attrs:{\"type\":\"year\",\"placeholder\":\"--Chọn năm--\",\"disabled\":_vm.data.disabled},on:{\"change\":function($event){_vm.changeMilestoneVal($event, 'year')}},model:{value:(_vm.ruleForm.MilestoneVal),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"MilestoneVal\", $$v)},expression:\"ruleForm.MilestoneVal\"}}):_vm._e()],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"demo-form-inline\",attrs:{\"label\":\"Thời gian:\",\"prop\":\"startEndDate\"}},[_c('el-date-picker',{attrs:{\"format\":\"dd-MM-yyyy\",\"disabled\":_vm.data.disabled,\"type\":\"date\",\"placeholder\":\"Bắt đầu\"},model:{value:(_vm.ruleForm.ActualStartDate),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"ActualStartDate\", $$v)},expression:\"ruleForm.ActualStartDate\"}}),_vm._v(\" \"),_c('el-date-picker',{attrs:{\"format\":\"dd-MM-yyyy\",\"disabled\":_vm.data.disabled,\"type\":\"date\",\"placeholder\":\"Kết thúc\"},model:{value:(_vm.ruleForm.ActualFinishDate),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"ActualFinishDate\", $$v)},expression:\"ruleForm.ActualFinishDate\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Loại mục tiêu:\",\"prop\":\"TargetType\"}},[_c('el-radio-group',{attrs:{\"disabled\":!_vm.data.isEditable},on:{\"change\":function($event){_vm.changeType(_vm.ruleForm.TargetType)}},model:{value:(_vm.ruleForm.TargetType),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"TargetType\", $$v)},expression:\"ruleForm.TargetType\"}},_vm._l((_vm.typeLst),function(t){return _c('el-radio',{key:t.Id,attrs:{\"size\":\"mini\",\"label\":t.Id,\"border\":\"\",\"ng-show\":\"data.disabled?true:(t.Id ===ruleForm.TargetType) \"}},[_vm._v(_vm._s(t.Name))])}))],1),_vm._v(\" \"),(_vm.dataCopied.targetLst.length !=undefined && _vm.ruleForm.TargetType!=='1' )?_c('el-form-item',{attrs:{\"label\":\"Mục tiêu cha:\",\"prop\":\"ParentId\"}},[(_vm.isShowAllTarget || !_vm.data.isEditable)?_c('el-select',{attrs:{\"placeholder\":\"--Chọn--\",\"disabled\":_vm.ruleForm.Id!==undefined},on:{\"change\":function($event){_vm.setParent(_vm.ruleForm.ParentId)}},model:{value:(_vm.ruleForm.ParentId),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"ParentId\", $$v)},expression:\"ruleForm.ParentId\"}},_vm._l((_vm.dataCopied.targetFullLst),function(t){return _c('el-option',{key:t.Id,attrs:{\"label\":t.Name,\"value\":t.Id}})})):_c('el-select',{attrs:{\"placeholder\":\"--Chọn--\",\"disabled\":!_vm.data.isEditable},on:{\"change\":function($event){_vm.setParent(_vm.ruleForm.ParentId)}},model:{value:(_vm.ruleForm.ParentId),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"ParentId\", $$v)},expression:\"ruleForm.ParentId\"}},_vm._l((_vm.dataCopied.targetLst),function(t){return _c('el-option',{key:t.Id,attrs:{\"label\":t.Name,\"value\":t.Id}})})),_vm._v(\"\\n             \\n          \"),(_vm.ruleForm.Id===undefined)?_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"Bộ lọc thời gian sẽ ảnh hưởng tới số lượng mục tiêu cha hiển thị. Để hiển thị tất cả mục tiêu, hãy chọn 'Hiển thị tất cả'\",\"placement\":\"top\"}},[_c('i',{staticClass:\"fa fa-lg fa-info-circle\"})]):_vm._e(),_vm._v(\"\\n             \\n          \"),(_vm.ruleForm.Id===undefined)?_c('el-checkbox',{attrs:{\"label\":\"Hiển thị tất cả\"},model:{value:(_vm.isShowAllTarget),callback:function ($$v) {_vm.isShowAllTarget=$$v},expression:\"isShowAllTarget\"}}):_vm._e()],1):_vm._e(),_vm._v(\" \"),(_vm.data.departmentLst.length >0)?_c('el-form-item',{attrs:{\"label\":\"Thuộc phòng ban:\",\"prop\":\"Value\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"placeholder\":\"--Chọn--\",\"disabled\":_vm.data.disabled},model:{value:(_vm.ruleForm.Value),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Value\", $$v)},expression:\"ruleForm.Value\"}},_vm._l((_vm.data.departmentLst),function(t){return _c('el-option',{key:t.GroupId,attrs:{\"label\":t.GroupName,\"value\":t.GroupId}})}))],1):_vm._e(),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Quản lý:\",\"prop\":\"Owner\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"clearable\":\"\",\"placeholder\":\"--Chọn--\",\"disabled\":_vm.data.disabled},model:{value:(_vm.ruleForm.Owner),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Owner\", $$v)},expression:\"ruleForm.Owner\"}},_vm._l((_vm.data.workers),function(t){return (t.UserId.indexOf(';') == -1 && (_vm.ruleForm.Id || t.Status ==1))?_c('el-option',{key:t.UserId,attrs:{\"label\":t.Username,\"value\":t.UserId}}):_vm._e()}))],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Nhân sự thực hiện:\",\"prop\":\"Assigned\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"multiple\":\"\",\"placeholder\":\"--Chọn--\",\"disabled\":_vm.data.disabled},model:{value:(_vm.ruleForm.Assigned),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Assigned\", $$v)},expression:\"ruleForm.Assigned\"}},_vm._l((_vm.data.workers),function(t){return (_vm.ruleForm.Id || t.Status ==1)?_c('el-option',{key:t.UserId,attrs:{\"label\":t.Username,\"value\":t.UserId}}):_vm._e()}))],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"KPIs kế hoạch:\",\"prop\":\"Plan\"}},[_c('el-input',{attrs:{\"disabled\":_vm.data.disabled},on:{\"change\":function($event){_vm.autoCal()}},model:{value:(_vm.ruleForm.Plan),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Plan\", $$v)},expression:\"ruleForm.Plan\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"KPIs đạt:\",\"prop\":\"Done\"}},[_c('el-input',{attrs:{\"disabled\":_vm.data.disabled},on:{\"change\":function($event){_vm.autoCal()}},model:{value:(_vm.ruleForm.Done),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Done\", $$v)},expression:\"ruleForm.Done\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Đơn vị tính:\",\"prop\":\"Unit\"}},[_c('el-input',{attrs:{\"disabled\":_vm.data.disabled},model:{value:(_vm.ruleForm.Unit),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Unit\", $$v)},expression:\"ruleForm.Unit\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Tính % Hoàn thành:\",\"prop\":\"autoCal\"}},[_c('el-switch',{attrs:{\"disabled\":_vm.data.disabled},on:{\"change\":function($event){_vm.autoCal()}},model:{value:(_vm.ruleForm.autoCal),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"autoCal\", $$v)},expression:\"ruleForm.autoCal\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Tỉ lệ hoành thành:\",\"prop\":\"Progress\"}},[_c('el-input',{attrs:{\"disabled\":_vm.data.disabled},model:{value:(_vm.ruleForm.Progress),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Progress\", $$v)},expression:\"ruleForm.Progress\"}})],1)],1)],1)]),_vm._v(\" \"),(!_vm.data.isEditable)?_c('HistoryGrid',{attrs:{\"dtSource\":_vm.viewHistoryModel,\"dtHeader\":['Mục', 'Giá trị cũ', 'Giá trị mới']}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-c9eec43c\",\"hasScoped\":true,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/static/TargetDialog.vue\n// module id = 1006\n// module chunks = 1 11","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"tTbl\"}},[_c('div',{staticStyle:{\"flex\":\"1\",\"display\":\"flex\",\"align-items\":\"center\",\"justify-content\":\"space-between\",\"font-size\":\"14px\",\"padding-right\":\"8px\"}},[_c('el-row'),_vm._v(\" \"),(_vm.editableUser && !_vm.$isMobileDevice)?_c('el-tooltip',{attrs:{\"content\":\"Thêm mới mục tiêu\",\"placement\":\"top\"}},[_c('el-button',{attrs:{\"size\":\"mini\",\"icon\":\"fa fa-plus\"},on:{\"click\":function($event){_vm.addNewTarget()}}})],1):_vm._e(),_vm._v(\" \"),(_vm.editableUser && _vm.$isMobileDevice)?_c('el-button',{attrs:{\"size\":\"mini\",\"icon\":\"fa fa-plus\"},on:{\"click\":function($event){_vm.addNewTarget()}}}):_vm._e()],1),_vm._v(\" \"),_c('el-table',{attrs:{\"data\":_vm.dtSrc,\"border\":\"\",\"empty-text\":\"Không có dữ liệu\"}},[_c('el-table-column',{attrs:{\"label\":\"\",\"width\":\"50px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticStyle:{\"text-align\":\"center\",\"cursor\":\"pointer\"},on:{\"click\":function($event){_vm.openTargetDetail(scope.row)}}},[_c('i',{staticClass:\"fa-lg icon-magnifier-add\"})])]}}])}),_vm._v(\" \"),_c('el-table-tree-column',{attrs:{\"prop\":\"Name\",\"label\":\"Tên\",\"levelKey\":\"level\",\"treeKey\":\"Id\",\"parentKey\":\"ParentId\",\"min-width\":\"200px\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"Progress\",\"label\":\"Hoàn thành\",\"show-overflow-tooltip\":true},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-progress',{attrs:{\"text-inside\":true,\"stroke-width\":18,\"percentage\":Math.round(isNaN(scope.row.Progress)?0:scope.row.Progress)}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"TargetType\",\"label\":\"Loại\",\"show-overflow-tooltip\":true},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n        \"+_vm._s(_vm.targetsObj[scope.row.TargetType]?_vm.targetsObj[scope.row.TargetType].Name:'---')+\"\\n      \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"Plan\",\"label\":\"Kế hoạch\",\"show-overflow-tooltip\":true}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"Done\",\"label\":\"Đạt được\",\"show-overflow-tooltip\":true}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"Unit\",\"label\":\"Đơn vị\",\"show-overflow-tooltip\":true}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"Owner\",\"label\":\"Người quản lý\",\"show-overflow-tooltip\":true},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[(_vm.userWithAvatarLst[scope.row.Owner]!=undefined)?_c('img',{staticClass:\"avatar\",staticStyle:{\"margin\":\"8px 10px 0 0\"},attrs:{\"height\":\"35\",\"width\":\"35\",\"title\":_vm.userWithAvatarLst[scope.row.Owner].Username,\"src\":_vm.loadAvatar(_vm.userWithAvatarLst[scope.row.Owner].Avatar)}}):_c('span',[_vm._v(_vm._s(scope.row.OwnerName))])])]}}])})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-800ef1b4\",\"hasScoped\":false,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/static/TargetSetting.vue\n// module id = 1007\n// module chunks = 1 11","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true,\\\"alias\\\":{\\\"../img\\\":\\\"../static/img\\\"}}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-800ef1b4\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./TargetSetting.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./TargetSetting.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-800ef1b4\\\",\\\"hasScoped\\\":false,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./TargetSetting.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/static/TargetSetting.vue\n// module id = 935\n// module chunks = 1 11","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true,\\\"alias\\\":{\\\"../img\\\":\\\"../static/img\\\"}}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c9eec43c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./TargetDialog.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./TargetDialog.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c9eec43c\\\",\\\"hasScoped\\\":true,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./TargetDialog.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-c9eec43c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/static/TargetDialog.vue\n// module id = 985\n// module chunks = 1 11","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true,\\\"alias\\\":{\\\"../img\\\":\\\"../static/img\\\"}}!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-800ef1b4\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/sass-loader/lib/loader.js?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./TargetSetting.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"3cb0f242\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"minimize\":true,\"sourceMap\":true,\"alias\":{\"../img\":\"../static/img\"}}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-800ef1b4\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/static/TargetSetting.vue\n// module id = 995\n// module chunks = 1 11","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"#tTbl #plusBtn{position:fixed;top:120px;right:30px;z-index:99;cursor:pointer}\", \"\", {\"version\":3,\"sources\":[\"/Users/yuukininomae/Sites/vue-crm2/src/components/static/TargetSetting.vue\"],\"names\":[],\"mappings\":\"AACA,eACE,eAAgB,AAChB,UAAW,AACX,WAAY,AACZ,WAAY,AACZ,cAAgB,CACjB\",\"file\":\"TargetSetting.vue\",\"sourcesContent\":[\"\\n#tTbl #plusBtn {\\n  position: fixed;\\n  top: 120px;\\n  right: 30px;\\n  z-index: 99;\\n  cursor: pointer;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"minimize\":true,\"sourceMap\":true,\"alias\":{\"../img\":\"../static/img\"}}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-800ef1b4\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/static/TargetSetting.vue\n// module id = 996\n// module chunks = 1 11","<template>\n  <div id=\"tTbl\" >\n    <div style=\"flex: 1; display: flex; align-items: center; justify-content: space-between; font-size: 14px; padding-right: 8px;\">\n      <el-row>\n      </el-row>\n      <el-tooltip content=\"Thêm mới mục tiêu\" placement=\"top\" v-if=\"editableUser && !$isMobileDevice\">\n        <el-button size=\"mini\" icon=\"fa fa-plus\" @click=\"addNewTarget()\"></el-button>\n      </el-tooltip>\n      <el-button  v-if=\"editableUser && $isMobileDevice\" size=\"mini\" icon=\"fa fa-plus\" @click=\"addNewTarget()\"></el-button>\n    </div>\n    <el-table :data=\"dtSrc\" border empty-text=\"Không có dữ liệu\">\n      <el-table-column label=\"\" width=\"50px\">\n        <template slot-scope=\"scope\">\n          <div style=\"text-align: center;cursor: pointer\" @click=\"openTargetDetail(scope.row)\">\n            <i class=\"fa-lg icon-magnifier-add\" ></i>\n          </div>\n        </template>\n      </el-table-column>\n      <el-table-tree-column prop=\"Name\" label=\"Tên\" levelKey=\"level\" treeKey=\"Id\" parentKey=\"ParentId\" min-width=\"200px\"></el-table-tree-column>\n      <el-table-column prop=\"Progress\" label=\"Hoàn thành\" :show-overflow-tooltip=\"true\" >\n        <template slot-scope=\"scope\">\n          <el-progress :text-inside=\"true\" :stroke-width=\"18\" :percentage=\"Math.round(isNaN(scope.row.Progress)?0:scope.row.Progress)\"></el-progress>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"TargetType\" label=\"Loại\" :show-overflow-tooltip=\"true\" >\n        <template slot-scope=\"scope\">\n          {{targetsObj[scope.row.TargetType]?targetsObj[scope.row.TargetType].Name:'---'}}\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"Plan\" label=\"Kế hoạch\" :show-overflow-tooltip=\"true\" ></el-table-column>\n      <el-table-column prop=\"Done\" label=\"Đạt được\" :show-overflow-tooltip=\"true\" ></el-table-column>\n      <el-table-column prop=\"Unit\" label=\"Đơn vị\" :show-overflow-tooltip=\"true\" ></el-table-column>\n      <el-table-column prop=\"Owner\" label=\"Người quản lý\" :show-overflow-tooltip=\"true\" >\n        <template slot-scope=\"scope\">\n          <div>\n            <img v-if=\"userWithAvatarLst[scope.row.Owner]!=undefined\" class = 'avatar' style='margin: 8px 10px 0 0;' height='35' width='35' :title=\"userWithAvatarLst[scope.row.Owner].Username\"\n                 :src=\"loadAvatar(userWithAvatarLst[scope.row.Owner].Avatar)\" />\n            <span v-else>{{scope.row.OwnerName}}</span>\n          </div>\n        </template>\n      </el-table-column>\n    </el-table>\n\n\n  </div>\n\n</template>\n\n<script>\n  import Vue from 'vue'\n  import ElTableTreeColumn from  'element-tree-grid/src/index.js';\n  import ElTreeGrid from 'element-tree-grid';\n  import TargetDialog from '@/components/static/TargetDialog'\n  Vue.use(require('vue-moment'));\n  export default {\n    props:[\"targetLst\", \"options\", \"typeLst\", \"workerLst\", \"departmentLst\", \"targetFieldLst\", \"getTargets\", \"getObject\",\n      \"rootId\", \"targetSavedLst\", \"years\", \"months\", \"firstDayOfWeekCfg\"],\n    components:{ElTreeGrid,ElTableTreeColumn},\n    data() {\n      return {\n        dtSrc:[],\n        userWithAvatarLst: [],\n        editableUser: false,\n        weeksOfYear: this.years\n      }\n    },\n    methods: {\n      loadAvatar(avatar){\n       if(avatar == undefined) avatar = 'assets/images/avatars/profile.png';\n       avatar = avatar.replace('profile.jpg', 'profile.png');\n                var strAvatar =\n                  avatar === \"assets/images/avatars/profile.png\"\n                    ? this.$appUri.BaseURL + avatar\n                    : this.$appUri.BaseURL + avatar.replace('/','') + \"&Height=50&Width=50\";\n      return strAvatar;\n     },\n      openTargetDetail(row){\n        var dataToPass = {\n          item: row,\n          workers: this.workerLst,\n          // departments:this.departmentLst,\n          isEditable:false,\n          targetLst:this.targetLst,\n          departmentLst:this.departmentLst,\n          disabled:true,\n          targetFields:JSON.parse(this.targetFieldLst),\n          getTargets:this.getTargets,\n          getObject:this.getObject,\n          targetSavedLst:this.targetSavedLst,\n          weeksOfYear: this.weeksOfYear,\n          months: this.months,\n          firstDayOfWeekCfg: this.firstDayOfWeekCfg,\n        };\n        this.$hub.$emit(\n          \"set-modal-data\",\n          \"\",\n          \"50%\",\n          true,\n          \"center\",\n          TargetDialog,\n          false,\n          \"\",\n          dataToPass,\n          true\n        );\n        this.$hub.$emit(\"open-modal\");\n      },\n      addNewTarget(){\n        if(this.targetFieldLst && this.targetFieldLst.constructor != Array) return;\n        var dataToPass = {item: {},\n          workers: this.workerLst,\n          departments:this.departmentLst,\n          isEditable:true,\n          targetLst:this.targetLst,\n          departmentLst:this.departmentLst,\n          disabled:false,\n          targetFields:JSON.parse(this.targetFieldLst),\n          rootId:this.rootId,\n          getTargets:this.getTargets,\n          getObject:this.getObject,\n          targetSavedLst:this.targetSavedLst,\n          weeksOfYear: this.weeksOfYear,\n          months: this.months,\n          firstDayOfWeekCfg: this.firstDayOfWeekCfg,\n        };\n        this.$hub.$emit(\n          \"set-modal-data\",\n          \"\",\n          \"50%\",\n          true,\n          \"center\",\n          TargetDialog,\n          false,\n          \"\",\n          dataToPass,\n          false\n        );\n        this.$hub.$emit(\"open-modal\");\n      },\n    },\n    watch: {\n      targetLst: function(val){\n          this.dtSrc = this.$Utils.treeify(val, this.options.key, this.options.parentKey, 'level');\n      },\n    },\n    created(){\n      this.userWithAvatarLst = this.$Utils.rotateDementionArr(this.workerLst, 'UserId');\n      this.targetsObj = this.$Utils.rotateDementionArr(this.typeLst, 'Id');\n      this.dtSrc = this.$Utils.treeify(this.targetLst, this.options.key, this.options.parentKey, 'level');\n      var user = JSON.parse(this.$getItemLocalStorage(this.$localStorageConstant.LoggedOnUser));\n      if (this.$isSystemAdmin() || this.$isMantisAdmin()) {\n        this.editableUser = true;\n      } else if (user.GroupRoles) {\n        if (\n          (user.GroupRoles.Leader && user.GroupRoles.Leader.indexOf(user.Project.GroupId) > -1) ||\n          (user.GroupRoles.Director && user.GroupRoles.Director.indexOf(user.Project.GroupId) > -1)\n        ) {\n          this.editableUser = true;\n        }\n      } else {\n        this.editableUser = false;\n      }\n    },\n  };\n</script>\n\n<style lang=\"scss\">\n  #tTbl {\n    #plusBtn {\n      position: fixed;\n      top: 120px;\n      right: 30px;\n      z-index: 99;\n      cursor: pointer;\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/static/TargetSetting.vue","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true,\\\"alias\\\":{\\\"../img\\\":\\\"../static/img\\\"}}!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c9eec43c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/sass-loader/lib/loader.js?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./TargetDialog.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"1031833e\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"minimize\":true,\"sourceMap\":true,\"alias\":{\"../img\":\"../static/img\"}}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-c9eec43c\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/static/TargetDialog.vue\n// module id = 998\n// module chunks = 1 11","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"@media only screen and (max-width:768px){.el-input[data-v-c9eec43c],.el-radio[data-v-c9eec43c],.el-select[data-v-c9eec43c]{width:100%}.el-radio[data-v-c9eec43c]{margin-left:0!important}}\", \"\", {\"version\":3,\"sources\":[\"/Users/yuukininomae/Sites/vue-crm2/src/components/static/TargetDialog.vue\"],\"names\":[],\"mappings\":\"AACA,yCAEA,kFAGI,UAAY,CACf,AACD,2BACI,uBAA4B,CAC/B,CACA\",\"file\":\"TargetDialog.vue\",\"sourcesContent\":[\"\\n@media only screen and (max-width: 768px) {\\n  /* For mobile phones: */\\n.el-input[data-v-c9eec43c],\\n  .el-select[data-v-c9eec43c],\\n  .el-radio[data-v-c9eec43c] {\\n    width: 100%;\\n}\\n.el-radio[data-v-c9eec43c] {\\n    margin-left: 0px !important;\\n}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"minimize\":true,\"sourceMap\":true,\"alias\":{\"../img\":\"../static/img\"}}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-c9eec43c\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/static/TargetDialog.vue\n// module id = 999\n// module chunks = 1 11"],"sourceRoot":""}